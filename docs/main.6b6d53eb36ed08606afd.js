(self.webpackChunkpos_mock_interface=self.webpackChunkpos_mock_interface||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},7716:(t,e,n)=>{"use strict";n.d(e,{deG:()=>tn,tb:()=>ou,AFp:()=>tu,ip1:()=>Ya,CZH:()=>Xa,hGG:()=>Yu,z2F:()=>Bu,sBO:()=>aa,Sil:()=>mu,_Vd:()=>Ns,EJc:()=>uu,SBq:()=>Ls,qLn:()=>_r,vpe:()=>Fa,gxx:()=>so,tBr:()=>Sn,XFs:()=>k,OlP:()=>Xe,zs3:()=>So,ZZ4:()=>ta,aQg:()=>na,soG:()=>au,YKP:()=>ya,v3s:()=>zu,h0i:()=>ma,PXZ:()=>Mu,R0b:()=>bu,FiY:()=>En,Lbi:()=>iu,g9A:()=>ru,Qsj:()=>Us,FYo:()=>Ms,JOm:()=>Tr,Tiy:()=>Vs,q3G:()=>fr,tp0:()=>Tn,EAV:()=>Zu,Rgc:()=>fa,dDg:()=>Iu,DyG:()=>en,q4F:()=>Bs,GfV:()=>qs,s_b:()=>ba,ifc:()=>L,eFA:()=>Uu,G48:()=>Lu,f3M:()=>bn,X6Q:()=>Ru,_c5:()=>Ju,VLi:()=>ku,c2e:()=>su,zSh:()=>uo,wAp:()=>ys,vHH:()=>m,EiD:()=>lr,mCW:()=>Zn,qzn:()=>Fn,JVY:()=>Un,pB0:()=>Bn,eBb:()=>Vn,L6k:()=>jn,LAX:()=>qn,cg1:()=>ps,Tjo:()=>Qu,kL8:()=>gs,yhl:()=>Mn,dqk:()=>V,sIi:()=>No,CqO:()=>$o,QGY:()=>zo,F4k:()=>Ho,RDi:()=>Tt,AaK:()=>l,z3N:()=>Ln,qOj:()=>To,TTD:()=>vt,_Bn:()=>As,xp6:()=>hi,uIk:()=>Ro,ekj:()=>ns,Suo:()=>Qa,Xpm:()=>W,lG2:()=>it,Yz7:()=>w,cJS:()=>_,oAB:()=>et,Yjl:()=>ot,Y36:()=>Mo,_UZ:()=>Bo,qZA:()=>qo,TgZ:()=>Vo,EpF:()=>Go,n5z:()=>Ke,Ikx:()=>ls,LFG:()=>vn,$8M:()=>Je,NdJ:()=>Zo,CRH:()=>Ja,oxw:()=>Jo,Hsn:()=>Xo,F$t:()=>Yo,Q6J:()=>Uo,DdM:()=>Ra,iGM:()=>Ka,CHM:()=>Bt,oJD:()=>dr,LSH:()=>pr,kYT:()=>nt,YNc:()=>Fo,_uU:()=>as,hij:()=>us,lnq:()=>cs});var r=n(9765),i=n(5319),o=n(7574),s=n(6682),a=n(8819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const f=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(f)&&t.__forward_ref__===d}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _(t){return{providers:t.providers||[],imports:t.imports||[]}}function S(t){return E(t,C)||E(t,x)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function T(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(A))?t[I]:null}const C=u({"\u0275prov":u}),I=u({"\u0275inj":u}),x=u({ngInjectableDef:u}),A=u({ngInjectorDef:u});var k=(()=>((k=k||{})[k.Default=0]="Default",k[k.Host=1]="Host",k[k.Self=2]="Self",k[k.SkipSelf=4]="SkipSelf",k[k.Optional=8]="Optional",k))();let O;function N(t){const e=O;return O=t,e}function P(t,e,n){const r=S(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&k.Optional?null:void 0!==e?e:void b(l(t),"Injector")}function D(t){return{toString:t}.toString()}var R=(()=>((R=R||{})[R.OnPush=0]="OnPush",R[R.Default=1]="Default",R))(),L=(()=>((L=L||{})[L.Emulated=0]="Emulated",L[L.None=2]="None",L[L.ShadowDom=3]="ShadowDom",L))();const F="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j="undefined"!=typeof global&&global,V=F||j||M||U,q={},B=[],G=u({"\u0275cmp":u}),z=u({"\u0275dir":u}),H=u({"\u0275pipe":u}),$=u({"\u0275mod":u}),Z=u({"\u0275loc":u}),K=u({"\u0275fac":u}),Q=u({__NG_ELEMENT_ID__:u});let J=0;function W(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||L.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=J++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Y):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(X):null,n})}function Y(t){return st(t)||function(t){return t[z]||null}(t)}function X(t){return function(t){return t[H]||null}(t)}const tt={};function et(t){return D(()=>{const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(tt[t.id]=t.type),e})}function nt(t,e){return D(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=W;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[G]||null}function at(t,e){const n=t[$]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty(K)?t[K]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=_t),wt}function wt(){const t=St(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function _t(t,e,n,r){const i=St(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===q),t[r]=e}function St(t){return t.__ngSimpleChanges__||null}let Et;function Tt(t){Et=t}function Ct(){return void 0!==Et?Et:"undefined"!=typeof document?document:void 0}function It(t){return!!t.listen}vt.ngInherit=!0;const xt={createRenderer:(t,e)=>Ct()};function At(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return At(e[t])}function Ot(t,e){return At(e[t.index])}function Nt(t,e){return t.data[e]}function Pt(t,e){const n=e[t];return lt(n)?n:n[0]}function Dt(t){return 4==(4&t[2])}function Rt(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Ft(t){t[18]=0}function Mt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ut={lFrame:se(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jt(){return Ut.bindingsEnabled}function Vt(){return Ut.lFrame.lView}function qt(){return Ut.lFrame.tView}function Bt(t){return Ut.lFrame.contextLView=t,t[8]}function Gt(){let t=zt();for(;null!==t&&64===t.type;)t=t.parent;return t}function zt(){return Ut.lFrame.currentTNode}function Ht(t,e){const n=Ut.lFrame;n.currentTNode=t,n.isParent=e}function $t(){return Ut.lFrame.isParent}function Zt(){Ut.lFrame.isParent=!1}function Kt(){return Ut.isInCheckNoChangesMode}function Qt(t){Ut.isInCheckNoChangesMode=t}function Jt(){return Ut.lFrame.bindingIndex++}function Wt(t){const e=Ut.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Yt(t,e){const n=Ut.lFrame;n.bindingIndex=n.bindingRootIndex=t,Xt(e)}function Xt(t){Ut.lFrame.currentDirectiveIndex=t}function te(){return Ut.lFrame.currentQueryIndex}function ee(t){Ut.lFrame.currentQueryIndex=t}function ne(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function re(t,e,n){if(n&k.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&k.Host||(r=ne(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Ut.lFrame=oe();return r.currentTNode=e,r.lView=t,!0}function ie(t){const e=oe(),n=t[1];Ut.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function oe(){const t=Ut.lFrame,e=null===t?null:t.child;return null===e?se(t):e}function se(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ae(){const t=Ut.lFrame;return Ut.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ue=ae;function ce(){const t=ae();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function le(){return Ut.lFrame.selectedIndex}function he(t){Ut.lFrame.selectedIndex=t}function fe(){const t=Ut.lFrame;return Nt(t.tView,t.selectedIndex)}function de(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function pe(t,e,n){ye(t,e,3,n)}function ge(t,e,n,r){(3&t[2])===n&&ye(t,e,n,r)}function me(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ye(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ve(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ve(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const be=-1;class we{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function _e(t,e,n){const r=It(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Ee(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Se(t){return 3===t||4===t||6===t}function Ee(t){return 64===t.charCodeAt(0)}function Te(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ce(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ce(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ie(t){return t!==be}function xe(t){return 32767&t}function Ae(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let ke=!0;function Oe(t){const e=ke;return ke=t,e}let Ne=0;function Pe(t,e){const n=Re(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,De(r.data,t),De(e,null),De(r.blueprint,null));const i=Le(t,e),o=t.injectorIndex;if(Ie(i)){const t=xe(i),n=Ae(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function De(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Re(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Le(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return be;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return be}function Fe(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Ne++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Me(t,e,n){if(n&k.Optional)return t;b(e,"NodeInjector")}function Ue(t,e,n,r){if(n&k.Optional&&void 0===r&&(r=null),0==(n&(k.Self|k.Host))){const i=t[9],o=N(void 0);try{return i?i.get(e,r,n&k.Optional):P(e,r,n&k.Optional)}finally{N(o)}}return Me(r,e,n)}function je(t,e,n,r=k.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Q)?t[Q]:void 0;return"number"==typeof e?e>=0?255&e:qe:e}(n);if("function"==typeof o){if(!re(e,t,r))return r&k.Host?Me(i,n,r):Ue(e,n,r,i);try{const t=o(r);if(null!=t||r&k.Optional)return t;b(n)}finally{ue()}}else if("number"==typeof o){let i=null,s=Re(t,e),a=be,u=r&k.Host?e[16][6]:null;for((-1===s||r&k.SkipSelf)&&(a=-1===s?Le(t,e):e[s+8],a!==be&&$e(r,!1)?(i=e[1],s=xe(a),e=Ae(a,e)):s=-1);-1!==s;){const t=e[1];if(He(o,s,t.data)){const t=Be(s,e,n,i,r,u);if(t!==Ve)return t}a=e[s+8],a!==be&&$e(r,e[1].data[s+8]===u)&&He(o,s,e)?(i=t,s=xe(a),e=Ae(a,e)):s=-1}}}return Ue(e,n,r,i)}const Ve={};function qe(){return new Ze(Gt(),Vt())}function Be(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ge(a,s,n,null==r?dt(a)&&ke:r!=s&&0!=(3&a.type),i&k.Host&&o===a);return null!==u?ze(e,s,u,a):Ve}function Ge(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof we){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Oe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?N(s.injectImpl):null;re(t,r,k.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&N(u),Oe(a),s.resolving=!1,ue()}}return i}function He(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function $e(t,e){return!(t&k.Self||t&k.Host&&e)}class Ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return je(this._tNode,this._lView,t,void 0,e)}}function Ke(t){return D(()=>{const e=t.prototype.constructor,n=e[K]||Qe(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||Qe(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function Qe(t){return g(t)?()=>{const e=Qe(p(t));return e&&e()}:mt(t)}function Je(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Se(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Gt(),t)}const We="__parameters__";function Ye(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(We)?t[We]:Object.defineProperty(t,We,{value:[]})[We];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Xe{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const tn=new Xe("AnalyzeForEntryComponents"),en=Function;function nn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),nn(r,e)):e!==t&&e.push(r)}return e}function rn(t,e){t.forEach(t=>Array.isArray(t)?rn(t,e):e(t))}function on(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function an(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function un(t,e,n){let r=ln(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function cn(t,e){const n=ln(t,e);if(n>=0)return t[1|n]}function ln(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const hn={},fn=/\n/gm,dn="__source",pn=u({provide:String,useValue:u});let gn;function mn(t){const e=gn;return gn=t,e}function yn(t,e=k.Default){if(void 0===gn)throw new Error("inject() must be called from an injection context");return null===gn?P(t,void 0,e):gn.get(t,e&k.Optional?null:void 0,e)}function vn(t,e=k.Default){return(O||yn)(p(t),e)}const bn=vn;function wn(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=k.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(vn(t,n))}else e.push(vn(r))}return e}function _n(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Sn=_n(Ye("Inject",t=>({token:t})),-1),En=_n(Ye("Optional"),8),Tn=_n(Ye("SkipSelf"),4);let Cn,In;function xn(t){var e;return(null===(e=function(){if(void 0===Cn&&(Cn=null,V.trustedTypes))try{Cn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Cn}())||void 0===e?void 0:e.createHTML(t))||t}function An(t){var e;return(null===(e=function(){if(void 0===In&&(In=null,V.trustedTypes))try{In=V.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return In}())||void 0===e?void 0:e.createHTML(t))||t}class kn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class On extends kn{getTypeName(){return"HTML"}}class Nn extends kn{getTypeName(){return"Style"}}class Pn extends kn{getTypeName(){return"Script"}}class Dn extends kn{getTypeName(){return"URL"}}class Rn extends kn{getTypeName(){return"ResourceURL"}}function Ln(t){return t instanceof kn?t.changingThisBreaksApplicationSecurity:t}function Fn(t,e){const n=Mn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Mn(t){return t instanceof kn&&t.getTypeName()||null}function Un(t){return new On(t)}function jn(t){return new Nn(t)}function Vn(t){return new Pn(t)}function qn(t){return new Dn(t)}function Bn(t){return new Rn(t)}class Gn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(xn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class zn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=xn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=xn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Hn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,$n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(t){return(t=String(t)).match(Hn)||t.match($n)?t:"unsafe:"+t}function Kn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Qn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Jn=Kn("area,br,col,hr,img,wbr"),Wn=Kn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yn=Kn("rp,rt"),Xn=Qn(Yn,Wn),tr=Qn(Jn,Qn(Wn,Kn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qn(Yn,Kn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Xn),er=Kn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nr=Kn("srcset"),rr=Qn(er,nr,Kn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Kn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ir=Kn("script,style,template");class or{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!tr.hasOwnProperty(e))return this.sanitizedSomething=!0,!ir.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!rr.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;er[o]&&(s=Zn(s)),nr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Zn(t.trim())).join(", ")),this.buf.push(" ",e,'="',ur(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();tr.hasOwnProperty(e)&&!Jn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ur(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const sr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ar=/([^\#-~ |!])/g;function ur(t){return t.replace(/&/g,"&amp;").replace(sr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ar,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cr;function lr(t,e){let n=null;try{cr=cr||function(t){const e=new zn(t);return function(){try{return!!(new window.DOMParser).parseFromString(xn(""),"text/html")}catch(t){return!1}}()?new Gn(e):e}(t);let r=e?String(e):"";n=cr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=cr.getInertBodyElement(r)}while(r!==o);return xn((new or).sanitizeChildren(hr(n)||n))}finally{if(n){const t=hr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function hr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fr=(()=>((fr=fr||{})[fr.NONE=0]="NONE",fr[fr.HTML=1]="HTML",fr[fr.STYLE=2]="STYLE",fr[fr.SCRIPT=3]="SCRIPT",fr[fr.URL=4]="URL",fr[fr.RESOURCE_URL=5]="RESOURCE_URL",fr))();function dr(t){const e=gr();return e?An(e.sanitize(fr.HTML,t)||""):Fn(t,"HTML")?An(Ln(t)):lr(Ct(),y(t))}function pr(t){const e=gr();return e?e.sanitize(fr.URL,t)||"":Fn(t,"URL")?Ln(t):Zn(y(t))}function gr(){const t=Vt();return t&&t[12]}function mr(t,e){t.__ngContext__=e}function yr(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function vr(t){return t.ngDebugContext}function br(t){return t.ngOriginalError}function wr(t,...e){t.error(...e)}class _r{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||wr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?vr(t)?vr(t):this._findContext(br(t)):null}_findOriginalError(t){let e=br(t);for(;e&&br(e);)e=br(e);return e}}const Sr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function Er(t){return t instanceof Function?t():t}var Tr=(()=>((Tr=Tr||{})[Tr.Important=1]="Important",Tr[Tr.DashCase=2]="DashCase",Tr))();function Cr(t,e){return(void 0)(t,e)}function Ir(t){const e=t[3];return ht(e)?e[3]:e}function xr(t){return kr(t[13])}function Ar(t){return kr(t[4])}function kr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function Or(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=At(r);0===t&&null!==n?null==i?Ur(e,n,a):Mr(e,n,a,i||null,!0):1===t&&null!==n?Mr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Vr(t,e);r&&function(t,e,n,r){It(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==At(n)&&Or(e,t,r,o,i);for(let s=ct;s<n.length;s++){const i=n[s];Kr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Nr(t,e,n){return It(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Pr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Mt(i,-1)),n.splice(r,1)}function Dr(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Pr(o,r),e>0&&(t[n-1][4]=r[4]);const s=sn(t,ct+e);Kr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Rr(t,e){if(!(256&e[2])){const n=e[11];It(n)&&n.destroyNode&&Kr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Lr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&Lr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&Lr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Lr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof we)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):At(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&It(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&Pr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Fr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===L.None||e===L.Emulated)return null}return Ot(r,n)}(t,e.parent,n)}function Mr(t,e,n,r,i){It(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ur(t,e,n){It(t)?t.appendChild(e,n):e.appendChild(n)}function jr(t,e,n,r,i){null!==r?Mr(t,e,n,r,i):Ur(t,e,n)}function Vr(t,e){return It(t)?t.parentNode(e):e.parentNode}function qr(t,e,n){return Br(t,e,n)}let Br=function(t,e,n){return 40&t.type?Ot(t,n):null};function Gr(t,e,n,r){const i=Fr(t,r,e),o=e[11],s=qr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)jr(o,i,n[a],s,!1);else jr(o,i,n,s,!1)}function zr(t,e){if(null!==e){const n=e.type;if(3&n)return Ot(e,t);if(4&n)return $r(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return zr(t,n);{const n=t[e.index];return ht(n)?$r(-1,n):At(n)}}if(32&n)return Cr(e,t)()||At(t[e.index]);{const n=Hr(t,e);return null!==n?Array.isArray(n)?n[0]:zr(Ir(t[16]),n):zr(t,e.next)}}return null}function Hr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function $r(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return zr(t,r)}return e[7]}function Zr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&mr(At(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Zr(t,e,n.child,r,i,o,!1),Or(e,t,i,a,o);else if(32&u){const s=Cr(n,r);let u;for(;u=s();)Or(e,t,i,u,o);Or(e,t,i,a,o)}else 16&u?Qr(t,e,r,n,i,o):Or(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Kr(t,e,n,r,i,o){Zr(n,r,t.firstChild,e,i,o,!1)}function Qr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Or(e,t,i,a[u],o);else Zr(t,e,a,s[3],i,o,!0)}function Jr(t,e,n){It(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Wr(t,e,n){It(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Yr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Xr="ng-template";function ti(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Yr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ei(t){return 4===t.type&&t.value!==Xr}function ni(t,e,n){return e===(4!==t.type||n?t.value:Xr)}function ri(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Se(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ni(t,u,n)||""===u&&1===e.length){if(ii(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ti(t.attrs,c,n)){if(ii(r))return!1;s=!0}continue}const l=oi(8&r?"class":u,i,ei(t),n);if(-1===l){if(ii(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Yr(e,c,0)||2&r&&c!==t){if(ii(r))return!1;s=!0}}}}else{if(!s&&!ii(r)&&!ii(u))return!1;if(s&&ii(u))continue;s=!1,r=u|1&r}}return ii(r)||s}function ii(t){return 0==(1&t)}function oi(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function si(t,e,n=!1){for(let r=0;r<e.length;r++)if(ri(t,e[r],n))return!0;return!1}function ai(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function ui(t,e){return t?":not("+e.trim()+")":e}function ci(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||ii(s)||(e+=ui(o,i),i=""),r=s,o=o||!ii(r);n++}return""!==i&&(e+=ui(o,i)),e}const li={};function hi(t){fi(qt(),Vt(),le()+t,Kt())}function fi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&pe(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ge(e,r,0,n)}he(n)}function di(t,e){return t<<17|e<<2}function pi(t){return t>>17&32767}function gi(t){return 2|t}function mi(t){return(131068&t)>>2}function yi(t,e){return-131069&t|e<<2}function vi(t){return 1|t}function bi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ee(i),n.contentQueries(2,e[o],o)}}}function wi(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ft(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function _i(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=zt(),s=$t(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Ut.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Ut.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Ht(o,!0),o}function Si(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ei(t,e,n){ie(e);try{const r=t.viewQuery;null!==r&&Yi(1,r,n);const i=t.template;null!==i&&Ii(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&bi(t,e),t.staticViewQueries&&Yi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Zi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,ce()}}function Ti(t,e,n,r){const i=e[2];if(256==(256&i))return;ie(e);const o=Kt();try{Ft(e),Ut.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ii(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&pe(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),me(e,0)}if(function(t){for(let e=xr(t);null!==e;e=Ar(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Mt(r,1),n[2]|=1024}}}(e),function(t){for(let e=xr(t);null!==e;e=Ar(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Rt(n)&&Ti(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&bi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&pe(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),me(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)he(~r);else{const i=r,o=n[++t],s=n[++t];Yt(o,i),s(2,e[i])}}}finally{he(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Hi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Yi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&pe(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),me(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Mt(e[3],-1))}finally{ce()}}function Ci(t,e,n,r){const i=e[10],o=!Kt(),s=Dt(e);try{o&&!s&&i.begin&&i.begin(),s&&Ei(t,e,r),Ti(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ii(t,e,n,r,i){const o=le(),s=2&r;try{he(-1),s&&e.length>ut&&fi(t,e,ut,Kt()),n(r,i)}finally{he(o)}}function xi(t,e,n){jt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Pe(n,e),mr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&qi(e,n,r);const u=ze(e,t,a,n);mr(u,e),null!==s&&Bi(0,a-i,u,r,0,s),o&&(Pt(n.index,e)[8]=u)}}(t,e,n,Ot(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Ut.lFrame.currentDirectiveIndex;try{he(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Xt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Fi(r,i)}}finally{he(-1),Xt(s)}}(t,e,n))}function Ai(t,e,n=Ot){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ki(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Oi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Oi(t,e,n,r,i,o,s,a,u,c){const l=ut+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:li);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function Ni(t,e,n,r){const i=to(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&eo(t).push(r,i.length-1))}function Pi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Di(t,e,n,r,i,o,s,a){const u=Ot(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(ro(t,n,c,r,i),dt(e)&&function(t,e){const n=Pt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,It(o)?o.setProperty(u,r,i):Ee(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Ri(t,e,n,r){let i=!1;if(jt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];si(n,s.selectors,!1)&&(i||(i=[]),Fe(Pe(n,e),t,s.type),gt(s)?(Mi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,ji(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Si(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Te(n.mergedAttrs,c.hostAttrs),Vi(t,n,e,u,c),Ui(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ei(e)?null:Gi(n,i);o.push(c),s=Pi(n,u,s),a=Pi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Te(n.mergedAttrs,n.attrs),i}function Li(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Fi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Mi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ui(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function ji(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Vi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new we(o,gt(i),null);t.blueprint[r]=s,n[r]=s,Li(t,e,0,r,Si(t,n,i.hostVars,li),i)}function qi(t,e,n){const r=Ot(e,t),i=ki(n),o=t[10],s=Ki(t,wi(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Bi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Gi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function zi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Hi(t,e){const n=Pt(e,t);if(Rt(n)){const t=n[1];80&n[2]?Ti(t,n,t.template,n[8]):n[5]>0&&$i(n)}}function $i(t){for(let n=xr(t);null!==n;n=Ar(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ti(t,e,t.template,e[8])}else e[5]>0&&$i(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Pt(e[n],t);Rt(r)&&r[5]>0&&$i(r)}}function Zi(t,e){const n=Pt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Ei(r,n,n[8])}function Ki(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Qi(t){for(;t;){t[2]|=64;const e=Ir(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ji(t,e,n){const r=e[10];r.begin&&r.begin();try{Ti(t,e,t.template,n)}catch(i){throw no(e,i),i}finally{r.end&&r.end()}}function Wi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=yr(n),i=r[1];Ci(i,r,i.template,n)}}(t[8])}function Yi(t,e,n){ee(0),e(t,n)}const Xi=(()=>Promise.resolve(null))();function to(t){return t[7]||(t[7]=[])}function eo(t){return t.cleanup||(t.cleanup=[])}function no(t,e){const n=t[9],r=n?n.get(_r,null):null;r&&r.handleError(e)}function ro(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function io(t,e,n){const r=kt(e,t);!function(t,e,n){It(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function oo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const so=new Xe("INJECTOR",-1);class ao{get(t,e=hn){if(e===hn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const uo=new Xe("Set Injector scope."),co={},lo={};let ho;function fo(){return void 0===ho&&(ho=new ao),ho}function po(t,e=null,n=null,r){return new go(t,n,e||fo(),r)}class go{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&rn(e,n=>this.processProvider(n,t,e)),rn([t],t=>this.processInjectorType(t,[],i)),this.records.set(so,vo(void 0,this));const o=this.records.get(uo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=hn,n=k.Default){this.assertNotDestroyed();const r=mn(this);try{if(!(n&k.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof Xe)&&S(t);e=n&&this.injectableDefInScope(n)?vo(mo(t),co):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&k.Self?fo():this.parent).get(t,e=n&k.Optional&&e===hn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[dn]&&i.unshift(e[dn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(fn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{mn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=T(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{rn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];rn(r,t=>this.processProvider(t,n,r||B))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,vo(a,co));const u=r.providers;if(null!=u&&!s){const e=t;rn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=wo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return bo(t)?vo(void 0,t.useValue):vo(yo(t),co)}(t);if(wo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=vo(void 0,co,!0),e.factory=()=>wn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===co&&(e.value=lo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=p(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function mo(t){const e=S(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof Xe)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=an(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[C]||t[x]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function yo(t,e,n){let r;if(wo(t)){const e=p(t);return mt(e)||mo(e)}if(bo(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...wn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>vn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||mo(e);r=()=>new e(...wn(t.deps))}var i;return r}function vo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function bo(t){return null!==t&&"object"==typeof t&&pn in t}function wo(t){return"function"==typeof t}const _o=function(t,e,n){return function(t,e=null,n=null,r){const i=po(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class So{static create(t,e){return Array.isArray(t)?_o(t,e,""):_o(t.providers,t.parent,t.name||"")}}function Eo(t,e){de(yr(t)[1],Gt())}function To(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(gt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Co(t.inputs),e.declaredInputs=Co(t.declaredInputs),e.outputs=Co(t.outputs);const n=i.hostBindings;n&&Ao(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&Io(t,o),s&&xo(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),gt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===To&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Te(i.hostAttrs,n=Te(n,i.hostAttrs))}}(r)}function Co(t){return t===q?{}:t===B?[]:t}function Io(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function xo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Ao(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}So.THROW_IF_NOT_FOUND=hn,So.NULL=new ao,So.\u0275prov=w({token:So,providedIn:"any",factory:()=>vn(so)}),So.__NG_ELEMENT_ID__=-1;let ko=null;function Oo(){if(!ko){const t=V.Symbol;if(t&&t.iterator)ko=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(ko=n)}}}return ko}function No(t){return!!Po(t)&&(Array.isArray(t)||!(t instanceof Map)&&Oo()in t)}function Po(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Do(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ro(t,e,n,r){const i=Vt();return Do(i,Jt(),e)&&(qt(),function(t,e,n,r,i,o){const s=Ot(t,e);!function(t,e,n,r,i,o,s){if(null==o)It(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);It(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(fe(),i,t,e,n,r)),Ro}function Lo(t,e,n,r,i,o,s,a){const u=function(t,e,n,r,i){const o=function(t,e,n,r){const i=Do(t,e,n);return Do(t,e+1,r)||i}(t,e,n,r);return Do(t,e+2,i)||o}(t,Ut.lFrame.bindingIndex,n,i,s);return Wt(3),u?e+y(n)+r+y(i)+o+y(s)+a:li}function Fo(t,e,n,r,i,o,s,a){const u=Vt(),c=qt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=_i(e,t,4,s||null,Lt(c,a));Ri(e,n,l,Lt(c,u)),de(e,l);const h=l.tViews=Oi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Ht(h,!1);const f=u[11].createComment("");Gr(c,u,f,h),mr(f,u),Ki(u,u[l]=zi(f,u,f,h)),pt(h)&&xi(c,u,h),null!=s&&Ai(u,h,a)}function Mo(t,e=k.Default){const n=Vt();return null===n?vn(t,e):je(Gt(),n,p(t),e)}function Uo(t,e,n){const r=Vt();return Do(r,Jt(),e)&&Di(qt(),fe(),r,t,e,r[11],n,!1),Uo}function jo(t,e,n,r,i){const o=i?"class":"style";ro(t,n,e.inputs[o],o,r)}function Vo(t,e,n,r){const i=Vt(),o=qt(),s=ut+t,a=i[11],u=i[s]=Nr(a,e,Ut.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=_i(e,t,2,i,Lt(a,o));return Ri(e,n,u,Lt(a,s)),null!==u.attrs&&oo(u,u.attrs,!1),null!==u.mergedAttrs&&oo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Ht(c,!0);const l=c.mergedAttrs;null!==l&&_e(a,u,l);const h=c.classes;null!==h&&Wr(a,u,h);const f=c.styles;null!==f&&Jr(a,u,f),64!=(64&c.flags)&&Gr(o,i,u,c),0===Ut.lFrame.elementDepthCount&&mr(u,i),Ut.lFrame.elementDepthCount++,pt(c)&&(xi(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Ai(i,c)}function qo(){let t=Gt();$t()?Zt():(t=t.parent,Ht(t,!1));const e=t;Ut.lFrame.elementDepthCount--;const n=qt();n.firstCreatePass&&(de(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&jo(n,e,Vt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&jo(n,e,Vt(),e.stylesWithoutHost,!1)}function Bo(t,e,n,r){Vo(t,e,n,r),qo()}function Go(){return Vt()}function zo(t){return!!t&&"function"==typeof t.then}function Ho(t){return!!t&&"function"==typeof t.subscribe}const $o=Ho;function Zo(t,e,n,r){const i=Vt(),o=qt(),s=Gt();return function(t,e,n,r,i,o,s,a){const u=pt(r),c=t.firstCreatePass&&eo(t),l=to(e);let h=!0;if(3&r.type||a){const f=Ot(r,e),d=a?a(f):f,p=l.length,g=a?t=>a(At(t[r.index])):r.index;if(It(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Qo(r,e,0,o,!1);const t=n.listen(d,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=Qo(r,e,0,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=Qo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Zo}function Ko(t,e,n,r){try{return!1!==n(r)}catch(i){return no(t,i),!1}}function Qo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Pt(t.index,e):e;0==(32&e[2])&&Qi(s);let a=Ko(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=Ko(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Jo(t=1){return function(t){return(Ut.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Ut.lFrame.contextLView))[8]}(t)}function Wo(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?si(t,o,!0):ai(r,o))return i}else n=i}return n}function Yo(t){const e=Vt()[16][6];if(!e.projection){const n=e.projection=an(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?Wo(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function Xo(t,e=0,n){const r=Vt(),i=qt(),o=_i(i,ut+t,16,null,n||null);null===o.projection&&(o.projection=e),Zt(),64!=(64&o.flags)&&function(t,e,n){Qr(e[11],0,e,n,Fr(t,n,e),qr(n.parent||e[6],n,e))}(i,r,o)}function ts(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?pi(o):mi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];es(t[a],e)&&(u=!0,t[a+1]=r?vi(n):gi(n)),a=r?pi(n):mi(n)}u&&(t[n+1]=r?gi(o):vi(o))}function es(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ln(t,e)>=0}function ns(t,e){return function(t,e,n,r){const i=Vt(),o=qt(),s=Wt(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[le()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Ut.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=is(n=rs(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=rs(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==mi(r))return t[pi(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=rs(null,t,e,n[1],r),n=is(n,e.attrs,r),function(t,e,n,r){t[pi(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=is(r,t[o].hostAttrs,true);return is(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=pi(s),u=mi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ln(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=pi(t[a+1]);t[r+1]=di(e,a),0!==e&&(t[e+1]=yi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=di(a,0),0!==a&&(t[a+1]=yi(t[a+1],r)),a=r;else t[r+1]=di(u,0),0===a?a=r:t[u+1]=yi(t[u+1],r),u=r;l&&(t[r+1]=gi(t[r+1])),ts(t,c,r,!0),ts(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&ln(o,e)>=0&&(n[r+1]=vi(n[r+1]))}(e,c,t,r),s=di(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==li&&Do(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];ss(1==(1&c)?os(u,e,n,i,mi(c),s):void 0)||(ss(o)||function(t){return 2==(2&t)}(c)&&(o=os(u,null,n,i,a,s)),function(t,e,n,r,i){const o=It(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,kt(le(),n),i,o))}(o,o.data[le()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(Ln(t))),t}(e),true,s)}(t,e),ns}function rs(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=is(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function is(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),un(t,s,!!n||e[++o]))}return void 0===t?null:t}function os(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===li&&(l=c?B:void 0);let h=c?cn(l,r):u===r?l:void 0;if(o&&!ss(h)&&(h=cn(e,r)),ss(h)&&(a=h,s))return a;const f=t[i+1];i=s?pi(f):mi(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=cn(t,r))}return a}function ss(t){return void 0!==t}function as(t,e=""){const n=Vt(),r=qt(),i=t+ut,o=r.firstCreatePass?_i(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return It(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Gr(r,n,s,o),Ht(o,!1)}function us(t,e,n){const r=Vt(),i=function(t,e,n,r){return Do(t,Jt(),n)?e+y(n)+r:li}(r,t,e,n);return i!==li&&io(r,le(),i),us}function cs(t,e,n,r,i,o,s){const a=Vt(),u=Lo(a,t,e,n,r,i,o,s);return u!==li&&io(a,le(),u),cs}function ls(t,e,n){const r=Vt();return Do(r,Jt(),e)&&Di(qt(),fe(),r,t,e,r[11],n,!0),ls}const hs=void 0;var fs=["en",[["a","p"],["AM","PM"],hs],[["AM","PM"],hs,hs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hs,"{1} 'at' {0}",hs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ds={};function ps(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ms(e);if(n)return n;const r=e.split("-")[0];if(n=ms(r),n)return n;if("en"===r)return fs;throw new Error(`Missing locale data for the locale "${t}".`)}function gs(t){return ps(t)[ys.PluralCase]}function ms(t){return t in ds||(ds[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),ds[t]}var ys=(()=>((ys=ys||{})[ys.LocaleId=0]="LocaleId",ys[ys.DayPeriodsFormat=1]="DayPeriodsFormat",ys[ys.DayPeriodsStandalone=2]="DayPeriodsStandalone",ys[ys.DaysFormat=3]="DaysFormat",ys[ys.DaysStandalone=4]="DaysStandalone",ys[ys.MonthsFormat=5]="MonthsFormat",ys[ys.MonthsStandalone=6]="MonthsStandalone",ys[ys.Eras=7]="Eras",ys[ys.FirstDayOfWeek=8]="FirstDayOfWeek",ys[ys.WeekendRange=9]="WeekendRange",ys[ys.DateFormat=10]="DateFormat",ys[ys.TimeFormat=11]="TimeFormat",ys[ys.DateTimeFormat=12]="DateTimeFormat",ys[ys.NumberSymbols=13]="NumberSymbols",ys[ys.NumberFormats=14]="NumberFormats",ys[ys.CurrencyCode=15]="CurrencyCode",ys[ys.CurrencySymbol=16]="CurrencySymbol",ys[ys.CurrencyName=17]="CurrencyName",ys[ys.Currencies=18]="Currencies",ys[ys.Directionality=19]="Directionality",ys[ys.PluralCase=20]="PluralCase",ys[ys.ExtraData=21]="ExtraData",ys))();const vs="en-US";let bs=vs;function ws(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(bs=t.toLowerCase().replace(/_/g,"-"))}function _s(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)_s(t[o],e,n,r,i);else{const o=qt(),s=Vt();let a=wo(t)?t:p(t.provide),u=yo(t);const c=Gt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(wo(t)||!t.multi){const r=new we(u,i,Mo),d=Ts(a,e,i?l:l+f,h);-1===d?(Fe(Pe(c,s),o,a),Ss(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=Ts(a,e,l+f,h),p=Ts(a,e,l,l+f),g=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!g){Fe(Pe(c,s),o,a);const l=function(t,e,n,r,i){const o=new we(t,n,Mo);return o.multi=[],o.index=e,o.componentProviders=0,Es(o,i,r&&!n),o}(i?Is:Cs,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Ss(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Ss(o,t,d>-1?d:p,Es(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Ss(t,e,n,r){const i=wo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Es(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Ts(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Cs(t,e,n,r){return xs(this.multi,[])}function Is(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),xs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],xs(i,o);return o}function xs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function As(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=qt();if(r.firstCreatePass){const i=gt(t);_s(n,r.data,r.blueprint,i,!0),_s(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ks{}class Os{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Ns{}function Ps(...t){}function Ds(t,e){return new Ls(Ot(t,e))}Ns.NULL=new Os;const Rs=function(){return Ds(Gt(),Vt())};let Ls=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Rs,t})();function Fs(t){return t instanceof Ls?t.nativeElement:t}class Ms{}let Us=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>js(),t})();const js=function(){const t=Vt(),e=Pt(Gt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let Vs=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class qs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Bs=new qs("12.1.1");class Gs{constructor(){}supports(t){return No(t)}create(t){return new Hs(t)}}const zs=(t,e)=>e;class Hs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||zs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Qs(n,r,i)?e:n,s=Qs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!No(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Oo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new $s(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ks),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ks),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class $s{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ks{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Zs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Qs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Js{constructor(){}supports(t){return t instanceof Map||Po(t)}create(){return new Ws}}class Ws{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Po(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ys(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ys{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Xs(){return new ta([new Gs])}let ta=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Xs()),deps:[[t,new Tn,new En]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:Xs}),t})();function ea(){return new na([new Js])}let na=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ea()),deps:[[t,new Tn,new En]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:ea}),t})();function ra(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(At(o)),ht(o))for(let t=ct;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ra(e[1],e,n,r)}const s=n.type;if(8&s)ra(t,e,n.child,r);else if(32&s){const t=Cr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Hr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Ir(e[16]);ra(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ia{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ra(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Dr(t,n),sn(e,n))}this._attachedToViewContainer=!1}Rr(this._lView[1],this._lView)}onDestroy(t){Ni(this._lView[1],this._lView,null,t)}markForCheck(){Qi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ji(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Qt(!0);try{Ji(t,e,n)}finally{Qt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Kr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class oa extends ia{constructor(t){super(t),this._view=t}detectChanges(){Wi(this._view)}checkNoChanges(){!function(t){Qt(!0);try{Wi(t)}finally{Qt(!1)}}(this._view)}get context(){return null}}const sa=function(t){return function(t,e,n){if(dt(t)&&!n){const n=Pt(t.index,e);return new ia(n,n)}return 47&t.type?new ia(e[16],e):null}(Gt(),Vt(),16==(16&t))};let aa=(()=>{class t{}return t.__NG_ELEMENT_ID__=sa,t})();const ua=[new Js],ca=new ta([new Gs]),la=new na(ua),ha=function(){return ga(Gt(),Vt())};let fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=ha,t})();const da=fa,pa=class extends da{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=wi(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Ei(e,n,t),new ia(n)}};function ga(t,e){return 4&t.type?new pa(e,t,Ds(t,e)):null}class ma{}class ya{}const va=function(){return Ta(Gt(),Vt())};let ba=(()=>{class t{}return t.__NG_ELEMENT_ID__=va,t})();const wa=ba,_a=class extends wa{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ds(this._hostTNode,this._hostLView)}get injector(){return new Ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Le(this._hostTNode,this._hostLView);if(Ie(t)){const e=Ae(t,this._hostLView),n=xe(t);return new Ze(e[1].data[n+8],e)}return new Ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Sa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ma,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new _a(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ct+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ct?(e[4]=n[i],on(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=$r(i,o),a=n[11],u=Vr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Kr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),on(Ea(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Sa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Dr(this._lContainer,e);n&&(sn(Ea(this._lContainer),e),Rr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Dr(this._lContainer,e);return n&&null!=sn(Ea(this._lContainer),e)?new ia(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Sa(t){return t[8]}function Ea(t){return t[8]||(t[8]=[])}function Ta(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=At(r);else{const n=e[11];i=n.createComment("");const r=Ot(t,e);Mr(n,Vr(n,r),i,function(t,e){return It(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=zi(r,e,i,t),Ki(e,n)}return new _a(n,t,e)}const Ca={};class Ia extends Ns{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new ka(e,this.ngModule)}}function xa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Aa=new Xe("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Sr});class ka extends ks{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(ci).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return xa(this.componentDef.inputs)}get outputs(){return xa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ca,i);return o!==Ca||r===Ca?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ms,xt),s=i.get(Vs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(It(t))return t.selectRootElement(e,n===L.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Nr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Sr,clean:Xi,playerHandler:null,flags:0},f=Oi(0,null,null,1,0,null,null,null,null,null),d=wi(null,f,h,l,null,null,o,a,s,i);let p,g;ie(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=_i(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(oo(a,u,!0),null!==t&&(_e(i,t,u),null!==a.classes&&Wr(i,t,a.classes),null!==a.styles&&Jr(i,t,a.styles)));const c=r.createRenderer(t,e),l=wi(n,ki(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Fe(Pe(a,n),s,e.type),Mi(s,a),ji(a,n.length,1)),Ki(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)_e(a,c,["ng-version",Bs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!ii(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&_e(a,c,t),e&&e.length>0&&Wr(a,c,e.join(" "))}if(g=Nt(f,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Gt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Vi(t,r,e,Si(t,e,1,null),n));const i=ze(e,t,r.directiveStart,r);mr(i,e);const o=Ot(r,e);return o&&mr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Gt();e.contentQueries(1,s,t.directiveStart)}const a=Gt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(he(a.index),Li(n[1],a,0,a.directiveStart,a.directiveEnd,e),Fi(e,s)),s}(t,this.componentDef,d,h,[Eo]),Ei(f,d,null)}finally{ce()}return new Oa(this.componentType,p,Ds(g,d),d,g)}}class Oa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new oa(r),this.componentType=t}get injector(){return new Ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Na=new Map;class Pa extends ma{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ia(this);const n=at(t),r=t[Z]||null;r&&ws(r),this._bootstrapComponents=Er(n.bootstrap),this._r3Injector=po(t,e,[{provide:ma,useValue:this},{provide:Ns,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=So.THROW_IF_NOT_FOUND,n=k.Default){return t===So||t===ma||t===so?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Da extends ya{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Na.get(i),n),Na.set(i,n));const o=Er(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Pa(this.moduleType,t)}}function Ra(t,e,n){const r=function(){const t=Ut.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=Vt();return i[r]===li?function(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function La(t){return e=>{setTimeout(t,void 0,e)}}const Fa=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=La(u),a&&(a=La(a)),c&&(c=La(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function Ma(){return this._results[Oo()]()}class Ua{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Oo(),n=Ua.prototype;n[e]||(n[e]=Ma)}get changes(){return this._changes||(this._changes=new Fa)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=nn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class ja{constructor(t){this.queryList=t,this.matches=null}clone(){return new ja(this.queryList)}setDirty(){this.queryList.setDirty()}}class Va{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Va(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Wa(t,e).matches&&this.queries[e].setDirty()}}class qa{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ba{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ba(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ga{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ga(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,za(e,i)),this.matchTNodeWithReadOption(t,e,Ge(e,t,i,!1,!1))}else n===fa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ge(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ls||r===ba||r===fa&&4&e.type)this.addMatch(e.index,-2);else{const n=Ge(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function za(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ha(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ds(t,e):4&t.type?ga(t,e):null}(e,t):-2===n?function(t,e,n){return n===Ls?Ds(e,t):n===fa?ga(e,t):n===ba?Ta(e,t):void 0}(t,e,r):ze(t,t[1],n,e)}function $a(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ha(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Za(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=$a(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ct;t<s.length;t++){const e=s[t];e[17]===e[3]&&Za(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Za(n[1],n,i,r)}}}}}return r}function Ka(t){const e=Vt(),n=qt(),r=te();ee(r+1);const i=Wa(n,r);if(t.dirty&&Dt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Za(n,e,r,[]):$a(n,e,i,r);t.reset(o,Fs),t.notifyOnChanges()}return!0}return!1}function Qa(t,e,n,r){const i=qt();if(i.firstCreatePass){const o=Gt();(function(t,e,n){null===t.queries&&(t.queries=new Ba),t.queries.track(new Ga(e,n))})(i,new qa(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Ua(4==(4&n));Ni(t,e,r,r.destroy),null===e[19]&&(e[19]=new Va),e[19].queries.push(new ja(r))}(i,Vt(),n)}function Ja(){return t=Vt(),e=te(),t[19].queries[e].queryList;var t,e}function Wa(t,e){return t.queries.getByIndex(e)}const Ya=new Xe("Application Initializer");let Xa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ps,this.reject=Ps,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(zo(e))t.push(e);else if($o(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(vn(Ya,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const tu=new Xe("AppId"),eu={provide:tu,useFactory:function(){return`${nu()}${nu()}${nu()}`},deps:[]};function nu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ru=new Xe("Platform Initializer"),iu=new Xe("Platform ID"),ou=new Xe("appBootstrapListener");let su=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const au=new Xe("LocaleId"),uu=new Xe("DefaultCurrencyCode");class cu{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const lu=function(t){return new Da(t)},hu=lu,fu=function(t){return Promise.resolve(lu(t))},du=function(t){const e=lu(t),n=Er(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new ka(n)),t},[]);return new cu(e,n)},pu=du,gu=function(t){return Promise.resolve(du(t))};let mu=(()=>{class t{constructor(){this.compileModuleSync=hu,this.compileModuleAsync=fu,this.compileModuleAndAllComponentsSync=pu,this.compileModuleAndAllComponentsAsync=gu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const yu=(()=>Promise.resolve(0))();function vu(t){"undefined"==typeof Zone?yu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class bu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fa(!1),this.onMicrotaskEmpty=new Fa(!1),this.onStable=new Fa(!1),this.onError=new Fa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Su(t),t.isCheckStableRunning=!0,_u(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Su(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Eu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Tu(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Eu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Tu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Su(t),_u(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,wu,Ps,Ps);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const wu={};function _u(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Su(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Eu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Tu(t){t._nesting--,_u(t)}class Cu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fa,this.onMicrotaskEmpty=new Fa,this.onStable=new Fa,this.onError=new Fa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Iu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bu.assertNotInAngularZone(),vu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(vn(bu))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),xu=(()=>{class t{constructor(){this._applications=new Map,Nu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Nu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class Au{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function ku(t){Nu=t}let Ou,Nu=new Au,Pu=!0,Du=!1;function Ru(){return Du=!0,Pu}function Lu(){if(Du)throw new Error("Cannot enable prod mode after platform setup.");Pu=!1}const Fu=new Xe("AllowMultipleToken");class Mu{constructor(t,e){this.name=t,this.token=e}}function Uu(t,e,n=[]){const r=`Platform: ${e}`,i=new Xe(r);return(e=[])=>{let o=ju();if(!o||o.injector.get(Fu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:uo,useValue:"platform"});!function(t){if(Ou&&!Ou.destroyed&&!Ou.injector.get(Fu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ou=t.get(Vu);const e=t.get(ru,null);e&&e.forEach(t=>t())}(So.create({providers:t,name:r}))}return function(t){const e=ju();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ju(){return Ou&&!Ou.destroyed?Ou:null}let Vu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Cu:("zone.js"===t?void 0:t)||new bu({enableLongStackTrace:Ru(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:bu,useValue:n}];return n.run(()=>{const e=So.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(_r,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Gu(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return zo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Xa);return t.runInitializers(),t.donePromise.then(()=>(ws(i.injector.get(au,vs)||vs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=qu({},e);return function(t,e,n){const r=new Da(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Bu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(vn(So))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function qu(t,e){return Array.isArray(e)?e.reduce(qu,t):Object.assign(Object.assign({},t),e)}let Bu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{bu.assertNotInAngularZone(),vu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{bu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ks?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ma),i=n.create(So.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Iu,null),a=s&&i.injector.get(xu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Gu(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Gu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ou,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(vn(bu),vn(So),vn(_r),vn(Ns),vn(Xa))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Gu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class zu{}class Hu{}const $u={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Zu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||$u}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>Ku(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Ku(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(vn(mu),vn(Hu,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Ku(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const Qu=function(t){return null},Ju=Uu(null,"core",[{provide:iu,useValue:"unknown"},{provide:Vu,deps:[So]},{provide:xu,deps:[]},{provide:su,deps:[]}]),Wu=[{provide:Bu,useClass:Bu,deps:[bu,So,_r,Ns,Xa]},{provide:Aa,deps:[bu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Xa,useClass:Xa,deps:[[new En,Ya]]},{provide:mu,useClass:mu,deps:[]},eu,{provide:ta,useFactory:function(){return ca},deps:[]},{provide:na,useFactory:function(){return la},deps:[]},{provide:au,useFactory:function(t){return ws(t=t||"undefined"!=typeof $localize&&$localize.locale||vs),t},deps:[[new Sn(au),new En,new Tn]]},{provide:uu,useValue:"USD"}];let Yu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(vn(Bu))},t.\u0275mod=et({type:t}),t.\u0275inj=_({providers:Wu}),t})()},57:(t,e,n)=>{"use strict";n.d(e,{hO:()=>I,xv:()=>b,Dh:()=>v,HU:()=>d,GT:()=>y,sI:()=>T,on:()=>_,ss:()=>p,pX:()=>m,yq:()=>S});var r=n(7771),i=n(3637),o=n(3342),s=n(3101),a=n(6136),u=n(7716),c=n(2329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),b=new u.OlP("angularfire2.app.nameOrConfig"),w=new u.GfV("6.1.5");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const S=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const C={provide:class{},useFactory:_,deps:[v,u.R0b,[new u.FiY,b]]};let I=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",w.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[C]}),t})()},9759:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,o=n(4762),s=n(4685),a=n(6034),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.28",void 0),t.registerVersion("fire-js","")}(w);const _=w},6034:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(4762),i=n(4685),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>f,Am:()=>d});var o=[],s=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={})),s))(),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},4685:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>b,r3:()=>S,Sg:()=>u,ne:()=>E,p$:()=>o,ZB:()=>s,m9:()=>I,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>g,w1:()=>m,uI:()=>l,UG:()=>h,b$:()=>p,Mn:()=>y});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function y(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,b.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new v(i,a,r);return u},t}();function w(t,e){return t.replace(_,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var _=/\{\$([^}]+)}/g;function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E(t,e){var n=new T(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var T=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function C(){}function I(t){return t&&t._delegate?t._delegate:t}},2329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(9759),i="8.7.1";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},7574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),o=n(6490),s=n(6554),a=n(4487),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(2494),i=n(4449);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),o=n(5319),s=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),o=n(5319),s=n(9181),a=n(2494),u=n(4449);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),o=n(9105);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,o.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof s?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new s(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),o=n(7444);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),o=n(5319),s=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(7574);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(7574),i=n(7444),o=n(5319),s=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(7574),i=n(5015),o=n(4087);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(7574),i=n(4869),o=n(3282),s=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(4869),i=n(6693),o=n(4087);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},205:(t,e,n)=>{"use strict";n.d(e,{_:()=>i});var r=n(7574);function i(t,e){return new r.y(e?n=>e.schedule(o,0,{error:t,subscriber:n}):e=>e.error(t))}function o({error:t,subscriber:e}){e.error(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(9773),i=n(4487);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(8002),i=n(4402),o=n(5345);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),o=n(5917),s=n(205);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return(0,s._)(this.error);case"C":return(0,i.c)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},8819:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2441),i=n(1307),o=n(9765);function s(){return new o.xQ}function a(){return t=>{return(0,i.x)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},3101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(7574);let i=1;const o=Promise.resolve(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var f=n(9796);class d extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,f.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new d(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(d.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new d(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(7393);function i(){}var o=n(9105);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(7574),i=n(5319);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i,P:()=>o});var r=n(6465);const i=new(n(6102).v)(r.o),o=i},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>s,N:()=>o});var r=n(6465),i=n(6102);const o=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),s=o},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),o=n(377),s=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},8941:(t,e,n)=>{"use strict";var r=n(7716);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l((0,r.LFG)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new b((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:S,token:t,providedIn:"root"}),t})();function S(){return new _((0,r.LFG)(m),(0,r.LFG)(a))}function E(t){return t.replace(/\/index.html$/,"")}var T=(()=>((T=T||{})[T.Zero=0]="Zero",T[T.One=1]="One",T[T.Two=2]="Two",T[T.Few=3]="Few",T[T.Many=4]="Many",T[T.Other=5]="Other",T))();const C=r.kL8;class I{}let x=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(C(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class A{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Zd){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new A(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new O(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new O(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class O{constructor(t,e){this.record=t,this.view=e}}let N=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new P,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){D("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){D("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class P{constructor(){this.$implicit=null,this.ngIf=null}}function D(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let R=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:I,useClass:x}]}),t})(),L=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new F((0,r.LFG)(s),window)}),t})();class F{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=M(this.window.history)||M(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(Zd){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Zd){return!1}}}function M(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class U extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new U,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(V=V||document.querySelector("base"),V?V.getAttribute("href"):null);return null==e?null:function(t){j=j||document.createElement("a"),j.setAttribute("href",t);const e=j.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){V=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let j,V=null;const q=new r.OlP("TRANSITION_ID"),B=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[q,s,r.zs3],multi:!0}];class G{static init(){(0,r.VLi)(new G)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let z=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const H=new r.OlP("EventManagerPlugins");let $=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(H),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class Z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let K=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Q=(()=>{class t extends K{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(J),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(J))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function J(t){o().remove(t)}const W={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Y=/%COMP%/g;function X(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?X(t,i,n):(i=i.replace(Y,t),n.push(i))}return n}function tt(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let et=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new nt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new rt(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new it(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=X(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG($),r.LFG(Q),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class nt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(W[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=W[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=W[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,tt(n)):this.eventManager.addEventListener(t,e,tt(n))}}class rt extends nt{constructor(t,e,n,r){super(t),this.component=n;const i=X(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(Y,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(Y,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class it extends nt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=X(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ot=(()=>{class t extends Z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const st=["alt","control","meta","shift"],at={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ut={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ct={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let lt=(()=>{class t extends Z{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(st.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ut.hasOwnProperty(e)&&(e=ut[e]))}return at[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),st.forEach(r=>{r!=n&&(0,ct[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ht=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:function(){return(0,r.LFG)(dt)},token:t,providedIn:"root"}),t})();function ft(t){return new dt(t.get(s))}let dt=(()=>{class t extends ht{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case r.q3G.NONE:return e;case r.q3G.HTML:return(0,r.qzn)(e,"HTML")?(0,r.z3N)(e):(0,r.EiD)(this._doc,String(e)).toString();case r.q3G.STYLE:return(0,r.qzn)(e,"Style")?(0,r.z3N)(e):e;case r.q3G.SCRIPT:if((0,r.qzn)(e,"Script"))return(0,r.z3N)(e);throw new Error("unsafe value used in a script context");case r.q3G.URL:return(0,r.yhl)(e),(0,r.qzn)(e,"URL")?(0,r.z3N)(e):(0,r.mCW)(String(e));case r.q3G.RESOURCE_URL:if((0,r.qzn)(e,"ResourceURL"))return(0,r.z3N)(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,r.JVY)(t)}bypassSecurityTrustStyle(t){return(0,r.L6k)(t)}bypassSecurityTrustScript(t){return(0,r.eBb)(t)}bypassSecurityTrustUrl(t){return(0,r.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,r.pB0)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:function(){return ft((0,r.LFG)(r.gxx))},token:t,providedIn:"root"}),t})();const pt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){U.makeCurrent(),G.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),gt=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:H,useClass:ot,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:H,useClass:lt,multi:!0,deps:[s]},[],{provide:et,useClass:et,deps:[$,Q,r.AFp]},{provide:r.FYo,useExisting:et},{provide:K,useExisting:Q},{provide:Q,useClass:Q,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:$,useClass:$,deps:[H,r.R0b]},{provide:class{},useClass:z,deps:[]},[]];let mt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:q,useExisting:r.AFp},B]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:gt,imports:[R,r.hGG]}),t})();"undefined"!=typeof window&&window;const yt={apiKey:"AIzaSyD7uvl2RmKA3ylBBKMZohOi9JOKlfr6Vag",authDomain:"pos-mock-database.firebaseapp.com",databaseURL:"https://pos-mock-database-default-rtdb.firebaseio.com",projectId:"pos-mock-database",storageBucket:"pos-mock-database.appspot.com",messagingSenderId:"185556480229",appId:"1:185556480229:web:32245eef5bc555f496e40c",measurementId:"G-EGDKV6XMCS"};var vt=n(57),bt=n(3637),wt=n(7574),_t=n(4402),St=n(5917),Et=n(3282);function Tt(...t){return(0,Et.J)(1)((0,St.of)(...t))}var Ct=n(4869);function It(...t){const e=t[t.length-1];return(0,Ct.K)(e)?(t.pop(),n=>Tt(t,n,e)):e=>Tt(t,e)}var xt=n(7393);function At(){return t=>t.lift(new kt)}class kt{call(t,e){return e.subscribe(new Ot(t))}}class Ot extends xt.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Nt=n(8002);function Pt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Dt(t,e,n))}}class Dt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Rt(t,this.accumulator,this.seed,this.hasSeed))}}class Rt extends xt.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class Lt{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ft(t,this.compare,this.keySelector))}}class Ft extends xt.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function Mt(t,e){return function(n){return n.lift(new Ut(t,e))}}class Ut{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new jt(t,this.predicate,this.thisArg))}}class jt extends xt.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var Vt=n(6136),qt=n(2329),Bt=n(9759),Gt=n(4762),zt=n(4685),Ht=n(300),$t=function(t,e){return($t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Zt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Kt,Qt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jt=Jt||{},Wt=Qt||self;function Yt(){}function Xt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function te(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ee="closure_uid_"+(1e9*Math.random()>>>0),ne=0;function re(t,e,n){return t.call.apply(t.bind,arguments)}function ie(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function oe(t,e,n){return(oe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?re:ie).apply(null,arguments)}function se(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ae(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ue(){this.s=this.s,this.o=this.o}var ce={};ue.prototype.s=!1,ue.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,ee)&&t[ee]||(t[ee]=++ne)}(this);delete ce[t]}},ue.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var le=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},he=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function fe(t){return Array.prototype.concat.apply([],arguments)}function de(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function pe(t){return/^[\s\xa0]*$/.test(t)}var ge,me=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ye(t,e){return-1!=t.indexOf(e)}function ve(t,e){return t<e?-1:t>e?1:0}t:{var be=Wt.navigator;if(be){var we=be.userAgent;if(we){ge=we;break t}}ge=""}function _e(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Se(t){var e={};for(var n in t)e[n]=t[n];return e}var Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ee.length;o++)n=Ee[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ce(t){return Ce[" "](t),t}Ce[" "]=Yt;var Ie,xe,Ae=ye(ge,"Opera"),ke=ye(ge,"Trident")||ye(ge,"MSIE"),Oe=ye(ge,"Edge"),Ne=Oe||ke,Pe=ye(ge,"Gecko")&&!(ye(ge.toLowerCase(),"webkit")&&!ye(ge,"Edge"))&&!(ye(ge,"Trident")||ye(ge,"MSIE"))&&!ye(ge,"Edge"),De=ye(ge.toLowerCase(),"webkit")&&!ye(ge,"Edge");function Re(){var t=Wt.document;return t?t.documentMode:void 0}t:{var Le="",Fe=(xe=ge,Pe?/rv:([^\);]+)(\)|;)/.exec(xe):Oe?/Edge\/([\d\.]+)/.exec(xe):ke?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(xe):De?/WebKit\/(\S+)/.exec(xe):Ae?/(?:Version)[ \/]?(\S+)/.exec(xe):void 0);if(Fe&&(Le=Fe?Fe[1]:""),ke){var Me=Re();if(null!=Me&&Me>parseFloat(Le)){Ie=String(Me);break t}}Ie=Le}var Ue={};var je=Wt.document&&ke&&(Re()||parseInt(Ie,10))||void 0,Ve=function(){if(!Wt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Wt.addEventListener("test",Yt,e),Wt.removeEventListener("test",Yt,e)}catch(n){}return t}();function qe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Pe){t:{try{Ce(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ge[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Be.Z.h.call(this)}}qe.prototype.h=function(){this.defaultPrevented=!0},ae(Be,qe);var Ge={2:"touch",3:"pen",4:"mouse"};Be.prototype.h=function(){Be.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),He=0;function $e(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++He,this.ca=this.fa=!1}function Ze(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ke(t){this.src=t,this.g={},this.h=0}function Qe(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=le(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ze(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Je(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Ke.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Je(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new $e(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var We="closure_lm_"+(1e6*Math.random()|0),Ye={};function Xe(t,e,n,r,i){if(r&&r.once)return en(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Xe(t,e[o],n,r,i);return null}return n=cn(n),t&&t[ze]?t.N(e,n,te(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=te(i)?!!i.capture:!!i,a=an(t);if(a||(t[We]=a=new Ke(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=sn;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ve||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function en(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);return null}return n=cn(n),t&&t[ze]?t.O(e,n,te(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=te(r)?!!r.capture:!!r,n=cn(n),t&&t[ze]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=Je(o=t.g[e],n,r,i))&&(Ze(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=an(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Je(e,n,r,i)),(n=-1<t?e[t]:null)&&rn(n))}function rn(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[ze])Qe(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=an(e))?(Qe(n,t),0==n.h&&(n.src=null,e[We]=null)):Ze(t)}}}function on(t){return t in Ye?Ye[t]:Ye[t]="on"+t}function sn(t,e){if(t.ca)t=!0;else{e=new Be(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&rn(t),t=n.call(r,e)}return t}function an(t){return(t=t[We])instanceof Ke?t:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(t){return"function"==typeof t?t:(t[un]||(t[un]=function(e){return t.handleEvent(e)}),t[un])}function ln(){ue.call(this),this.i=new Ke(this),this.P=this,this.I=null}function hn(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new qe(e,t);else if(e instanceof qe)e.target=e.target||t;else{var i=e;Te(e=new qe(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=fn(s,r,!0,e)&&i}if(i=fn(s=e.g=t,r,!0,e)&&i,i=fn(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=fn(s=e.g=n[o],r,!1,e)&&i}function fn(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Qe(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ae(ln,ue),ln.prototype[ze]=!0,ln.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},ln.prototype.M=function(){if(ln.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Ze(n[r]);delete e.g[t],e.h--}}this.I=null},ln.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},ln.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var dn=Wt.JSON.stringify;function pn(){var t=Sn,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var gn,mn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=yn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),yn=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())(function(){return new vn},function(t){return t.reset()}),vn=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function bn(t){Wt.setTimeout(function(){throw t},0)}function wn(t,e){gn||function(){var t=Wt.Promise.resolve(void 0);gn=function(){t.then(En)}}(),_n||(gn(),_n=!0),Sn.add(t,e)}var _n=!1,Sn=new mn;function En(){for(var t;t=pn();){try{t.h.call(t.g)}catch(n){bn(n)}var e=yn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}_n=!1}function Tn(t,e){ln.call(this),this.h=t||1,this.g=e||Wt,this.j=oe(this.kb,this),this.l=Date.now()}function Cn(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function In(t,e,n){if("function"==typeof t)n&&(t=oe(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=oe(t.handleEvent,t)}return 2147483647<Number(e)?-1:Wt.setTimeout(t,e||0)}function xn(t){t.g=In(function(){t.g=null,t.i&&(t.i=!1,xn(t))},t.j);var e=t.h;t.h=null,t.m.apply(null,e)}ae(Tn,ln),(Kt=Tn.prototype).da=!1,Kt.S=null,Kt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),hn(this,"tick"),this.da&&(Cn(this),this.start()))}},Kt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Kt.M=function(){Tn.Z.M.call(this),Cn(this),delete this.g};var An=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}$t(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:xn(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Wt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(ue);function kn(t){ue.call(this),this.h=t,this.g={}}ae(kn,ue);var On=[];function Nn(t,e,n,r){Array.isArray(n)||(n&&(On[0]=n.toString()),n=On);for(var i=0;i<n.length;i++){var o=Xe(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Pn(t){_e(t.g,function(t,e){this.g.hasOwnProperty(e)&&rn(t)},t),t.g={}}function Dn(){this.g=!0}function Rn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return dn(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}kn.prototype.M=function(){kn.Z.M.call(this),Pn(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dn.prototype.Aa=function(){this.g=!1},Dn.prototype.info=function(){};var Ln={},Fn=null;function Mn(){return Fn=Fn||new ln}function Un(t){qe.call(this,Ln.Ma,t)}function jn(t){var e=Mn();hn(e,new Un(e,t))}function Vn(t,e){qe.call(this,Ln.STAT_EVENT,t),this.stat=e}function qn(t){var e=Mn();hn(e,new Vn(e,t))}function Bn(t,e){qe.call(this,Ln.Na,t),this.size=e}function Gn(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Wt.setTimeout(function(){t()},e)}Ln.Ma="serverreachability",ae(Un,qe),Ln.STAT_EVENT="statevent",ae(Vn,qe),Ln.Na="timingevent",ae(Bn,qe);var zn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Hn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function $n(){}function Zn(){}$n.prototype.h=null;var Kn,Qn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Jn(){qe.call(this,"d")}function Wn(){qe.call(this,"c")}function Yn(){}function Xn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new kn(this),this.P=er,this.W=new Tn(t=Ne?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new tr}function tr(){this.i=null,this.g="",this.h=!1}ae(Jn,qe),ae(Wn,qe),ae(Yn,$n),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},Kn=new Yn;var er=45e3,nr={},rr={};function ir(t,e,n){t.K=1,t.v=xr(_r(e)),t.s=n,t.U=!0,or(t,null)}function or(t,e){t.F=Date.now(),cr(t),t.A=_r(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Vr(n.h,"t",r),t.C=0,n=t.l.H,t.h=new tr,t.g=qi(t.l,n?e:null,!t.s),0<t.O&&(t.L=new An(oe(t.Ia,t,t.g),t.O)),Nn(t.V,t.g,"readystatechange",t.gb),e=t.H?Se(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),jn(1),function(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.j,t.u,t.A,t.m,t.X,t.s)}function sr(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function ar(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=ur(t,n))==rr){4==e&&(t.o=4,qn(14),i=!1),Rn(t.j,t.m,null,"[Incomplete Response]");break}if(r==nr){t.o=4,qn(15),Rn(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Rn(t.j,t.m,r,null),pr(t,r)}sr(t)&&r!=rr&&r!=nr&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,qn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Di(e),e.L=!0,qn(11))):(Rn(t.j,t.m,n,"[Invalid Chunked Response]"),dr(t),fr(t))}function ur(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?rr:(n=Number(e.substring(n,r)),isNaN(n)?nr:(r+=1)+n>e.length?rr:(e=e.substr(r,n),t.C=r+n,e))}function cr(t){t.Y=Date.now()+t.P,lr(t,t.P)}function lr(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Gn(oe(t.eb,t),e)}function hr(t){t.B&&(Wt.clearTimeout(t.B),t.B=null)}function fr(t){0==t.l.G||t.I||Fi(t.l,t)}function dr(t){hr(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Cn(t.W),Pn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function pr(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Zr(n.i,t)))if(n.I=t.N,!t.J&&Zr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Li(n),Ti(n)}Pi(n),qn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Gn(oe(n.ab,n),6e3));if(1>=$r(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Ui(n,11)}else if((t.J||n.g==t)&&Li(n),!pe(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ye(l,"spdy")||ye(l,"quic")||ye(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Kr(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ir(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=Vi(r,r.H?r.la:null,r.W),d.J){Qr(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(hr(p),cr(p)),r.g=d}else Ni(r);0<n.l.length&&xi(n)}else"stop"!=o[0]&&"close"!=o[0]||Ui(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Ui(n,7):Ei(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}jn(4)}catch(o){}}function gr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Xt(t)||"string"==typeof t)he(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Xt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Xt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function mr(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mr)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function yr(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];vr(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)vr(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function vr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Kt=Xn.prototype).setTimeout=function(t){this.P=t},Kt.gb=function(t){t=t.target;var e=this.L;e&&3==vi(t)?e.l():this.Ia(t)},Kt.Ia=function(t){try{if(t==this.g)t:{var e=vi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||Ne||this.g&&(this.h.h||this.g.ga()||bi(this.g)))){this.I||4!=e||7==n||jn(8==n||0>=r?3:2),hr(this);var i=this.g.ba();this.N=i;e:if(sr(this)){var o=bi(this.g);t="";var s=o.length,a=4==vi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){dr(this),fr(this);var u="";break e}this.h.i=new Wt.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pe(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,qn(12),dr(this),fr(this);break t}Rn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,pr(this,i)}this.U?(ar(this,e,u),Ne&&this.i&&3==e&&(Nn(this.V,this.W,"tick",this.fb),this.W.start())):(Rn(this.j,this.m,u,null),pr(this,u)),4==e&&dr(this),this.i&&!this.I&&(4==e?Fi(this.l,this):(this.i=!1,cr(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,qn(12)):(this.o=0,qn(13)),dr(this),fr(this)}}}catch(e){}},Kt.fb=function(){if(this.g){var t=vi(this.g),e=this.g.ga();this.C<e.length&&(hr(this),ar(this,t,e),this.i&&4!=t&&cr(this))}},Kt.cancel=function(){this.I=!0,dr(this)},Kt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(jn(3),qn(17)),dr(this),this.o=2,fr(this)):lr(this,this.Y-t)},(Kt=mr.prototype).R=function(){yr(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Kt.T=function(){return yr(this),this.g.concat()},Kt.get=function(t,e){return vr(this.h,t)?this.h[t]:e},Kt.set=function(t,e){vr(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Kt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var br=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof wr){this.g=void 0!==e?e:t.g,Sr(this,t.j),this.s=t.s,Er(this,t.i),Tr(this,t.m),this.l=t.l,e=t.h;var n=new Fr;n.i=e.i,e.g&&(n.g=new mr(e.g),n.h=e.h),Cr(this,n),this.o=t.o}else t&&(n=String(t).match(br))?(this.g=!!e,Sr(this,n[1]||"",!0),this.s=Ar(n[2]||""),Er(this,n[3]||"",!0),Tr(this,n[4]),this.l=Ar(n[5]||"",!0),Cr(this,n[6]||"",!0),this.o=Ar(n[7]||"")):(this.g=!!e,this.h=new Fr(null,this.g))}function _r(t){return new wr(t)}function Sr(t,e,n){t.j=n?Ar(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Er(t,e,n){t.i=n?Ar(e,!0):e}function Tr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Cr(t,e,n){e instanceof Fr?(t.h=e,function(t,e){e&&!t.j&&(Mr(t),t.i=null,t.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Ur(this,e),Vr(this,n,t))},t)),t.j=e}(t.h,t.g)):(n||(e=kr(e,Rr)),t.h=new Fr(e,t.g))}function Ir(t,e,n){t.h.set(e,n)}function xr(t){return Ir(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ar(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Or),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Or(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}wr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(kr(e,Nr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(kr(e,Nr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(kr(n,"/"==n.charAt(0)?Dr:Pr,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",kr(n,Lr)),t.join("")};var Nr=/[#\/\?@]/g,Pr=/[#\?:]/g,Dr=/[#\?]/g,Rr=/[#\?@]/g,Lr=/#/g;function Fr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Mr(t){t.g||(t.g=new mr,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Ur(t,e){Mr(t),e=qr(t,e),vr(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,vr((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&yr(t)))}function jr(t,e){return Mr(t),e=qr(t,e),vr(t.g.h,e)}function Vr(t,e,n){Ur(t,e),0<n.length&&(t.i=null,t.g.set(qr(t,e),de(n)),t.h+=n.length)}function qr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Kt=Fr.prototype).add=function(t,e){Mr(this),this.i=null,t=qr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Kt.forEach=function(t,e){Mr(this),this.g.forEach(function(n,r){he(n,function(n){t.call(e,n,r,this)},this)},this)},Kt.T=function(){Mr(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Kt.R=function(t){Mr(this);var e=[];if("string"==typeof t)jr(this,t)&&(e=fe(e,this.g.get(qr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=fe(e,t[n])}return e},Kt.set=function(t,e){return Mr(this),this.i=null,jr(this,t=qr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Kt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var Br=function(t,e){this.h=t,this.g=e};function Gr(t){this.l=t||zr,t=Wt.PerformanceNavigationTiming?0<(t=Wt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Wt.g&&Wt.g.Ea&&Wt.g.Ea()&&Wt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zr=10;function Hr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function $r(t){return t.h?1:t.g?t.g.size:0}function Zr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Kr(t,e){t.g?t.g.add(e):t.h=e}function Qr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Jr(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Zt(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return de(t.i)}function Wr(){}function Yr(){this.g=new Wr}function Xr(t,e,n){var r=n||"";try{gr(t,function(t,n){var i=t;te(t)&&(i=dn(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(ug){throw e.push(r+"type="+encodeURIComponent("_badmap")),ug}}function ti(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function ei(t){this.l=t.$b||null,this.j=t.ib||!1}function ni(t,e){ln.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=ri,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gr.prototype.cancel=function(){var t,e;if(this.i=Jr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Zt(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Wr.prototype.stringify=function(t){return Wt.JSON.stringify(t,void 0)},Wr.prototype.parse=function(t){return Wt.JSON.parse(t,void 0)},ae(ei,$n),ei.prototype.g=function(){return new ni(this.l,this.j)},ei.prototype.i=function(t){return function(){return t}}({}),ae(ni,ln);var ri=0;function ii(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function oi(t){t.readyState=4,t.l=null,t.j=null,t.A=null,si(t)}function si(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Kt=ni.prototype).open=function(t,e){if(this.readyState!=ri)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,si(this)},Kt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Wt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,oi(this)),this.readyState=ri},Kt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Wt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ii(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Kt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?oi(this):si(this),3==this.readyState&&ii(this)}},Kt.Ua=function(t){this.g&&(this.response=this.responseText=t,oi(this))},Kt.Ta=function(t){this.g&&(this.response=t,oi(this))},Kt.ha=function(){this.g&&oi(this)},Kt.setRequestHeader=function(t,e){this.v.append(t,e)},Kt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Kt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ni.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var ai=Wt.JSON.parse;function ui(t){ln.call(this),this.headers=new mr,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ci,this.K=this.L=!1}ae(ui,ln);var ci="",li=/^https?$/i,hi=["POST","PUT"];function fi(t){return"content-type"==t.toLowerCase()}function di(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,pi(t),mi(t)}function pi(t){t.D||(t.D=!0,hn(t,"complete"),hn(t,"error"))}function gi(t){if(t.h&&void 0!==Jt&&(!t.C[1]||4!=vi(t)||2!=t.ba()))if(t.v&&4==vi(t))In(t.Fa,0,t);else if(hn(t,"readystatechange"),4==vi(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(br)[1]||null;if(!o&&Wt.self&&Wt.self.location){var s=Wt.self.location.protocol;o=s.substr(0,s.length-1)}i=!li.test(o?o.toLowerCase():"")}e=i}if(e)hn(t,"complete"),hn(t,"success");else{t.m=6;try{var a=2<vi(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",pi(t)}}finally{mi(t)}}}function mi(t,e){if(t.g){yi(t);var n=t.g,r=t.C[0]?Yt:null;t.g=null,t.C=null,e||hn(t,"ready");try{n.onreadystatechange=r}catch(ug){}}}function yi(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Wt.clearTimeout(t.A),t.A=null)}function vi(t){return t.g?t.g.readyState:0}function bi(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case ci:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function wi(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return _e(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ir(t,e,n))}function _i(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Si(t){this.za=0,this.l=[],this.h=new Dn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_i("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_i("baseRetryDelayMs",5e3,t),this.$a=_i("retryDelaySeedMs",1e4,t),this.Ya=_i("forwardChannelMaxRetries",2,t),this.ra=_i("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Gr(t&&t.concurrentRequestLimit),this.Ca=new Yr,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Ei(t){if(Ci(t),3==t.G){var e=t.V++,n=_r(t.F);Ir(n,"SID",t.J),Ir(n,"RID",e),Ir(n,"TYPE","terminate"),ki(t,n),(e=new Xn(t,t.h,e,void 0)).K=2,e.v=xr(_r(n)),n=!1,Wt.navigator&&Wt.navigator.sendBeacon&&(n=Wt.navigator.sendBeacon(e.v.toString(),"")),!n&&Wt.Image&&((new Image).src=e.v,n=!0),n||(e.g=qi(e.l,null),e.g.ea(e.v)),e.F=Date.now(),cr(e)}ji(t)}function Ti(t){t.g&&(Di(t),t.g.cancel(),t.g=null)}function Ci(t){Ti(t),t.u&&(Wt.clearTimeout(t.u),t.u=null),Li(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Wt.clearTimeout(t.m),t.m=null)}function Ii(t,e){t.l.push(new Br(t.Za++,e)),3==t.G&&xi(t)}function xi(t){Hr(t.i)||t.m||(t.m=!0,wn(t.Ha,t),t.C=0)}function Ai(t,e){var n;n=e?e.m:t.V++;var r=_r(t.F);Ir(r,"SID",t.J),Ir(r,"RID",n),Ir(r,"AID",t.U),ki(t,r),t.o&&t.s&&wi(r,t.o,t.s),n=new Xn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Oi(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Kr(t.i,n),ir(n,r,e)}function ki(t,e){t.j&&gr({},function(t,n){Ir(e,n,t)})}function Oi(t,e,n){n=Math.min(t.l.length,n);var r=t.j?oe(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].h)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Xr(l,s,"req"+c+"_")}catch(So){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Ni(t){t.g||t.u||(t.Y=1,wn(t.Ga,t),t.A=0)}function Pi(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=Gn(oe(t.Ga,t),Mi(t,t.A)),t.A++,0))}function Di(t){null!=t.B&&(Wt.clearTimeout(t.B),t.B=null)}function Ri(t){t.g=new Xn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=_r(t.oa);Ir(e,"RID","rpc"),Ir(e,"SID",t.J),Ir(e,"CI",t.N?"0":"1"),Ir(e,"AID",t.U),ki(t,e),Ir(e,"TYPE","xmlhttp"),t.o&&t.s&&wi(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=xr(_r(e)),n.s=null,n.U=!0,or(n,t)}function Li(t){null!=t.v&&(Wt.clearTimeout(t.v),t.v=null)}function Fi(t,e){var n=null;if(t.g==e){Li(t),Di(t),t.g=null;var r=2}else{if(!Zr(t.i,e))return;n=e.D,Qr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;hn(r=Mn(),new Bn(r,n,e,i)),xi(t)}else Ni(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!($r(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Gn(oe(t.Ha,t,e),Mi(t,t.C)),t.C++,0)))}(t,e)||2==r&&Pi(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ui(t,5);break;case 4:Ui(t,10);break;case 3:Ui(t,6);break;default:Ui(t,2)}}function Mi(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ui(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=oe(t.jb,t);n||(n=new wr("//www.google.com/images/cleardot.gif"),Wt.location&&"http"==Wt.location.protocol||Sr(n,"https"),xr(n)),function(t,e){var n=new Dn;if(Wt.Image){var r=new Image;r.onload=se(ti,n,r,"TestLoadImage: loaded",!0,e),r.onerror=se(ti,n,r,"TestLoadImage: error",!1,e),r.onabort=se(ti,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=se(ti,n,r,"TestLoadImage: timeout",!1,e),Wt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else qn(2);t.G=0,t.j&&t.j.va(e),ji(t),Ci(t)}function ji(t){t.G=0,t.I=-1,t.j&&(0==Jr(t.i).length&&0==t.l.length||(t.i.i.length=0,de(t.l),t.l.length=0),t.j.ua())}function Vi(t,e,n){var r=function(t){return t instanceof wr?_r(t):new wr(t,void 0)}(n);if(""!=r.i)e&&Er(r,e+"."+r.i),Tr(r,r.m);else{var i=Wt.location;r=function(t,e,n,r){var i=new wr(null,void 0);return t&&Sr(i,t),e&&Er(i,e),n&&Tr(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&_e(t.aa,function(t,e){Ir(r,e,t)}),n=t.sa,(e=t.D)&&n&&Ir(r,e,n),Ir(r,"VER",t.ma),ki(t,r),r}function qi(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ui(n&&t.Ba&&!t.qa?new ei({ib:!0}):t.qa)).L=t.H,e}function Bi(){}function Gi(){if(ke&&!(10<=Number(je)))throw Error("Environmental error: no available transport.")}function zi(t,e){ln.call(this),this.g=new Si(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!pe(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pe(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Zi(this)}function Hi(t){Jn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function $i(){Wn.call(this),this.status=1}function Zi(t){this.g=t}(Kt=ui.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Kn.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:Kn),this.g.onreadystatechange=oe(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void di(this,o)}t=n||"";var i=new mr(this.headers);r&&gr(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=fi,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Wt.FormData&&t instanceof Wt.FormData,!(0<=le(hi,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yi(this),0<this.B&&((this.K=function(t){return ke&&function(){return t=Ue,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=me(String(Ie)).split("."),n=me("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ve(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ve(0==o[2].length,0==s[2].length)||ve(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oe(this.pa,this)):this.A=In(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){di(this,o)}},Kt.pa=function(){void 0!==Jt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,hn(this,"timeout"),this.abort(8))},Kt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,hn(this,"complete"),hn(this,"abort"),mi(this))},Kt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mi(this,!0)),ui.Z.M.call(this)},Kt.Fa=function(){this.s||(this.F||this.v||this.l?gi(this):this.cb())},Kt.cb=function(){gi(this)},Kt.ba=function(){try{return 2<vi(this)?this.g.status:-1}catch(xe){return-1}},Kt.ga=function(){try{return this.g?this.g.responseText:""}catch(xe){return""}},Kt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ai(e)}},Kt.Da=function(){return this.m},Kt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Kt=Si.prototype).ma=8,Kt.G=1,Kt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Kt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Xn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Te(n=Se(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Oi(this,e,r),Ir(i=_r(this.F),"RID",t),Ir(i,"CVER",22),this.D&&Ir(i,"X-HTTP-Session-Id",this.D),ki(this,i),this.o&&n&&wi(i,this.o,n),Kr(this.i,e),this.Ra&&Ir(i,"TYPE","init"),this.ja?(Ir(i,"$req",r),Ir(i,"SID","null"),e.$=!0,ir(e,i,null)):ir(e,i,r),this.G=2}}else 3==this.G&&(t?Ai(this,t):0==this.l.length||Hr(this.i)||Ai(this))},Kt.Ga=function(){if(this.u=null,Ri(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Gn(oe(this.bb,this),t)}},Kt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,qn(10),Ti(this),Ri(this))},Kt.ab=function(){null!=this.v&&(this.v=null,Ti(this),Pi(this),qn(19))},Kt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),qn(2)):(this.h.info("Failed to ping google.com"),qn(1))},(Kt=Bi.prototype).xa=function(){},Kt.wa=function(){},Kt.va=function(){},Kt.ua=function(){},Kt.Oa=function(){},Gi.prototype.g=function(t,e){return new zi(t,e)},ae(zi,ln),zi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),wn(oe(t.hb,t,e))),qn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Vi(t,null,t.W),xi(t)},zi.prototype.close=function(){Ei(this.g)},zi.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Ii(this.g,e)}else this.v?((e={}).__data__=dn(t),Ii(this.g,e)):Ii(this.g,t)},zi.prototype.M=function(){this.g.j=null,delete this.j,Ei(this.g),delete this.g,zi.Z.M.call(this)},ae(Hi,Jn),ae($i,Wn),ae(Zi,Bi),Zi.prototype.xa=function(){hn(this.g,"a")},Zi.prototype.wa=function(t){hn(this.g,new Hi(t))},Zi.prototype.va=function(t){hn(this.g,new $i(t))},Zi.prototype.ua=function(){hn(this.g,"b")},Gi.prototype.createWebChannel=Gi.prototype.g,zi.prototype.send=zi.prototype.u,zi.prototype.open=zi.prototype.m,zi.prototype.close=zi.prototype.close,zn.NO_ERROR=0,zn.TIMEOUT=8,zn.HTTP_ERROR=6,Hn.COMPLETE="complete",Zn.EventType=Qn,Qn.OPEN="a",Qn.CLOSE="b",Qn.ERROR="c",Qn.MESSAGE="d",ln.prototype.listen=ln.prototype.N,ui.prototype.listenOnce=ui.prototype.O,ui.prototype.getLastError=ui.prototype.La,ui.prototype.getLastErrorCode=ui.prototype.Da,ui.prototype.getStatus=ui.prototype.ba,ui.prototype.getResponseJson=ui.prototype.Qa,ui.prototype.getResponseText=ui.prototype.ga,ui.prototype.send=ui.prototype.ea;var Ki=zn,Qi=Hn,Ji=Ln,Wi=ei,Yi=Zn,Xi=ui,to=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();to.o=-1;var eo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},no=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Gt.ZT)(e,t),e}(Error),ro=new Ht.Yd("@firebase/firestore");function io(){return ro.logLevel}function oo(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ro.logLevel<=Ht.in.DEBUG){var r=e.map(uo);ro.debug.apply(ro,(0,Gt.ev)(["Firestore (8.7.0): "+t],r))}}function so(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ro.logLevel<=Ht.in.ERROR){var r=e.map(uo);ro.error.apply(ro,(0,Gt.ev)(["Firestore (8.7.0): "+t],r))}}function ao(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ro.logLevel<=Ht.in.WARN){var r=e.map(uo);ro.warn.apply(ro,(0,Gt.ev)(["Firestore (8.7.0): "+t],r))}}function uo(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(ug){return t}}function co(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw so(e),new Error(e)}function lo(t,e){t||co()}function ho(t,e){return t}function fo(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var po=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=fo(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function go(t,e){return t<e?-1:t>e?1:0}function mo(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function yo(t){return t+"\0"}var vo=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new no(eo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new no(eo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new no(eo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new no(eo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?go(this.nanoseconds,t.nanoseconds):go(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),bo=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new vo(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function wo(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _o(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function So(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Eo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&co(),void 0===n?n=t.length-e:n>t.length-e&&co(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),To=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new no(eo.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Eo),Co=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Co.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new no(eo.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new no(eo.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new no(eo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new no(eo.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Eo),xo=function(){function t(t){this.fields=t,t.sort(Io.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return mo(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Ao=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return go(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Ao.EMPTY_BYTE_STRING=new Ao("");var ko=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oo(t){if(lo(!!t),"string"==typeof t){var e=0,n=ko.exec(t);if(lo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:No(t.seconds),nanos:No(t.nanos)}}function No(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Po(t){return"string"==typeof t?Ao.fromBase64String(t):Ao.fromUint8Array(t)}function Do(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ro(t){var e=t.mapValue.fields.__previous_value__;return Do(e)?Ro(e):e}function Lo(t){var e=Oo(t.mapValue.fields.__local_write_time__.timestampValue);return new vo(e.seconds,e.nanos)}function Fo(t){return null==t}function Mo(t){return 0===t&&1/t==-1/0}function Uo(t){return"number"==typeof t&&Number.isInteger(t)&&!Mo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var jo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(To.fromString(e))},t.fromName=function(e){return new t(To.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===To.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return To.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new To(e.slice()))},t}();function Vo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Do(t)?4:10:co()}function qo(t,e){var n=Vo(t);if(n!==Vo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lo(t).isEqual(Lo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Oo(t.timestampValue),r=Oo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Po(t.bytesValue).isEqual(Po(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return No(t.geoPointValue.latitude)===No(e.geoPointValue.latitude)&&No(t.geoPointValue.longitude)===No(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return No(t.integerValue)===No(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=No(t.doubleValue),r=No(e.doubleValue);return n===r?Mo(n)===Mo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return mo(t.arrayValue.values||[],e.arrayValue.values||[],qo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(wo(n)!==wo(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!qo(n[i],r[i])))return!1;return!0}(t,e);default:return co()}}function Bo(t,e){return void 0!==(t.values||[]).find(function(t){return qo(t,e)})}function Go(t,e){var n=Vo(t),r=Vo(e);if(n!==r)return go(n,r);switch(n){case 0:return 0;case 1:return go(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=No(t.integerValue||t.doubleValue),r=No(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return zo(t.timestampValue,e.timestampValue);case 4:return zo(Lo(t),Lo(e));case 5:return go(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Po(t),r=Po(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=go(n[i],r[i]);if(0!==o)return o}return go(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=go(No(t.latitude),No(e.latitude));return 0!==n?n:go(No(t.longitude),No(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Go(n[i],r[i]);if(o)return o}return go(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=go(r[s],o[s]);if(0!==a)return a;var u=Go(n[r[s]],i[o[s]]);if(0!==u)return u}return go(r.length,o.length)}(t.mapValue,e.mapValue);default:throw co()}}function zo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return go(t,e);var n=Oo(t),r=Oo(e),i=go(n.seconds,r.seconds);return 0!==i?i:go(n.nanos,r.nanos)}function Ho(t){return $o(t)}function $o(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Oo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Po(t.bytesValue).toBase64():"referenceValue"in t?jo.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=$o(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+$o(t.fields[o])}return e+"}"}(t.mapValue):co();var e}function Zo(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ko(t){return!!t&&"integerValue"in t}function Qo(t){return!!t&&"arrayValue"in t}function Jo(t){return!!t&&"nullValue"in t}function Wo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yo(t){return!!t&&"mapValue"in t}function Xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},Oo(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return _o(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Xo(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Xo(t.arrayValue.values[r]);return n}return Object.assign({},t)}var ts=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Yo(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Xo(e)},t.prototype.setAll=function(t){var e=this,n=Io.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Xo(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Yo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return qo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Yo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){_o(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Xo(this.value))},t}();function es(t){var e=[];return _o(t.fields,function(t,n){var r=new Io([t]);if(Yo(n)){var i=es(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new xo(e)}var ns=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,bo.min(),ts.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,ts.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,ts.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=ts.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=ts.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),rs=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function is(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new rs(t,e,n,r,i,o,s)}function os(t){var e=ho(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ho(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Fo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=vs(e.startAt)),e.endAt&&(n+="|ub:",n+=vs(e.endAt)),e.h=n}return e.h}function ss(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ws(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!qo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ss(t.startAt,e.startAt)&&Ss(t.endAt,e.endAt)}function as(t){return jo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var us=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Gt.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new cs(t,n,r):"array-contains"===n?new ds(t,r):"in"===n?new ps(t,r):"not-in"===n?new gs(t,r):"array-contains-any"===n?new ms(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new ls(t,n):new hs(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Go(e,this.value)):null!==e&&Vo(this.value)===Vo(e)&&this.m(Go(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return co()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),cs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=jo.fromName(r.referenceValue),i}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){var e=jo.comparator(t.key,this.key);return this.m(e)},e}(us),ls=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=fs(0,n),r}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(us),hs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=fs(0,n),r}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(us);function fs(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return jo.fromName(t.referenceValue)})}var ds=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Qo(e)&&Bo(e.arrayValue,this.value)},e}(us),ps=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Bo(this.value.arrayValue,e)},e}(us),gs=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){if(Bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Bo(this.value.arrayValue,e)},e}(us),ms=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Gt.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Qo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Bo(e.value.arrayValue,t)})},e}(us),ys=function(t,e){this.position=t,this.before=e};function vs(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Ho(t)}).join(",")}var bs=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ws(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function _s(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?jo.comparator(jo.fromName(s.referenceValue),n.key):Go(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ss(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!qo(t.position[n],e.position[n]))return!1;return!0}var Es=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Ts(t,e,n,r,i,o,s,a){return new Es(t,e,n,r,i,o,s,a)}function Cs(t){return new Es(t)}function Is(t){return!Fo(t.limit)&&"F"===t.limitType}function xs(t){return!Fo(t.limit)&&"L"===t.limitType}function As(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function ks(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Os(t){return null!==t.collectionGroup}function Ns(t){var e=ho(t);if(null===e.p){e.p=[];var n=ks(e),r=As(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new bs(n)),e.p.push(new bs(Io.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new bs(Io.keyField(),u))}}}return e.p}function Ps(t){var e=ho(t);if(!e.T)if("F"===e.limitType)e.T=is(e.path,e.collectionGroup,Ns(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ns(e);r<i.length;r++){var o=i[r];n.push(new bs(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ys(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ys(e.startAt.position,!e.startAt.before):null;e.T=is(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function Ds(t,e,n){return new Es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rs(t,e){return ss(Ps(t),Ps(e))&&t.limitType===e.limitType}function Ls(t){return os(Ps(t))+"|lt:"+t.limitType}function Fs(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ho(e.value);var e}).join(", ")+"]"),Fo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+vs(t.startAt)),t.endAt&&(e+=", endAt: "+vs(t.endAt)),"Target("+e+")"}(Ps(t))+"; limitType="+t.limitType+")"}function Ms(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):jo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!_s(t.startAt,Ns(t),e)||t.endAt&&_s(t.endAt,Ns(t),e))}(t,e)}function Us(t){return function(e,n){for(var r=!1,i=0,o=Ns(t);i<o.length;i++){var s=o[i],a=js(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function js(t,e,n){var r=t.field.isKeyField()?jo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Go(r,i):co()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return co()}}function Vs(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mo(e)?"-0":e}}function qs(t){return{integerValue:""+t}}function Bs(t,e){return Uo(e)?qs(e):Vs(t,e)}var Gs=function(){this._=void 0};function zs(t,e,n){return t instanceof Zs?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ks?Qs(t,e):t instanceof Js?Ws(t,e):function(t,e){var n=$s(t,e),r=Xs(n)+Xs(t.A);return Ko(n)&&Ko(t.A)?qs(r):Vs(t.R,r)}(t,e)}function Hs(t,e,n){return t instanceof Ks?Qs(t,e):t instanceof Js?Ws(t,e):n}function $s(t,e){return t instanceof Ys?Ko(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Zs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e}(Gs),Ks=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Gt.ZT)(e,t),e}(Gs);function Qs(t,e){for(var n=ta(e),r=function(t){n.some(function(e){return qo(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Js=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Gt.ZT)(e,t),e}(Gs);function Ws(t,e){for(var n=ta(e),r=function(t){n=n.filter(function(e){return!qo(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ys=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Gt.ZT)(e,t),e}(Gs);function Xs(t){return No(t.integerValue||t.doubleValue)}function ta(t){return Qo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ea=function(t,e){this.field=t,this.transform=e},na=function(t,e){this.version=t,this.transformResults=e},ra=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ia(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var oa=function(){};function sa(t,e,n){t instanceof ha?function(t,e,n){var r=t.value.clone(),i=pa(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof fa?function(t,e,n){if(ia(t.precondition,e)){var r=pa(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(da(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function aa(t,e,n){t instanceof ha?function(t,e,n){if(ia(t.precondition,e)){var r=t.value.clone(),i=ga(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(la(e),r).setHasLocalMutations()}}(t,e,n):t instanceof fa?function(t,e,n){if(ia(t.precondition,e)){var r=ga(t.fieldTransforms,n,e),i=e.data;i.setAll(da(t)),i.setAll(r),e.convertToFoundDocument(la(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ia(t.precondition,e)&&e.convertToNoDocument(bo.min())}(t,e)}function ua(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=$s(o.transform,s||null);null!=a&&(null==n&&(n=ts.empty()),n.set(o.field,a))}return n||null}function ca(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&mo(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ks&&e instanceof Ks||t instanceof Js&&e instanceof Js?mo(t.elements,e.elements,qo):t instanceof Ys&&e instanceof Ys?qo(t.A,e.A):t instanceof Zs&&e instanceof Zs}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function la(t){return t.isFoundDocument()?t.version:bo.min()}var ha=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Gt.ZT)(e,t),e}(oa),fa=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Gt.ZT)(e,t),e}(oa);function da(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function pa(t,e,n){var r=new Map;lo(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Hs(s,a,n[i]))}return r}function ga(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,zs(a,u,e))}return r}var ma,ya,va=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Gt.ZT)(e,t),e}(oa),ba=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Gt.ZT)(e,t),e}(oa),wa=function(t){this.count=t};function _a(t){switch(t){case eo.OK:return co();case eo.CANCELLED:case eo.UNKNOWN:case eo.DEADLINE_EXCEEDED:case eo.RESOURCE_EXHAUSTED:case eo.INTERNAL:case eo.UNAVAILABLE:case eo.UNAUTHENTICATED:return!1;case eo.INVALID_ARGUMENT:case eo.NOT_FOUND:case eo.ALREADY_EXISTS:case eo.PERMISSION_DENIED:case eo.FAILED_PRECONDITION:case eo.ABORTED:case eo.OUT_OF_RANGE:case eo.UNIMPLEMENTED:case eo.DATA_LOSS:return!0;default:return co()}}function Sa(t){if(void 0===t)return so("GRPC error has no .code"),eo.UNKNOWN;switch(t){case ma.OK:return eo.OK;case ma.CANCELLED:return eo.CANCELLED;case ma.UNKNOWN:return eo.UNKNOWN;case ma.DEADLINE_EXCEEDED:return eo.DEADLINE_EXCEEDED;case ma.RESOURCE_EXHAUSTED:return eo.RESOURCE_EXHAUSTED;case ma.INTERNAL:return eo.INTERNAL;case ma.UNAVAILABLE:return eo.UNAVAILABLE;case ma.UNAUTHENTICATED:return eo.UNAUTHENTICATED;case ma.INVALID_ARGUMENT:return eo.INVALID_ARGUMENT;case ma.NOT_FOUND:return eo.NOT_FOUND;case ma.ALREADY_EXISTS:return eo.ALREADY_EXISTS;case ma.PERMISSION_DENIED:return eo.PERMISSION_DENIED;case ma.FAILED_PRECONDITION:return eo.FAILED_PRECONDITION;case ma.ABORTED:return eo.ABORTED;case ma.OUT_OF_RANGE:return eo.OUT_OF_RANGE;case ma.UNIMPLEMENTED:return eo.UNIMPLEMENTED;case ma.DATA_LOSS:return eo.DATA_LOSS;default:return co()}}(ya=ma||(ma={}))[ya.OK=0]="OK",ya[ya.CANCELLED=1]="CANCELLED",ya[ya.UNKNOWN=2]="UNKNOWN",ya[ya.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ya[ya.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ya[ya.NOT_FOUND=5]="NOT_FOUND",ya[ya.ALREADY_EXISTS=6]="ALREADY_EXISTS",ya[ya.PERMISSION_DENIED=7]="PERMISSION_DENIED",ya[ya.UNAUTHENTICATED=16]="UNAUTHENTICATED",ya[ya.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ya[ya.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ya[ya.ABORTED=10]="ABORTED",ya[ya.OUT_OF_RANGE=11]="OUT_OF_RANGE",ya[ya.UNIMPLEMENTED=12]="UNIMPLEMENTED",ya[ya.INTERNAL=13]="INTERNAL",ya[ya.UNAVAILABLE=14]="UNAVAILABLE",ya[ya.DATA_LOSS=15]="DATA_LOSS";var Ea=function(){function t(t,e){this.comparator=t,this.root=e||Ca.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ca.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ca.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ta(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ta(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ta(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ta(this.root,t,this.comparator,!0)},t}(),Ta=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ca=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw co();if(this.right.isRed())throw co();var t=this.left.check();if(t!==this.right.check())throw co();return t+(this.isRed()?0:1)},t}();Ca.EMPTY=null,Ca.RED=!0,Ca.BLACK=!1,Ca.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw co()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw co()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw co()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw co()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw co()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ca(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ia=function(){function t(t){this.comparator=t,this.data=new Ea(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new xa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new xa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),xa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Aa=new Ea(jo.comparator);function ka(){return Aa}var Oa=new Ea(jo.comparator);function Na(){return Oa}var Pa=new Ea(jo.comparator);function Da(){return Pa}var Ra=new Ia(jo.comparator);function La(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ra,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Fa=new Ia(go);function Ma(){return Fa}var Ua=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ja.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(bo.min(),r,Ma(),ka(),La())},t}(),ja=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Ao.EMPTY_BYTE_STRING,n,La(),La(),La())},t}(),Va=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},qa=function(t,e){this.targetId=t,this.V=e},Ba=function(t,e,n,r){void 0===n&&(n=Ao.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ga=function(){function t(){this.S=0,this.D=$a(),this.C=Ao.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=La(),e=La(),n=La();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:co()}}),new ja(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=$a()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),za=function(){function t(t){this.W=t,this.G=new Map,this.H=ka(),this.J=Ha(),this.Y=new Ia(go)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:co()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(as(i))if(0===n){var o=new jo(i.path);this.tt(e,o,ns.newNoDocument(o,bo.min()))}else lo(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&as(o.target)){var s=new jo(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,ns.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=La();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new Ua(t,n,this.Y,this.H,r);return this.H=ka(),this.J=Ha(),this.Y=new Ia(go),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ga,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ia(go),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||oo("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ga),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ha(){return new Ea(jo.comparator)}function $a(){return new Ea(jo.comparator)}var Za={asc:"ASCENDING",desc:"DESCENDING"},Ka={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qa=function(t,e){this.databaseId=t,this.I=e};function Ja(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wa(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ya(t,e){return Ja(t,e.toTimestamp())}function Xa(t){return lo(!!t),bo.fromTimestamp(function(t){var e=Oo(t);return new vo(e.seconds,e.nanos)}(t))}function tu(t,e){return function(t){return new To(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function eu(t){var e=To.fromString(t);return lo(Cu(e)),e}function nu(t,e){return tu(t.databaseId,e.path)}function ru(t,e){var n=eu(e);if(n.get(1)!==t.databaseId.projectId)throw new no(eo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new no(eo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new jo(au(n))}function iu(t,e){return tu(t.databaseId,e)}function ou(t){var e=eu(t);return 4===e.length?To.emptyPath():au(e)}function su(t){return new To(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function au(t){return lo(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function uu(t,e,n){return{name:nu(t,e),fields:n.value.mapValue.fields}}function cu(t,e,n){var r=ru(t,e.name),i=Xa(e.updateTime),o=new ts({mapValue:{fields:e.fields}}),s=ns.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function lu(t,e){var n;if(e instanceof ha)n={update:uu(t,e.key,e.value)};else if(e instanceof va)n={delete:nu(t,e.key)};else if(e instanceof fa)n={update:uu(t,e.key,e.data),updateMask:Tu(e.fieldMask)};else{if(!(e instanceof ba))return co();n={verify:nu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Zs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ks)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Js)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ys)return{fieldPath:e.field.canonicalString(),increment:n.A};throw co()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ya(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:co()}(t,e.precondition)),n}function hu(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ra.updateTime(Xa(t.updateTime)):void 0!==t.exists?ra.exists(t.exists):ra.none()}(e.currentDocument):ra.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(lo("REQUEST_TIME"===e.setToServerValue),n=new Zs):"appendMissingElements"in e?n=new Ks(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Js(e.removeAllFromArray.values||[]):"increment"in e?n=new Ys(t,e.increment):co();var r=Io.fromServerFormat(e.fieldPath);return new ea(r,n)}(t,e)}):[];if(e.update){var i=ru(t,e.update.name),o=new ts({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new xo((t.fieldPaths||[]).map(function(t){return Io.fromServerFormat(t)}))}(e.updateMask);return new fa(i,o,s,n,r)}return new ha(i,o,n,r)}if(e.delete){var a=ru(t,e.delete);return new va(a,n)}if(e.verify){var u=ru(t,e.verify);return new ba(u,n)}return co()}function fu(t,e){return{documents:[iu(t,e.path)]}}function du(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=iu(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=iu(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Wo(t.value))return{unaryFilter:{field:wu(t.field),op:"IS_NAN"}};if(Jo(t.value))return{unaryFilter:{field:wu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Wo(t.value))return{unaryFilter:{field:wu(t.field),op:"IS_NOT_NAN"}};if(Jo(t.value))return{unaryFilter:{field:wu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wu(t.field),op:bu(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:wu(t.field),direction:vu(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Fo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=mu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=mu(e.endAt)),n}function pu(t){var e=ou(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){lo(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=gu(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new bs(_u(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Fo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=yu(n.startAt));var l=null;return n.endAt&&(l=yu(n.endAt)),Ts(e,i,a,s,u,"F",c,l)}function gu(t){return t?void 0!==t.unaryFilter?[Eu(t)]:void 0!==t.fieldFilter?[Su(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return gu(t)}).reduce(function(t,e){return t.concat(e)}):co():[]}function mu(t){return{before:t.before,values:t.position}}function yu(t){return new ys(t.values||[],!!t.before)}function vu(t){return Za[t]}function bu(t){return Ka[t]}function wu(t){return{fieldPath:t.canonicalString()}}function _u(t){return Io.fromServerFormat(t.fieldPath)}function Su(t){return us.create(_u(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return co()}}(t.fieldFilter.op),t.fieldFilter.value)}function Eu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=_u(t.unaryFilter.field);return us.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=_u(t.unaryFilter.field);return us.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=_u(t.unaryFilter.field);return us.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=_u(t.unaryFilter.field);return us.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return co()}}function Tu(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Cu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Iu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Au(e)),e=xu(t.get(n),e);return Au(e)}function xu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Au(t){return t+"\x01\x01"}function ku(t){var e=t.length;if(lo(e>=2),2===e)return lo("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),To.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&co(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:co()}o=s+2}return new To(r)}var Ou=function(t,e){this.seconds=t,this.nanoseconds=e},Nu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Nu.store="owner",Nu.key="owner";var Pu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Pu.store="mutationQueues",Pu.keyPath="userId";var Du=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Du.store="mutations",Du.keyPath="batchId",Du.userMutationsIndex="userMutationsIndex",Du.userMutationsKeyPath=["userId","batchId"];var Ru=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Iu(e)]},t.key=function(t,e,n){return[t,Iu(e),n]},t}();Ru.store="documentMutations",Ru.PLACEHOLDER=new Ru;var Lu=function(t,e){this.path=t,this.readTime=e},Fu=function(t,e){this.path=t,this.version=e},Mu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Mu.store="remoteDocuments",Mu.readTimeIndex="readTimeIndex",Mu.readTimeIndexPath="readTime",Mu.collectionReadTimeIndex="collectionReadTimeIndex",Mu.collectionReadTimeIndexPath=["parentPath","readTime"];var Uu=function(t){this.byteSize=t};Uu.store="remoteDocumentGlobal",Uu.key="remoteDocumentGlobalKey";var ju=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};ju.store="targets",ju.keyPath="targetId",ju.queryTargetsIndexName="queryTargetsIndex",ju.queryTargetsKeyPath=["canonicalId","targetId"];var Vu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Vu.store="targetDocuments",Vu.keyPath=["targetId","path"],Vu.documentTargetsIndex="documentTargetsIndex",Vu.documentTargetsKeyPath=["path","targetId"];var qu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};qu.key="targetGlobalKey",qu.store="targetGlobal";var Bu=function(t,e){this.collectionId=t,this.parent=e};Bu.store="collectionParents",Bu.keyPath=["collectionId","parent"];var Gu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Gu.store="clientMetadata",Gu.keyPath="clientId";var zu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};zu.store="bundles",zu.keyPath="bundleId";var Hu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Hu.store="namedQueries",Hu.keyPath="name";var $u=(0,Gt.ev)((0,Gt.ev)([],(0,Gt.ev)((0,Gt.ev)([],(0,Gt.ev)((0,Gt.ev)([],(0,Gt.ev)((0,Gt.ev)([],[Pu.store,Du.store,Ru.store,Mu.store,ju.store,Nu.store,qu.store,Vu.store]),[Gu.store])),[Uu.store])),[Bu.store])),[zu.store,Hu.store]),Zu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ku=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Qu=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Ju=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&co(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Wu=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Qu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new tc(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=oc(e.target.error);n.ft.reject(new tc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new tc(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(oo("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new nc(e)},t}(),Yu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,zt.z$)())&&so("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return oo("SimpleDb","Removing database:",t),rc(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,zt.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(oo("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new tc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new no(eo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new tc(t,n))},i.onupgradeneeded=function(t){oo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){oo("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Gt.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Gt.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Wu.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Ju.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return oo("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Xu=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return rc(this.Pt.delete())},t}(),tc=function(t){function e(e,n){var r=this;return(r=t.call(this,eo.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Gt.ZT)(e,t),e}(no);function ec(t){return"IndexedDbTransactionError"===t.name}var nc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(oo("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(oo("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),rc(n)},t.prototype.add=function(t){return oo("SimpleDb","ADD",this.store.name,t,t),rc(this.store.add(t))},t.prototype.get=function(t){var e=this;return rc(this.store.get(t)).next(function(n){return void 0===n&&(n=null),oo("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return oo("SimpleDb","DELETE",this.store.name,t),rc(this.store.delete(t))},t.prototype.count=function(){return oo("SimpleDb","COUNT",this.store.name),rc(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){oo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Ju(function(n,r){e.onerror=function(t){var e=oc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Ju(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Xu(i),s=e(i.primaryKey,i.value,o);if(s instanceof Ju){var a=s.catch(function(t){return o.done(),Ju.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Ju.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function rc(t){return new Ju(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=oc(t.target.error);n(e)}})}var ic=!1;function oc(t){var e=Yu._t((0,zt.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new no("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ic||(ic=!0,setTimeout(function(){throw r},0)),r}}return t}var sc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Gt.ZT)(e,t),e}(Ku);function ac(t,e){var n=ho(t);return Yu.It(n.Mt,e)}var uc=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&sa(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&aa(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&aa(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(bo.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},La())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&mo(this.mutations,t.mutations,function(t,e){return ca(t,e)})&&mo(this.baseMutations,t.baseMutations,function(t,e){return ca(t,e)})},t}(),cc=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){lo(e.mutations.length===r.length);for(var i=Da(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),lc=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=bo.min()),void 0===o&&(o=bo.min()),void 0===s&&(s=Ao.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),hc=function(t){this.Lt=t};function fc(t,e){if(e.document)return cu(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=jo.fromSegments(e.noDocument.path),r=yc(e.noDocument.readTime),i=ns.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=jo.fromSegments(e.unknownDocument.path);return r=yc(e.unknownDocument.version),ns.newUnknownDocument(o,r)}return co()}function dc(t,e,n){var r=pc(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:nu(t,e.key),fields:e.data.value.mapValue.fields,updateTime:Ja(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Mu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=mc(e.version);return s=e.hasCommittedMutations,new Mu(null,new Lu(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=mc(e.version);return new Mu(new Fu(c,l),null,null,!0,r,i)}return co()}function pc(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function gc(t){var e=new vo(t[0],t[1]);return bo.fromTimestamp(e)}function mc(t){var e=t.toTimestamp();return new Ou(e.seconds,e.nanoseconds)}function yc(t){var e=new vo(t.seconds,t.nanoseconds);return bo.fromTimestamp(e)}function vc(t,e){for(var n=(e.baseMutations||[]).map(function(e){return hu(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return hu(t.Lt,e)}),o=vo.fromMillis(e.localWriteTimeMs);return new uc(e.batchId,o,n,i)}function bc(t){var e,n,r=yc(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?yc(t.lastLimboFreeSnapshotVersion):bo.min();return void 0!==t.query.documents?(lo(1===(n=t.query).documents.length),e=Ps(Cs(ou(n.documents[0])))):e=function(t){return Ps(pu(t))}(t.query),new lc(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ao.fromBase64String(t.resumeToken))}function wc(t,e){var n,r=mc(e.snapshotVersion),i=mc(e.lastLimboFreeSnapshotVersion);n=as(e.target)?fu(t.Lt,e.target):du(t.Lt,e.target);var o=e.resumeToken.toBase64();return new ju(e.targetId,os(e.target),r,o,e.sequenceNumber,i,n)}function _c(t){var e=pu({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ds(e,e.limit,"L"):e}var Sc=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ec(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:yc(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Ec(t).put({bundleId:(n=e).id,createTime:mc(Xa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Tc(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:_c(e.bundledQuery),readTime:yc(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Tc(t).put(function(t){return{name:t.name,readTime:mc(Xa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ec(t){return ac(t,zu.store)}function Tc(t){return ac(t,Hu.store)}var Cc=function(){function t(){this.Bt=new Ic}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Ju.resolve()},t.prototype.getCollectionParents=function(t,e){return Ju.resolve(this.Bt.getEntries(e))},t}(),Ic=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ia(To.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ia(To.comparator)).toArray()},t}(),xc=function(){function t(){this.qt=new Ic}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Iu(i)};return Ac(t).put(o)}return Ju.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[yo(e),""],!1,!0);return Ac(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ku(o.parent))}return n})},t}();function Ac(t){return ac(t,Bu.store)}var kc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Oc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Nc(t,e,n){var r=t.store(Du.store),i=t.store(Ru.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){lo(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Ru.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ju.waitFor(o).next(function(){return c})}function Pc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw co();e=t.noDocument}return JSON.stringify(e).length}Oc.DEFAULT_COLLECTION_PERCENTILE=10,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oc.DEFAULT=new Oc(41943040,Oc.DEFAULT_COLLECTION_PERCENTILE,Oc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oc.DISABLED=new Oc(-1,0,0);var Dc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return lo(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lc(t).$t({index:Du.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Fc(t),s=Lc(t);return s.add({}).next(function(a){lo("number"==typeof a);for(var u=new uc(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return lu(t.Lt,e)}),i=n.mutations.map(function(e){return lu(t.Lt,e)});return new Du(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Ia(function(t,e){return go(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=Ru.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Ru.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Kt[a]=u.keys()}),Ju.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Lc(t).get(e).next(function(t){return t?(lo(t.userId===n.userId),vc(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Ju.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Lc(t).$t({index:Du.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(lo(e.batchId>=r),o=vc(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Lc(t).$t({index:Du.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lc(t).Nt(Du.userMutationsIndex,n).next(function(t){return t.map(function(t){return vc(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Ru.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Fc(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=ku(r[1]);if(a===n.userId&&e.path.isEqual(c))return Lc(t).get(u).next(function(t){if(!t)throw co();lo(t.userId===n.userId),o.push(vc(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ia(go),i=[];return e.forEach(function(e){var o=Ru.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Fc(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=ku(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Ju.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Ru.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ia(go);return Fc(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=ku(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Lc(t).get(e).next(function(t){if(null===t)throw co();lo(t.userId===n.userId),r.push(vc(n.R,t))}))}),Ju.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return Nc(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Ju.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Ju.resolve();var r=IDBKeyRange.lowerBound(Ru.prefixForUser(e.userId)),i=[];return Fc(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=ku(t[1]);i.push(o)}else r.done()}).next(function(){lo(0===i.length)})})},t.prototype.containsKey=function(t,e){return Rc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Mc(t).get(this.userId).next(function(t){return t||new Pu(e.userId,-1,"")})},t}();function Rc(t,e,n){var r=Ru.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Fc(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Lc(t){return ac(t,Du.store)}function Fc(t){return ac(t,Ru.store)}function Mc(t){return ac(t,Pu.store)}var Uc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),jc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Uc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return bo.fromTimestamp(new vo(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Vc(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return lo(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Vc(t).$t(function(s,a){var u=bc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Ju.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Vc(t).$t(function(t,n){var r=bc(n);e(r)})},t.prototype.Xt=function(t){return qc(t).get(qu.key).next(function(t){return lo(null!==t),t})},t.prototype.Zt=function(t,e){return qc(t).put(qu.key,e)},t.prototype.te=function(t,e){return Vc(t).put(wc(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=os(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Vc(t).$t({range:r,index:ju.queryTargetsIndexName},function(t,n,r){var o=bc(n);ss(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Bc(t);return e.forEach(function(e){var s=Iu(e.path);i.push(o.put(new Vu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Ju.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Bc(t);return Ju.forEach(e,function(e){var o=Iu(e.path);return Ju.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Bc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Bc(t),i=La();return r.$t({range:n,kt:!0},function(t,e,n){var r=ku(t[1]),o=new jo(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Iu(e.path),r=IDBKeyRange.bound([n],[yo(n)],!1,!0),i=0;return Bc(t).$t({index:Vu.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Vc(t).get(e).next(function(t){return t?bc(t):null})},t}();function Vc(t){return ac(t,ju.store)}function qc(t){return ac(t,qu.store)}function Bc(t){return ac(t,Vu.store)}function Gc(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){if(t.code!==eo.FAILED_PRECONDITION||t.message!==Zu)throw t;return oo("LocalStore","Unexpectedly lost primary lease"),[2]})})}function zc(t,e){var n=t[1],r=e[1],i=go(t[0],e[0]);return 0===i?go(n,r):i}var Hc=function(){function t(t){this.ne=t,this.buffer=new Ia(zc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();zc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),$c=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;oo("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ec(e=n.sent())?(oo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Gc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Zc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Ju.resolve(to.o);var r=new Hc(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(oo("LruGarbageCollector","Garbage collection skipped; disabled"),Ju.resolve(kc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(oo("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),kc):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(oo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),io()<=Ht.in.DEBUG&&oo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Ju.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Kc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Zc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Qc(t,n)},t.prototype.removeReference=function(t,e,n){return Qc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Qc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Mc(t).Ot(function(r){return Rc(t,r,e).next(function(t){return t&&(n=!0),Ju.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Bc(t).delete([0,Iu(s.path)])})});i.push(u)}}).next(function(){return Ju.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Qc(t,e)},t.prototype.we=function(t,e){var n,r=Bc(t),i=to.o;return r.$t({index:Vu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==to.o&&e(new jo(ku(n)),i),i=s,n=o):i=to.o}).next(function(){i!==to.o&&e(new jo(ku(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Qc(t,e){return Bc(t).put(function(t,e){return new Vu(0,Iu(t.path),e)}(e,t.currentSequenceNumber))}var Jc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){_o(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return So(this.inner)},t}(),Wc=function(){function t(){this.changes=new Jc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:bo.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ns.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Ju.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Yc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return el(t).put(nl(e),n)},t.prototype.removeEntry=function(t,e){var n=el(t),r=nl(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return el(t).get(nl(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return el(t).get(nl(e)).next(function(t){return{document:n.ye(e,t),size:Pc(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ka();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ka(),i=new Ea(jo.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Pc(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Ju.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return el(t).$t({range:r},function(t,e,r){for(var s=jo.fromSegments(t);o&&jo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ka(),o=e.path.length+1,s={};if(n.isEqual(bo.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=pc(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Mu.collectionReadTimeIndex}return el(t).$t(s,function(t,n,s){if(t.length===o){var a=fc(r.R,n);e.path.isPrefixOf(a.key.path)?Ms(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Xc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return tl(t).get(Uu.key).next(function(t){return lo(!!t),t})},t.prototype.me=function(t,e){return tl(t).put(Uu.key,e)},t.prototype.ye=function(t,e){if(e){var n=fc(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(bo.min()))return n}return ns.newInvalidDocument(t)},t}(),Xc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Jc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Gt.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ia(function(t,e){return go(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=dc(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Pc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=dc(e.Ie.R,ns.newNoDocument(o,bo.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Ju.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Wc);function tl(t){return ac(t,Uu.store)}function el(t){return ac(t,Mu.store)}function nl(t){return t.path.toArray()}var rl=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;lo(n<r&&n>=0&&r<=11);var o=new Wu("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Nu.store)}(t),function(t){t.createObjectStore(Pu.store,{keyPath:Pu.keyPath}),t.createObjectStore(Du.store,{keyPath:Du.keyPath,autoIncrement:!0}).createIndex(Du.userMutationsIndex,Du.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Ru.store)}(t),il(t),function(t){t.createObjectStore(Mu.store)}(t));var s=Ju.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Vu.store),t.deleteObjectStore(ju.store),t.deleteObjectStore(qu.store)}(t),il(t)),s=s.next(function(){return function(t){var e=t.store(qu.store),n=new qu(0,0,bo.min().toTimestamp(),0);return e.put(qu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Du.store).Nt().next(function(n){t.deleteObjectStore(Du.store),t.createObjectStore(Du.store,{keyPath:Du.keyPath,autoIncrement:!0}).createIndex(Du.userMutationsIndex,Du.userMutationsKeyPath,{unique:!0});var r=e.store(Du.store),i=n.map(function(t){return r.put(t)});return Ju.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Gu.store,{keyPath:Gu.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Uu.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Mu.store);e.createIndex(Mu.readTimeIndex,Mu.readTimeIndexPath,{unique:!1}),e.createIndex(Mu.collectionReadTimeIndex,Mu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(zu.store,{keyPath:zu.keyPath})}(t),function(t){t.createObjectStore(Hu.store,{keyPath:Hu.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Mu.store).$t(function(t,n){e+=Pc(n)}).next(function(){var n=new Uu(e);return t.store(Uu.store).put(Uu.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(Pu.store),r=t.store(Du.store);return n.Nt().next(function(n){return Ju.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Du.userMutationsIndex,i).next(function(r){return Ju.forEach(r,function(r){lo(r.userId===n.userId);var i=vc(e.R,r);return Nc(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Vu.store),n=t.store(Mu.store);return t.store(qu.store).get(qu.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new To(n),s=function(t){return[0,Iu(t)]}(o);r.push(e.get(s).next(function(n){return n?Ju.resolve():function(n){return e.put(new Vu(0,Iu(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Ju.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Bu.store,{keyPath:Bu.keyPath});var n=e.store(Bu.store),r=new Ic,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Iu(i)})}};return e.store(Mu.store).$t({kt:!0},function(t,e){var n=new To(t);return i(n.popLast())}).next(function(){return e.store(Ru.store).$t({kt:!0},function(t,e){var n=ku(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(ju.store);return n.$t(function(t,r){var i=bc(r),o=wc(e.R,i);return n.put(o)})},t}();function il(t){t.createObjectStore(Vu.store,{keyPath:Vu.keyPath}).createIndex(Vu.documentTargetsIndex,Vu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(ju.store,{keyPath:ju.keyPath}).createIndex(ju.queryTargetsIndexName,ju.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(qu.store)}var ol="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sl=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new no(eo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kc(this,i),this.Le=n+"main",this.R=new hc(u),this.Be=new Yu(this.Le,11,new rl(this.R)),this.qe=new jc(this.referenceDelegate,this.R),this.Ut=new xc,this.Ue=function(t,e){return new Yc(t,e)}(this.R,this.Ut),this.Ke=new Sc,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&so("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new no(eo.FAILED_PRECONDITION,ol);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new to(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return ul(e).put(new Gu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(ec(e))return oo("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return oo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return al(t).get(Nu.key).next(function(t){return Ju.resolve(e.tn(t))})},t.prototype.en=function(t){return ul(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=ac(t,Gu.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Ju.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Ju.resolve(!0):al(t).get(Nu.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new no(eo.FAILED_PRECONDITION,ol);return!1}}return!(!e.networkEnabled||!e.inForeground)||ul(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&oo("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t=this;return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Nu.store,Gu.store],function(e){var n=new sc(e,to.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return ul(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Dc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return oo("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",$u,function(o){return r=new sc(o,i.Ne?i.Ne.next():to.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw so("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new no(eo.FAILED_PRECONDITION,Zu);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return al(t).get(Nu.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new no(eo.FAILED_PRECONDITION,ol)})},t.prototype.Ze=function(t){var e=new Nu(this.clientId,this.allowTabSynchronization,Date.now());return al(t).put(Nu.key,e)},t.yt=function(){return Yu.yt()},t.prototype.Xe=function(t){var e=this,n=al(t);return n.get(Nu.key).next(function(t){return e.tn(t)?(oo("IndexedDbPersistence","Releasing primary lease."),n.delete(Nu.key)):Ju.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(so("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return oo("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return so("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){so("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function al(t){return ac(t,Nu.store)}function ul(t){return ac(t,Gu.store)}function cl(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var ll=function(t,e){this.progress=t,this.wn=e},hl=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return jo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Os(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new jo(e)).next(function(t){var e=Na();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Na();return this.Ut.getCollectionParents(t,i).next(function(s){return Ju.forEach(s,function(s){var a=function(t,e){return new Es(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=ns.newInvalidDocument(c),r=r.insert(c,l)),aa(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Ms(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=La(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof fa&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),fl=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=La(),i=La(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),dl=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(bo.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Is(e)||xs(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(io()<=Ht.in.DEBUG&&oo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Fs(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Ia(Us(t));return e.forEach(function(e,r){Ms(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return io()<=Ht.in.DEBUG&&oo("QueryEngine","Using full collection scan to execute query:",Fs(e)),this.Sn.getDocumentsMatchingQuery(t,e,bo.min())},t}(),pl=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ea(go),this.kn=new Jc(function(t){return os(t)},ss),this.$n=bo.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new hl(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function gl(t,e,n,r){return new pl(t,e,n,r)}function ml(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return n=ho(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new hl(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=La(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function yl(t,e){var n=ho(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Ju.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);lo(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function vl(t){var e=ho(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function bl(t,e){var n=ho(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return lo(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ka();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(wl(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(bo.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Ju.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function wl(t,e,n,r,i){var o=La();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ka();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(bo.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):oo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function _l(t,e){var n=ho(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Sl(t,e){var n=ho(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Ju.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new lc(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function El(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:r=ho(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ec(s=a.sent()))throw s;return oo("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Tl(t,e,n){var r=ho(t),i=bo.min(),o=La();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=ho(t),i=r.kn.get(n);return void 0!==i?Ju.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Ps(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:bo.min(),n?o:La())}).next(function(t){return{documents:t,Bn:o}})})}function Cl(t,e){var n=ho(t),r=ho(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function Il(t){var e=ho(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=ho(t),i=ka(),o=pc(n),s=el(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Mu.readTimeIndex,range:a},function(t,e){var n=fc(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:gc(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function xl(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){return[2,(e=ho(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=el(t),n=bo.min();return e.$t({index:Mu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=gc(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function Al(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,Gt.Jh)(this,function(p){switch(p.label){case 0:for(i=ho(t),o=La(),s=ka(),a=Da(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,Sl(i,function(t){return Ps(Cs(To.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return wl(t,f,s,bo.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function kl(t,e,n){return void 0===n&&(n=La()),(0,Gt.mG)(this,void 0,void 0,function(){var r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return[4,Sl(t,Ps(_c(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ho(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Xa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Ao.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Ke.saveNamedQuery(t,e)})})]}})})}var Ol=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Ju.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Xa(n.createTime)}),Ju.resolve()},t.prototype.getNamedQuery=function(t,e){return Ju.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:_c(t.bundledQuery),readTime:Xa(t.readTime)}}(e)),Ju.resolve()},t}(),Nl=function(){function t(){this.Wn=new Ia(Pl.Gn),this.zn=new Ia(Pl.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Pl(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new Pl(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new jo(new To([])),r=new Pl(n,t),i=new Pl(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new jo(new To([])),n=new Pl(e,t),r=new Pl(e,t+1),i=La();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new Pl(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Pl=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return jo.comparator(t.key,e.key)||go(t.ns,e.ns)},t.Hn=function(t,e){return go(t.ns,e.ns)||jo.comparator(t.key,e.key)},t}(),Dl=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ia(Pl.Gn)}return t.prototype.checkEmpty=function(t){return Ju.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new uc(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Pl(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Ju.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Ju.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Ju.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Ju.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Ju.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Pl(e,0),i=new Pl(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Ju.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ia(go);return e.forEach(function(t){var e=new Pl(t,0),i=new Pl(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Ju.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;jo.isDocumentKey(i)||(i=i.child(""));var o=new Pl(new jo(i),0),s=new Ia(go);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Ju.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;lo(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Ju.forEach(e.mutations,function(i){var o=new Pl(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Pl(e,0),r=this.rs.firstAfterOrEqual(n);return Ju.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Ju.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Rl=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ea(jo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Ju.resolve(n?n.document.clone():ns.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ka();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ns.newInvalidDocument(t))}),Ju.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ka(),i=new jo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Ms(e,u)&&(r=r.insert(u.key,u.clone()))}return Ju.resolve(r)},t.prototype.fs=function(t,e){return Ju.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Ll(this)},t.prototype.getSize=function(t){return Ju.resolve(this.size)},t}(),Ll=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Gt.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Ju.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Wc),Fl=function(){function t(t){this.persistence=t,this.ds=new Jc(function(t){return os(t)},ss),this.lastRemoteSnapshotVersion=bo.min(),this.highestTargetId=0,this.ws=0,this._s=new Nl,this.targetCount=0,this.ys=Uc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Ju.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Ju.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Ju.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Ju.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Ju.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Uc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Ju.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Ju.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Ju.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ju.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Ju.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Ju.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Ju.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Ju.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Ju.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Ju.resolve(n)},t.prototype.containsKey=function(t,e){return Ju.resolve(this._s.containsKey(e))},t}(),Ml=function(){function t(t,e){var n=this;this.gs={},this.Ne=new to(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Fl(this),this.Ut=new Cc,this.Ue=function(t,e){return new Rl(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new hc(e),this.Ke=new Ol(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Dl(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;oo("MemoryPersistence","Starting transaction:",t);var i=new Ul(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Ju.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Ul=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Gt.ZT)(e,t),e}(Ku),jl=function(){function t(t){this.persistence=t,this.As=new Nl,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw co()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Ju.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Ju.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Ju.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ju.forEach(this.vs,function(r){var i=jo.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Ju.or([function(){return Ju.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Vl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function ql(t,e){return"firestore_clients_"+t+"_"+e}function Bl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Gl(t,e){return"firestore_targets_"+t+"_"+e}Vl.UNAUTHENTICATED=new Vl(null),Vl.GOOGLE_CREDENTIALS=new Vl("google-credentials-uid"),Vl.FIRST_PARTY=new Vl("first-party-uid");var zl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new no(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(so("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Hl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new no(i.error.code,i.error.message)),o?new t(e,i.state,r):(so("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),$l=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ma(),s=0;i&&s<r.activeTargetIds.length;++s)i=Uo(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(so("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Zl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(so("SharedClientState","Failed to parse online state: "+e),null)},t}(),Kl=function(){function t(){this.activeTargetIds=Ma()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ql=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ea(go),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=ql(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Kl),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Gt.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(ql(this.persistenceKey,r)))&&(o=$l.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Gl(this.persistenceKey,t));if(n){var r=Hl.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Gl(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return oo("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){oo("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){oo("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(oo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void so("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Gt.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=to.o;if(null!=t)try{var n=JSON.parse(t);lo("number"==typeof n),e=n}catch(t){so("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==to.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new zl(this.currentUser,t,e,n),i=Bl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Bl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Gl(this.persistenceKey,t),i=new Hl(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return $l.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return zl.Vs(new Vl(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Hl.Vs(r,e)},t.prototype.js=function(t){return Zl.Vs(t)},t.prototype.ii=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(oo("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ma();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Jl=function(){function t(){this.li=new Kl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Kl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Wl=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Yl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){oo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){oo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Xl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},th=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),eh=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Gt.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Xi;s.listenOnce(Qi.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ki.NO_ERROR:var e=s.getResponseJson();oo("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ki.TIMEOUT:oo("Connection",'RPC "'+t+'" timed out'),o(new no(eo.DEADLINE_EXCEEDED,"Request time out"));break;case Ki.HTTP_ERROR:var n=s.getStatus();if(oo("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(eo).indexOf(e)>=0?e:eo.UNKNOWN}(r.status);o(new no(a,r.message))}else o(new no(eo.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new no(eo.UNAVAILABLE,"Connection failed."));break;default:co()}}finally{oo("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Gi,i=Mn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Wi({})),this.Fi(o.initMessageHeaders,e),(0,zt.uI)()||(0,zt.b$)()||(0,zt.d)()||(0,zt.w1)()||(0,zt.Mn)()||(0,zt.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");oo("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new th({Ei:function(t){c?oo("Connection","Not sending because WebChannel is closed:",t):(u||(oo("Connection","Opening WebChannel transport."),a.open(),u=!0),oo("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Yi.EventType.OPEN,function(){c||oo("Connection","WebChannel transport opened.")}),h(a,Yi.EventType.CLOSE,function(){c||(c=!0,oo("Connection","WebChannel transport closed"),l.Vi())}),h(a,Yi.EventType.ERROR,function(t){c||(c=!0,ao("Connection","WebChannel transport errored:",t),l.Vi(new no(eo.UNAVAILABLE,"The operation could not be completed")))}),h(a,Yi.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];lo(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){oo("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=ma[t];if(void 0!==e)return Sa(e)}(i),s=r.message;void 0===o&&(o=eo.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new no(o,s)),a.close()}else oo("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ji.STAT_EVENT,function(t){10===t.stat?oo("Connection","Detected buffering proxy"):11===t.stat&&oo("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);oo("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return oo("RestConnection","Received: ",t),t},function(e){throw ao("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Xl[t]},t}());function nh(){return"undefined"!=typeof window?window:null}function rh(){return"undefined"!=typeof document?document:null}function ih(t){return new Qa(t,!0)}var oh=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&oo("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),sh=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new oh(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===eo.RESOURCE_EXHAUSTED?(so(e.toString()),so("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===eo.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new no(eo.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Gt.mG)(t,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return oo("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(oo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),ah=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Gt.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:co()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(lo(void 0===e||"string"==typeof e),Ao.fromBase64String(e||"")):(lo(void 0===e||e instanceof Uint8Array),Ao.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?eo.UNKNOWN:Sa(t.code);return new no(e,t.message||"")}(a);n=new Ba(r,i,o,s||null)}else if("documentChange"in e){i=ru(t,(r=e.documentChange).document.name),o=Xa(r.document.updateTime);var a=new ts({mapValue:{fields:r.document.fields}}),u=(s=ns.newFoundDocument(i,o,a),r.targetIds||[]);n=new Va(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=ru(t,(r=e.documentDelete).document),o=r.readTime?Xa(r.readTime):bo.min(),a=ns.newNoDocument(i,o),n=new Va([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=ru(t,(r=e.documentRemove).document),n=new Va([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return co();var c=e.filter;i=new wa(r=c.count||0),n=new qa(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return bo.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?bo.min():e.readTime?Xa(e.readTime):bo.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=su(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=as(r)?{documents:fu(t,r)}:{query:du(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Wa(t,e.resumeToken):e.snapshotVersion.compareTo(bo.min())>0&&(n.readTime=Ja(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return co()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=su(this.R),e.removeTarget=t,this.cr(e)},e}(sh),uh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Gt.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(lo(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(lo(void 0!==e),t.map(function(t){return function(t,e){var n=Xa(t.updateTime?t.updateTime:e);return n.isEqual(bo.min())&&(n=Xa(e)),new na(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Xa(t.commitTime);return this.listener.Tr(n,e)}return lo(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=su(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return lu(e.R,t)})};this.cr(n)},e}(sh),ch=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Gt.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new no(eo.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===eo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new no(eo.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===eo.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new no(eo.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),lh=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(so(e),this.Vr=!1):oo("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),hh=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Gt.mG)(o,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return wh(this)?(oo("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return(e=ho(t)).Or.add(4),[4,dh(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,fh(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new lh(n,r)};function fh(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:if(!wh(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function dh(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function ph(t,e){var n=ho(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),bh(n)?vh(n):Lh(n).er()&&mh(n,e))}function gh(t,e){var n=ho(t),r=Lh(n);n.$r.delete(e),r.er()&&yh(n,e),0===n.$r.size&&(r.er()?r.ir():wh(n)&&n.Br.set("Unknown"))}function mh(t,e){t.qr.U(e.targetId),Lh(t).mr(e)}function yh(t,e){t.qr.U(e),Lh(t).yr(e)}function vh(t){t.qr=new za({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Lh(t).start(),t.Br.Sr()}function bh(t){return wh(t)&&!Lh(t).tr()&&t.$r.size>0}function wh(t){return 0===ho(t).Or.size}function _h(t){t.qr=void 0}function Sh(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){return t.$r.forEach(function(e,n){mh(t,e)}),[2]})})}function Eh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){return _h(t),bh(t)?(t.Br.Nr(e),vh(t)):t.Br.set("Unknown"),[2]})})}function Th(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Ba&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),oo("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ch(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Va?t.qr.X(e):e instanceof qa?t.qr.rt(e):t.qr.et(e),n.isEqual(bo.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,vl(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Ao.EMPTY_BYTE_STRING,n.snapshotVersion)),yh(t,e);var r=new lc(n.target,e,1,n.sequenceNumber);mh(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return oo("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ch(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Ch(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r=this;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:if(!ec(e))throw e;return t.Or.add(1),[4,dh(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return vl(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Gt.mG)(r,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return oo("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,fh(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function Ih(t,e){return e().catch(function(n){return Ch(t,n,e)})}function xh(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:e=ho(t),n=Fh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return wh(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,_l(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Fh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Ch(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Ah(e)&&kh(e),[2]}})})}function Ah(t){return wh(t)&&!Fh(t).tr()&&t.kr.length>0}function kh(t){Fh(t).start()}function Oh(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){return Fh(t).Ar(),[2]})})}function Nh(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Gt.Jh)(this,function(i){for(e=Fh(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function Ph(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=cc.from(r,e,n),[4,Ih(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,xh(t)];case 2:return o.sent(),[2]}})})}function Dh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e&&Fh(t).pr?[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return _a(r=e.code)&&r!==eo.ABORTED?(n=t.kr.shift(),Fh(t).sr(),[4,Ih(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,xh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ah(t)&&kh(t),[2]}})})}function Rh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return n=ho(t),e?(n.Or.delete(2),[4,fh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,dh(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Lh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ho(t);return r.br(),new ah(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Sh.bind(null,t),Ri:Eh.bind(null,t),_r:Th.bind(null,t)}),t.Mr.push(function(n){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),bh(t)?vh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),_h(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Fh(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=ho(t);return r.br(),new uh(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Oh.bind(null,t),Ri:Dh.bind(null,t),Ir:Nh.bind(null,t),Tr:Ph.bind(null,t)}),t.Mr.push(function(n){return(0,Gt.mG)(e,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,xh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(oo("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Kr}var Mh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Qu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new no(eo.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Uh(t,e){if(so("AsyncQueue",e+": "+t),ec(t))return new no(eo.UNAVAILABLE,e+": "+t);throw t}var jh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||jo.comparator(e.key,n.key)}:function(t,e){return jo.comparator(t.key,e.key)},this.keyedMap=Na(),this.sortedSet=new Ea(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Vh=function(){function t(){this.Qr=new Ea(jo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):co():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),qh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,jh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Rs(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Bh=function(){this.Wr=void 0,this.listeners=[]},Gh=function(){this.queries=new Jc(function(t){return Ls(t)},Rs),this.onlineState="Unknown",this.Gr=new Set};function zh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Gt.Jh)(this,function(c){switch(c.label){case 0:if(n=ho(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Bh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Uh(a,"Initialization of query '"+Fs(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Kh(n),[2]}})})}function Hh(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Gt.Jh)(this,function(a){return n=ho(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function $h(t,e){for(var n=ho(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Kh(n)}function Zh(t,e,n){var r=ho(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Kh(t){t.Gr.forEach(function(t){t.next()})}var Qh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=qh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Jh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Wh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return ru(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?cu(this.R,t.document,!1):ns.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Xa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Wh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||La()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return[4,Al(this.localStore,new Wh(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,kl(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ll(Object.assign({},this.progress),t))]}})})}}();var Yh=function(t){this.key=t},Xh=function(t){this.key=t},tf=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=La(),this.mutatedKeys=La(),this.lo=Us(t),this.fo=new jh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Vh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Is(this.query)&&i.size===this.query.limit?i.last():null,c=xs(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ms(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Is(this.query)||xs(this.query))for(;s.size>this.query.limit;){var l=Is(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return co()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new qh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Vh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=La(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Xh(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Yh(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=La();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return qh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ef=function(t,e,n){this.query=t,this.targetId=e,this.view=n},nf=function(t){this.key=t,this.bo=!1},rf=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Jc(function(t){return Ls(t)},Rs),this.Vo=new Map,this.So=new Set,this.Do=new Ea(jo.comparator),this.Co=new Map,this.No=new Nl,this.xo={},this.Fo=new Map,this.ko=Uc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function of(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:return n=Rf(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Sl(n.localStore,Ps(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,sf(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&ph(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function sf(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Gt.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Tl(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(bf(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Tl(t.localStore,e,!0)];case 1:return i=l.sent(),o=new tf(e,i.Bn),s=o._o(i.documents),a=ja.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),bf(t,n,u.To),c=new ef(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function af(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return n=ho(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!Rs(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,El(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),gh(n.remoteStore,r.targetId),yf(n,r.targetId)}).catch(Gc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return yf(n,r.targetId),[4,El(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function uf(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:r=Lf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ho(t),i=vo.now(),o=e.reduce(function(t,e){return t.add(e.key)},La());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=ua(c,n.get(c.key));null!=l&&s.push(new fa(c.key,l,es(l.value.mapValue),ra.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ea(go)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Sf(r,i.changes)];case 3:return a.sent(),[4,xh(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Uh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function cf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:n=ho(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,bl(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(lo(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?lo(r.bo):t.removedDocuments.size>0&&(lo(r.bo),r.bo=!1))}),[4,Sf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Gc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function lf(t,e,n){var r=ho(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=ho(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Kh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hf(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Gt.Jh)(this,function(c){switch(c.label){case 0:return(r=ho(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ea(jo.comparator)).insert(o,ns.newNoDocument(o,bo.min())),a=La().add(o),u=new Ua(bo.min(),new Map,new Ia(go),s,a),[4,cf(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),_f(r),[3,4];case 2:return[4,El(r.localStore,e,!1).then(function(){return yf(r,e,n)}).catch(Gc)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function ff(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:n=ho(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,yl(n.localStore,e)];case 2:return i=o.sent(),mf(n,r,null),gf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Sf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Gc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function df(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:r=ho(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ho(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return lo(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),mf(r,e,n),gf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Sf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Gc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function pf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:wh((n=ho(t)).remoteStore)||oo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ho(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Uh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function gf(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function mf(t,e,n){var r=ho(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function yf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||vf(t,e)})}function vf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(gh(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),_f(t))}function bf(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yh?(t.No.addReference(o.key,e),wf(t,o)):o instanceof Xh?(oo("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||vf(t,o.key)):co()}}function wf(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(oo("SyncEngine","New document in limbo: "+n),t.So.add(r),_f(t))}function _f(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new jo(To.fromString(e)),r=t.ko.next();t.Co.set(r,new nf(n)),t.Do=t.Do.insert(n,r),ph(t.remoteStore,new lc(Ps(Cs(n.path)),r,2,to.o))}}function Sf(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:return r=ho(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=fl.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Gt.Jh)(this,function(l){switch(l.label){case 0:n=ho(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Ju.forEach(e,function(e){return Ju.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Ju.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!ec(r=l.sent()))throw r;return oo("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Ef(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return(n=ho(t)).currentUser.isEqual(e)?[3,3]:(oo("SyncEngine","User change. New user:",e.toKey()),[4,ml(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new no(eo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Sf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Tf(t,e){var n=ho(t),r=n.Co.get(e);if(r&&r.bo)return La().add(r.key);var i=La(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Cf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return[4,Tl((n=ho(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&bf(n,e.targetId,i.To),i)]}})})}function If(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){return[2,Il((e=ho(t)).localStore).then(function(t){return Sf(e,t)})]})})}function xf(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,o;return(0,Gt.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=ho(t),r=ho(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Ju.resolve(null)})})}((i=ho(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,xh(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(mf(i,e,r||null),gf(i,e),function(t,e){ho(ho(t)._n).Gt(e)}(i.localStore,e)):co(),s.label=4;case 4:return[4,Sf(i,o)];case 5:return s.sent(),[3,7];case 6:oo("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Af(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Gt.Jh)(this,function(c){switch(c.label){case 0:return Rf(n=ho(t)),Lf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,kf(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,Rh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)ph(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return yf(n,e),El(n.localStore,e,!0)}),gh(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,kf(n,a)];case 5:return c.sent(),function(t){var e=ho(t);e.Co.forEach(function(t,n){gh(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Ea(jo.comparator)}(n),n.$o=!1,[4,Rh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function kf(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,Gt.Jh)(this,function(g){switch(g.label){case 0:n=ho(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Sl(n.localStore,Ps(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,Cf(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Cl(n.localStore,a)];case 8:return p=g.sent(),[4,Sl(n.localStore,p)];case 9:return u=g.sent(),[4,sf(n,Of(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function Of(t){return Ts(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Nf(t){var e=ho(t);return ho(ho(e.localStore).persistence).fn()}function Pf(t,e,n,r){return(0,Gt.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Gt.Jh)(this,function(a){switch(a.label){case 0:return(i=ho(t)).$o?(oo("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Il(i.localStore)];case 3:return o=a.sent(),s=Ua.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Sf(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,El(i.localStore,e,!0)];case 6:return a.sent(),yf(i,e,r),[3,8];case 7:co(),a.label=8;case 8:return[2]}})})}function Df(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Gt.Jh)(this,function(f){switch(f.label){case 0:if(!(r=Rf(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(oo("SyncEngine","Adding an already active target "+s),[3,5]):[4,Cl(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,Sl(r.localStore,a)];case 3:return u=f.sent(),[4,sf(r,Of(a),u.targetId,!1)];case 4:f.sent(),ph(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,El(r.localStore,t,!1).then(function(){gh(r.remoteStore,t),yf(r,t)}).catch(Gc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function Rf(t){var e=ho(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hf.bind(null,e),e.vo._r=$h.bind(null,e.eventManager),e.vo.Mo=Zh.bind(null,e.eventManager),e}function Lf(t){var e=ho(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ff.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=df.bind(null,e),e}var Ff=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return this.R=ih(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return gl(this.persistence,new dl,t.initialUser,this.R)},t.prototype.qo=function(t){return new Ml(jl.bs,this.R)},t.prototype.Bo=function(t){return new Jl},t.prototype.terminate=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Mf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Gt.ZT)(e,t),e.prototype.initialize=function(e){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,xl(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Lf(this.Qo.syncEngine)];case 4:return n.sent(),[4,xh(this.Qo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ko=function(t){return gl(this.persistence,new dl,t.initialUser,this.R)},e.prototype.Uo=function(t){return new $c(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=cl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Oc.withCacheSize(this.cacheSizeBytes):Oc.DEFAULT;return new sl(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,nh(),rh(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Jl},e}(Ff),Uf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Gt.ZT)(e,t),e.prototype.initialize=function(e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Ql?(this.sharedClientState.syncEngine={ui:xf.bind(null,n),ai:Pf.bind(null,n),hi:Df.bind(null,n),fn:Nf.bind(null,n),ci:If.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Gt.mG)(r,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return[4,Af(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=nh();if(!Ql.yt(e))throw new no(eo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=cl(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ql(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Mf),jf=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n=this;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return lf(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ef.bind(null,this.syncEngine),[4,Rh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Gh},t.prototype.createDatastore=function(t){var e=ih(t.databaseInfo.databaseId),n=new eh(t.databaseInfo);return function(t,e,n){return new ch(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return lf(s.syncEngine,t,0)},o=Yl.yt()?new Yl:new Wl,new hh(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new rf(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=ho(t),oo("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,dh(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Vf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),qf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Qu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Jh(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new no(eo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Gt.Jh)(this,function(u){switch(u.label){case 0:return n=ho(t),r=su(n.R)+"/documents",i={documents:e.map(function(t){return nu(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){lo(!!e.found);var n=ru(t,e.found.name),r=Xa(e.found.updateTime),i=new ts({mapValue:{fields:e.found.fields}});return ns.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){lo(!!e.missing),lo(!!e.readTime);var n=ru(t,e.missing),r=Xa(e.readTime);return ns.newNoDocument(n,r)}(t,e):co()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());lo(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new va(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=jo.fromPath(n);e.mutations.push(new ba(r,e.precondition(r)))}),[4,function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return n=ho(t),r=su(n.R)+"/documents",i={writes:e.map(function(t){return lu(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw co();e=bo.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new no(eo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ra.updateTime(e):ra.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(bo.min()))throw new no(eo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ra.updateTime(e)}return ra.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Bf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new oh(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Gt.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Gt.Jh)(this,function(r){return t=new qf(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Fo(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!_a(e)}return!1},t}(),Gf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Vl.UNAUTHENTICATED,this.clientId=po.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Gt.mG)(r,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return oo("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new no(eo.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Qu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Gt.mG)(t,void 0,void 0,function(){var t,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Uh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function zf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),oo("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Gt.mG)(i,void 0,void 0,function(){return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,ml(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Hf(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,$f(t)];case 1:return n=i.sent(),oo("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Gt.mG)(this,void 0,void 0,function(){var n,r;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return(n=ho(t)).asyncQueue.verifyOperationInProgress(),oo("RemoteStore","RemoteStore received new credentials"),r=wh(n),n.Or.add(3),[4,dh(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,fh(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function $f(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(oo("FirestoreClient","Using default OfflineComponentProvider"),[4,zf(t,new Ff)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Zf(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(oo("FirestoreClient","Using default OnlineComponentProvider"),[4,Hf(t,new jf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Kf(t){return $f(t).then(function(t){return t.persistence})}function Qf(t){return $f(t).then(function(t){return t.localStore})}function Jf(t){return Zf(t).then(function(t){return t.remoteStore})}function Wf(t){return Zf(t).then(function(t){return t.syncEngine})}function Yf(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return[4,Zf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=of.bind(null,e.syncEngine),n.onUnlisten=af.bind(null,e.syncEngine),n)]}})})}function Xf(t,e,n){var r=this;void 0===n&&(n={});var i=new Qu;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(r,void 0,void 0,function(){var r;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Vf({next:function(o){e.enqueueAndForget(function(){return Hh(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new no(eo.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new no(eo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Qh(Cs(n.path),o,{includeMetadataChanges:!0,so:!0});return zh(t,s)},[4,Yf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function td(t,e,n){var r=this;void 0===n&&(n={});var i=new Qu;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(r,void 0,void 0,function(){var r;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Vf({next:function(n){e.enqueueAndForget(function(){return Hh(t,s)}),n.fromCache&&"server"===r.source?i.reject(new no(eo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Qh(n,o,{includeMetadataChanges:!0,so:!0});return zh(t,s)},[4,Yf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var ed=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},nd=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),rd=new Map,id=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},od=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(Vl.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),sd=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ad=function(){function t(t){var e=this;this.currentUser=Vl.UNAUTHENTICATED,this.oc=new Qu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){oo("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(oo("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(oo("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(lo("string"==typeof n.accessToken),new id(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Gt.mG)(n,void 0,void 0,function(){return(0,Gt.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return lo(null===t||"string"==typeof t),new Vl(t)},t}(),ud=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Vl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),cd=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new ud(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(Vl.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ld(t,e,n){if(!n)throw new no(eo.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function hd(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new no(eo.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function fd(t,e,n,r){if(!0===e&&!0===r)throw new no(eo.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function dd(t){if(!jo.isDocumentKey(t))throw new no(eo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function pd(t){if(jo.isDocumentKey(t))throw new no(eo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function gd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":co()}function md(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new no(eo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=gd(t);throw new no(eo.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function yd(t,e){if(e<=0)throw new no(eo.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var vd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new no(eo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new no(eo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,fd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),bd=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vd({}),this._settingsFrozen=!1,t instanceof nd?(this._databaseId=t,this._credentials=new od):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new no(eo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nd(t.options.projectId)}(t),this._credentials=new ad(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new no(eo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new no(eo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new od;switch(t.type){case"gapi":var e=t.client;return lo(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new cd(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new no(eo.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=rd.get(this))&&(oo("ComponentProvider","Removing Datastore"),rd.delete(this),t.terminate()),Promise.resolve();var t},t}(),wd=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Sd(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),_d=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Sd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Cs(r))||this)._path=r,i.type="collection",i}return(0,Gt.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new wd(this.firestore,null,new jo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(_d);function Ed(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,zt.m9)(t),ld("collection","path",e),t instanceof bd)return pd(n=To.fromString.apply(To,(0,Gt.ev)([e],r))),new Sd(t,null,n);if(!(t instanceof wd||t instanceof Sd))throw new no(eo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return pd(n=To.fromString.apply(To,(0,Gt.ev)([t.path],r)).child(To.fromString(e))),new Sd(t.firestore,null,n)}function Td(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,zt.m9)(t),1===arguments.length&&(e=po.u()),ld("doc","path",e),t instanceof bd)return dd(n=To.fromString.apply(To,(0,Gt.ev)([e],r))),new wd(t,null,new jo(n));if(!(t instanceof wd||t instanceof Sd))throw new no(eo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return dd(n=t._path.child(To.fromString.apply(To,(0,Gt.ev)([e],r)))),new wd(t.firestore,t instanceof Sd?t.converter:null,new jo(n))}function Cd(t,e){return t=(0,zt.m9)(t),e=(0,zt.m9)(e),(t instanceof wd||t instanceof Sd)&&(e instanceof wd||e instanceof Sd)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Id(t,e){return t=(0,zt.m9)(t),e=(0,zt.m9)(e),t instanceof _d&&e instanceof _d&&t.firestore===e.firestore&&Rs(t._query,e._query)&&t.converter===e.converter}var xd=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new oh(this,"async_queue_retry"),this.Tc=function(){var e=rh();e&&oo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=rh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=rh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ec(t=n.sent()))throw t;return oo("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,so("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=Mh.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&co()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,Gt.mG)(this,void 0,void 0,function(){var t;return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Ad(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Qu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var kd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new xd,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Gt.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Nd(this),this._firestoreClient.terminate()},e}(bd);function Od(t){return t._firestoreClient||Nd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Nd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new ed(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Gf(t._credentials,t._queue,r)}function Pd(t,e,n){var r=this,i=new Qu;return t.asyncQueue.enqueue(function(){return(0,Gt.mG)(r,void 0,void 0,function(){var r;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,zf(t,n)];case 1:return o.sent(),[4,Hf(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===eo.FAILED_PRECONDITION||t.code===eo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function Dd(t){if(t._initialized||t._terminated)throw new no(eo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Rd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new no(eo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Io(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Ld=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Ao.fromBase64String(e))}catch(e){throw new no(eo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Ao.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Fd=function(t){this._methodName=t},Md=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new no(eo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new no(eo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return go(this._lat,t._lat)||go(this._long,t._long)},t}(),Ud=/^__.*__$/,jd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new fa(t,this.data,this.fieldMask,e,this.fieldTransforms):new ha(t,this.data,e,this.fieldTransforms)},t}(),Vd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new fa(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function qd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw co()}}var Bd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return up(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(qd(this.Cc)&&Ud.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),Gd=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ih(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Bd({Cc:t,methodName:e,Bc:n,path:Io.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function zd(t){var e=t._freezeSettings(),n=ih(t._databaseId);return new Gd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Hd(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);ip("Data must be an object, but it was:",s,r);var a,u,c=np(r,s);if(o.merge)a=new xo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=op(e,f[h],n);if(!s.contains(d))throw new no(eo.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");cp(l,d)||l.push(d)}a=new xo(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new jd(new ts(c),a,u)}var $d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Fd);function Zd(t,e,n){return new Bd({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Kd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new ea(t.path,new Zs)},e.prototype.isEqual=function(t){return t instanceof e},e}(Fd),Qd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Zd(this,t,!0),n=this.Uc.map(function(t){return ep(t,e)}),r=new Ks(n);return new ea(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Fd),Jd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Zd(this,t,!0),n=this.Uc.map(function(t){return ep(t,e)}),r=new Js(n);return new ea(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Fd),Wd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,Gt.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ys(t.R,Bs(t.R,this.Kc));return new ea(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Fd);function Yd(t,e,n,r){var i=t.qc(1,e,n);ip("Data must be an object, but it was:",i,r);var o=[],s=ts.empty();_o(r,function(t,r){var a=ap(e,t,n);r=(0,zt.m9)(r);var u=i.$c(a);if(r instanceof $d)o.push(a);else{var c=ep(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new xo(o);return new Vd(s,a,i.fieldTransforms)}function Xd(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[op(e,r,n)],u=[i];if(o.length%2!=0)throw new no(eo.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(op(e,o[c])),u.push(o[c+1]);for(var l=[],h=ts.empty(),f=a.length-1;f>=0;--f)if(!cp(l,a[f])){var d=a[f],p=u[f];p=(0,zt.m9)(p);var g=s.$c(d);if(p instanceof $d)l.push(d);else{var m=ep(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new xo(l);return new Vd(h,y,s.fieldTransforms)}function tp(t,e,n,r){return void 0===r&&(r=!1),ep(n,t.qc(r?4:3,e))}function ep(t,e){if(rp(t=(0,zt.m9)(t)))return ip("Unsupported field value:",e,t),np(t,e);if(t instanceof Fd)return function(t,e){if(!qd(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=ep(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bs(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=vo.fromDate(t);return{timestampValue:Ja(e.R,n)}}if(t instanceof vo)return n=new vo(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ja(e.R,n)};if(t instanceof Md)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ld)return{bytesValue:Wa(e.R,t._byteString)};if(t instanceof wd){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:tu(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+gd(t))}(t,e)}function np(t,e){var n={};return So(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(t,function(t,r){var i=ep(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function rp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof vo||t instanceof Md||t instanceof Ld||t instanceof wd||t instanceof Fd)}function ip(t,e,n){if(!rp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=gd(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function op(t,e,n){if((e=(0,zt.m9)(e))instanceof Rd)return e._internalPath;if("string"==typeof e)return ap(t,e);throw up("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var sp=new RegExp("[~\\*/\\[\\]]");function ap(t,e,n){if(e.search(sp)>=0)throw up("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Rd.bind.apply(Rd,(0,Gt.ev)([void 0],e.split(".")))))._internalPath}catch(ug){throw up("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function up(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new no(eo.INVALID_ARGUMENT,(a+=". ")+t+u)}function cp(t,e){return t.some(function(t){return t.isEqual(e)})}var lp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new wd(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new hp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(fp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(lp);function fp(t,e){return"string"==typeof e?ap(t,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}var dp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),pp=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Gt.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(fp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(lp),gp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(pp),mp=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new dp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new gp(n._firestore,n._userDataWriter,r.key,r,new dp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new no(eo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new gp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new dp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new gp(t._firestore,t._userDataWriter,e.doc.key,e.doc,new dp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:yp(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function yp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return co()}}function vp(t,e){return t instanceof pp&&e instanceof pp?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof mp&&e instanceof mp&&t._firestore===e._firestore&&Id(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function bp(t){if(xs(t)&&0===t.explicitOrderBy.length)throw new no(eo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wp=function(){};function _p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Sp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){var e=zd(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new no(eo.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){kp(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Ap(r,t,l[c]));a={arrayValue:{values:u}}}else a=Ap(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||kp(s,o),a=tp(n,"where",s,"in"===o||"not-in"===o);var h=us.create(i,o,a);return function(t,e){if(e.g()){var n=ks(t);if(null!==n&&!n.isEqual(e.field))throw new no(eo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=As(t);null!==r&&Op(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new no(eo.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new _d(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(wp),Ep=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new no(eo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new no(eo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new bs(e,n);return function(t,e){if(null===As(t)){var n=ks(t);null!==n&&Op(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new _d(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Es(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(wp),Tp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){return new _d(t.firestore,t.converter,Ds(t._query,this.zc,this.Hc))},e}(wp),Cp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){var e=xp(t,this.type,this.Jc,this.Yc);return new _d(t.firestore,t.converter,function(t,e){return new Es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(wp),Ip=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Gt.ZT)(e,t),e.prototype._apply=function(t){var e=xp(t,this.type,this.Jc,this.Yc);return new _d(t.firestore,t.converter,function(t,e){return new Es(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(wp);function xp(t,e,n,r){if(n[0]=(0,zt.m9)(n[0]),n[0]instanceof lp)return function(t,e,n,r,i){if(!r)throw new no(eo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ns(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Zo(e,r.key));else{var c=r.data.field(u.field);if(Do(c))throw new no(eo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new no(eo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ys(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=zd(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new no(eo.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new no(eo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Os(t)&&-1!==c.indexOf("/"))throw new no(eo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(To.fromString(c));if(!jo.isDocumentKey(l))throw new no(eo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new jo(l);a.push(Zo(e,h))}else{var f=tp(n,r,c);a.push(f)}}return new ys(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Ap(t,e,n){if("string"==typeof(n=(0,zt.m9)(n))){if(""===n)throw new no(eo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Os(e)&&-1!==n.indexOf("/"))throw new no(eo.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(To.fromString(n));if(!jo.isDocumentKey(r))throw new no(eo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Zo(t,new jo(r))}if(n instanceof wd)return Zo(t,n._key);throw new no(eo.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+gd(n)+".")}function kp(t,e){if(!Array.isArray(t)||0===t.length)throw new no(eo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new no(eo.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Op(t,e,n){if(!n.isEqual(e))throw new no(eo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Np=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Vo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return No(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Po(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw co()}},t.prototype.convertObject=function(t,e){var n=this,r={};return _o(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Md(No(t.latitude),No(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ro(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Lo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Oo(t);return new vo(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=To.fromString(t);lo(Cu(n));var r=new nd(n.get(1),n.get(3)),i=new jo(n.popFirst(5));return r.isEqual(e)||so("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Pp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Gt.ZT)(e,t),e.prototype.convertBytes=function(t){return new Ld(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new wd(this.firestore,null,e)},e}(Np),Rp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=zd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Lp(t,this._firestore),i=Pp(r.converter,e,n),o=Hd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ra.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Lp(t,this._firestore);return o="string"==typeof(e=(0,zt.m9)(e))||e instanceof Rd?Xd(this._dataReader,"WriteBatch.update",s._key,e,n,r):Yd(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,ra.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Lp(t,this._firestore);return this._mutations=this._mutations.concat(new va(e._key,ra.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new no(eo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Lp(t,e){if((t=(0,zt.m9)(t)).firestore!==e)throw new no(eo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Gt.ZT)(e,t),e.prototype.convertBytes=function(t){return new Ld(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new wd(this.firestore,null,e)},e}(Np);function Mp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=md(t,wd);var o=md(t.firestore,kd),s=zd(o);return jp(o,[("string"==typeof(e=(0,zt.m9)(e))||e instanceof Rd?Xd(s,"updateDoc",t._key,e,n,r):Yd(s,"updateDoc",t._key,e)).toMutation(t._key,ra.exists(!0))])}function Up(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,zt.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Ad(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Ad(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof wd)c=md(t.firestore,kd),l=Cs(t._key.path),u={next:function(e){i[a]&&i[a](Vp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=md(t,_d);c=md(d.firestore,kd),l=d._query;var p=new Fp(c);u={next:function(t){i[a]&&i[a](new mp(c,p,d,t))},error:i[a+1],complete:i[a+2]},bp(t._query)}return function(t,e,n,r){var i=this,o=new Vf(r),s=new Qh(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(i,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=zh,[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(i,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=Hh,[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(Od(c),l,h,u)}function jp(t,e){return function(t,e){var n=this,r=new Qu;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return n=uf,[4,Wf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Od(t),e)}function Vp(t,e,n){var r=n.docs.get(e._key),i=new Fp(t);return new pp(t,i,e._key,r,new dp(n.hasPendingWrites,n.fromCache),e.converter)}var qp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Gt.ZT)(e,t),e.prototype.get=function(e){var n=this,r=Lp(e,this._firestore),i=new Fp(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new pp(n._firestore,i,r._key,t._document,new dp(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=zd(t)}return t.prototype.get=function(t){var e=this,n=Lp(t,this._firestore),r=new Dp(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return co();var i=t[0];if(i.isFoundDocument())return new lp(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new lp(e._firestore,r,n._key,null,n.converter);throw co()})},t.prototype.set=function(t,e,n){var r=Lp(t,this._firestore),i=Pp(r.converter,e,n),o=Hd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Lp(t,this._firestore);return o="string"==typeof(e=(0,zt.m9)(e))||e instanceof Rd?Xd(this._dataReader,"Transaction.update",s._key,e,n,r):Yd(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Lp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Bp(){if("undefined"==typeof Uint8Array)throw new no(eo.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Gp(){if("undefined"==typeof atob)throw new no(eo.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var zp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Gp(),new t(Ld.fromBase64String(e))},t.fromUint8Array=function(e){return Bp(),new t(Ld.fromUint8Array(e))},t.prototype.toBase64=function(){return Gp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Bp(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Hp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Dd(t=md(t,kd));var n=Od(t),r=t._freezeSettings(),i=new jf;return Pd(n,i,new Mf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Dd(t=md(t,kd));var e=Od(t),n=t._freezeSettings(),r=new jf;return Pd(e,r,new Uf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new no(eo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Qu;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Gt.mG)(this,void 0,void 0,function(){return(0,Gt.Jh)(this,function(e){switch(e.label){case 0:return Yu.yt()?[4,Yu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(cl(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),$p=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof nd||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||ao("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=md(t,bd))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&ao("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,zt.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new no(eo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new sd(new id(o,new Vl(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return[4,Kf(t)];case 1:return e=r.sent(),[4,Jf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ho(t);return e.Or.delete(0),fh(e)}(n))]}})})})}(Od(md(this._delegate,kd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e,n;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return[4,Kf(t)];case 1:return e=r.sent(),[4,Jf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Gt.mG)(this,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return(e=ho(t)).Or.add(0),[4,dh(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(Od(md(this._delegate,kd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&fd("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Qu;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(e,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(r){switch(r.label){case 0:return e=pf,[4,Wf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Od(md(this._delegate,kd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Vf(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ho(t).Gr.add(e),e.next()},[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var e;return(0,Gt.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){ho(t).Gr.delete(e)},[4,Yf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(Od(t=md(t,kd)),Ad(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new no(eo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new sg(this,Ed(this._delegate,t))}catch(t){throw Yp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Wp(this,Td(this._delegate,t))}catch(t){throw Yp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new rg(this,function(t,e){if(t=md(t,bd),ld("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new no(eo.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new _d(t,null,function(t){return new Es(To.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Yp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Qu;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Zf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new Bf(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(Od(t),function(n){return e(new qp(t,n))})}(this._delegate,function(n){return t(new Kp(e,n))})},t.prototype.batch=function(){var t=this;return Od(this._delegate),new Qp(new Rp(this._delegate,function(e){return jp(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new no(eo.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new no(eo.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Zp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Gt.ZT)(e,t),e.prototype.convertBytes=function(t){return new zp(new Ld(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Wp.tu(e,this.firestore,null)},e}(Np),Kp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Zp(t)}return t.prototype.get=function(t){var e=this,n=ag(t);return this._delegate.get(n).then(function(t){return new eg(e._firestore,new pp(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=ag(t);return n?(hd("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=ag(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Gt.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=ag(t);return this._delegate.delete(e),this},t}(),Qp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=ag(t);return n?(hd("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=ag(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Gt.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=ag(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Jp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new gp(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new ng(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Zp(e),n),i.set(n,o)),o},t}();Jp.nu=new WeakMap;var Wp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zp(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new no(eo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new wd(n._delegate,r,new jo(e)))},t.tu=function(e,n,r){return new t(n,new wd(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new sg(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new sg(this.firestore,Ed(this._delegate,t))}catch(t){throw Yp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,zt.m9)(t))instanceof wd&&Cd(this._delegate,t)},t.prototype.set=function(t,e){e=hd("DocumentReference.set",e);try{return function(t,e,n){t=md(t,wd);var r=md(t.firestore,kd),i=Pp(t.converter,e,n);return jp(r,[Hd(zd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ra.none())])}(this._delegate,t,e)}catch(t){throw Yp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Mp(this._delegate,t):Mp.apply(void 0,(0,Gt.ev)([this._delegate,t,e],n))}catch(t){throw Yp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return jp(md((t=this._delegate).firestore,kd),[new va(t._key,ra.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Xp(e),i=tg(e,function(e){return new eg(t.firestore,new pp(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return Up(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=md(t,wd);var e=md(t.firestore,kd),n=Od(e),r=new Fp(e);return function(t,e){var n=this,r=new Qu;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i;return(0,Gt.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ho(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new no(eo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Uh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Qf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new pp(e,r,t._key,n,new dp(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=md(t,wd);var e=md(t.firestore,kd);return Xf(Od(e),t._key,{source:"server"}).then(function(n){return Vp(e,t,n)})}(this._delegate):function(t){t=md(t,wd);var e=md(t.firestore,kd);return Xf(Od(e),t._key).then(function(n){return Vp(e,t,n)})}(this._delegate)).then(function(t){return new eg(e.firestore,new pp(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Jp.eu(this.firestore,e):null))},t}();function Yp(t,e,n){return t.message=t.message.replace(e,n),t}function Xp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ad(r))return r}return{}}function tg(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ad(t[0])?t[0]:Ad(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var eg=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Wp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return vp(this._delegate,t._delegate)},t}(),ng=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Gt.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(eg),rg=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,_p(this._delegate,function(t,e,n){var r=e,i=fp("where",t);return new Sp(i,r,n)}(e,n,r)))}catch(e){throw Yp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,_p(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=fp("orderBy",t);return new Ep(r,n)}(e,n)))}catch(e){throw Yp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,_p(this._delegate,function(t){return yd("limit",t),new Tp("limit",t,"F")}(e)))}catch(e){throw Yp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,_p(this._delegate,function(t){return yd("limitToLast",t),new Tp("limitToLast",t,"L")}(e)))}catch(e){throw Yp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_p(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cp("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Yp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_p(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cp("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Yp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_p(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ip("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Yp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,_p(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ip("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Yp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Id(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=md(t,_d);var e=md(t.firestore,kd),n=Od(e),r=new Fp(e);return function(t,e){var n=this,r=new Qu;return t.asyncQueue.enqueueAndForget(function(){return(0,Gt.mG)(n,void 0,void 0,function(){var n;return(0,Gt.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Gt.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Gt.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Tl(t,e,!0)];case 1:return a=u.sent(),r=new tf(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Uh(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Qf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new mp(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=md(t,_d);var e=md(t.firestore,kd),n=Od(e),r=new Fp(e);return td(n,t._query,{source:"server"}).then(function(n){return new mp(e,r,t,n)})}(this._delegate):function(t){t=md(t,_d);var e=md(t.firestore,kd),n=Od(e),r=new Fp(e);return bp(t._query),td(n,t._query).then(function(n){return new mp(e,r,t,n)})}(this._delegate)).then(function(t){return new og(e.firestore,new mp(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Xp(e),i=tg(e,function(e){return new og(t.firestore,new mp(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return Up(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?Jp.eu(this.firestore,e):null))},t}(),ig=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new ng(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),og=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new rg(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new ng(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new ig(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new ng(n._firestore,r))})},t.prototype.isEqual=function(t){return vp(this._delegate,t._delegate)},t}(),sg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Gt.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Wp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Wp(this.firestore,void 0===t?Td(this._delegate):Td(this._delegate,t))}catch(t){throw Yp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=md(t.firestore,kd),r=Td(t),i=Pp(t.converter,e);return jp(n,[Hd(zd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ra.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Wp(e.firestore,t)})},e.prototype.isEqual=function(t){return Cd(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Jp.eu(this.firestore,t):null))},e}(rg);function ag(t){return md(t,wd)}var ug,cg=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Rd.bind.apply(Rd,(0,Gt.ev)([void 0],t)))}return t.documentId=function(){return new t(Io.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,zt.m9)(t))instanceof Rd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),lg=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Kd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new $d("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qd("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Wd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),hg=n(6034),fg={Firestore:$p,GeoPoint:Md,Timestamp:vo,Blob:zp,Transaction:Kp,WriteBatch:Qp,DocumentReference:Wp,DocumentSnapshot:eg,Query:rg,QueryDocumentSnapshot:ng,QuerySnapshot:og,CollectionReference:sg,FieldPath:cg,FieldValue:lg,setLogLevel:function(t){ro.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new hg.wA("firestore",function(t){return function(t,e){return new $p(t,new kd(t,e),new Hp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},fg)))})(ug=Bt.Z),ug.registerVersion("@firebase/firestore","2.3.8");var dg=n(9765),pg=(n(6682),n(5345));function gg(t,e){return"function"==typeof e?n=>n.pipe(gg((n,r)=>(0,_t.D)(t(n,r)).pipe((0,Nt.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new mg(t))}class mg{constructor(t){this.project=t}call(t,e){return e.subscribe(new yg(t,this.project))}}class yg extends pg.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new pg.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,pg.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}n(7771);var vg=n(5319),bg=n(7971);n(8858);const wg=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),_g=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var Sg=n(9193);function Eg(t){return e=>0===t?(0,Sg.c)():e.lift(new Tg(t))}class Tg{constructor(t){if(this.total=t,this.total<0)throw new _g}call(t,e){return e.subscribe(new Cg(t,this.total))}}class Cg extends xt.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ig(t=null){return e=>e.lift(new xg(t))}class xg{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Ag(t,this.defaultValue))}}class Ag extends xt.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function kg(t=Pg){return e=>e.lift(new Og(t))}class Og{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Ng(t,this.errorFactory))}}class Ng extends xt.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(ug){t=ug}this.destination.error(t)}}}function Pg(){return new wg}var Dg=n(4487);function Rg(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Mt((e,n)=>t(e,n,r)):Dg.y,Eg(1),n?Ig(e):kg(()=>new wg))}n(3101);const Lg=new r.OlP("angularfire2.auth.use-emulator");function Fg(t,e){return function(t,e=bt.z){return new wt.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Mg(t,e){return Fg(t,e).pipe((0,Nt.U)(t=>({payload:t,type:"query"})))}function Ug(t,e){return Mg(t,e).pipe(It(void 0),At(),(0,Nt.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function jg(t,e,n){return Ug(t,n).pipe(Pt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Vg(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Vg(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Vg(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new Lt(void 0,void 0)),(0,Nt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Vg(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function qg(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Bg{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Ug(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Nt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(It(void 0),At(),Mt(([t,e])=>e.length>0||!t),(0,Nt.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Pt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=qg(t);return jg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Mg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,_t.D)(this.query.get(t)).pipe((0,Vt.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Gg(this.ref.doc(t),this.afs)}}class Gg{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Qg(n,e);return new Bg(r,i,this.afs)}snapshotChanges(){return Fg(this.ref,this.afs.schedulers.outsideAngular).pipe(It(void 0),At(),(0,Nt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Nt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,_t.D)(this.ref.get(t)).pipe((0,Vt.QV)(this.afs.schedulers.insideAngular))}}class zg{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Ug(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Mt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Ug(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Pt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=qg(t);return jg(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Mg(this.query,this.afs.schedulers.outsideAngular).pipe((0,Nt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,_t.D)(this.query.get(t)).pipe((0,Vt.QV)(this.afs.schedulers.insideAngular))}}const Hg=new r.OlP("angularfire2.enableFirestorePersistence"),$g=new r.OlP("angularfire2.firestore.persistenceSettings"),Zg=new r.OlP("angularfire2.firestore.settings"),Kg=new r.OlP("angularfire2.firestore.use-emulator");function Qg(t,e=(t=>t)){return{query:e(t),ref:t}}let Jg,Wg=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new vt.HU(o),this.keepUnstableUntilFirst=(0,vt.ss)(this.schedulers);const c=(0,vt.on)(t,o,e);!qt.Z.auth&&u&&(0,vt.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,vt.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!function(t){return"server"===t}(i)){const e=()=>{try{return(0,_t.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(ug){return"undefined"!=typeof console&&console.warn(ug),(0,St.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,St.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Qg(n,e),o=this.schedulers.ngZone.run(()=>r);return new Bg(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new zg(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Gg(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vt.Dh),r.LFG(vt.xv,8),r.LFG(Hg,8),r.LFG(Zg,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG($g,8),r.LFG(Kg,8),r.LFG(Lg,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(vt.Dh),r.LFG(vt.xv,8),r.LFG(Hg,8),r.LFG(Zg,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG($g,8),r.LFG(Kg,8),r.LFG(Lg,8))},token:t,providedIn:"any"}),t})(),Yg=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Hg,useValue:!0},{provide:$g,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[Wg]}),t})();class Xg extends dg.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new bg.N;return this._value}next(t){super.next(this._value=t)}}try{Jg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(Zd){Jg=!1}let tm=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Jg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.Lbi))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(r.Lbi))},token:t,providedIn:"root"}),t})();"undefined"!=typeof Element&&Element;const em="cdk-high-contrast-black-on-white",nm="cdk-high-contrast-white-on-black",rm="cdk-high-contrast-active";let im=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,r=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),r){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(rm),t.remove(em),t.remove(nm),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(rm),t.add(em)):2===e&&(t.add(rm),t.add(nm))}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(tm),r.LFG(s))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(tm),r.LFG(s))},token:t,providedIn:"root"}),t})(),om=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();const sm=new r.GfV("12.1.1");function am(){return"undefined"!=typeof window&&void 0!==window.document}function um(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}let cm=(t,e)=>!1,lm=(t,e)=>!1,hm=(t,e,n)=>[];const fm=um();(fm||"undefined"!=typeof Element)&&(cm=am()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),lm=(()=>{if(fm||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):lm}})(),hm=(t,e,n)=>{let r=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)r.push(n[t])}else{const n=t.querySelector(e);n&&r.push(n)}return r});function dm(t,e,n){return n?e+":"+n+";":""}function pm(t){let e="";for(let n=0;n<t.style.length;n++){const r=t.style.item(n);e+=dm(0,r,t.style.getPropertyValue(r))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=dm(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function gm(t,e,n){t.style&&(Object.keys(e).forEach(r=>{const i=vm(r);n&&!n.hasOwnProperty(r)&&(n[r]=t.style[i]),t.style[i]=e[r]}),um()&&pm(t))}function mm(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=vm(e);t.style[n]=""}),um()&&pm(t))}const ym=/-+([a-z0-9])/g;function vm(t){return t.replace(ym,(...t)=>t[1].toUpperCase())}class bm{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let r=bm.initialStylesByElement.get(t);r||bm.initialStylesByElement.set(t,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&gm(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(gm(this._element,this._initialStyles),this._endStyles&&(gm(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(bm.initialStylesByElement.delete(this._element),this._startStyles&&(mm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(mm(this._element,this._endStyles),this._endStyles=null),gm(this._element,this._initialStyles),this._state=3)}}bm.initialStylesByElement=new WeakMap;const wm=new r.GfV("12.1.1"),_m=new r.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let Sm,Em=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return(0,r.X6Q)()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&wm.full!==sm.full&&console.warn("The Angular Material version ("+wm.full+") does not match the Angular CDK version ("+sm.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(im),r.LFG(_m,8),r.LFG(s))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[om],om]}),t})();function Tm(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}try{Sm="undefined"!=typeof Intl}catch(Zd){Sm=!1}var Cm=n(205),Im=n(9796),xm=n(1555);function Am(t,e){return new wt.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,_t.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}var km=n(3342);function Om(t){return function(e){const n=new Nm(t),r=e.lift(n);return n.caught=r}}class Nm{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Pm(t,this.selector,this.caught))}}class Pm extends pg.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new pg.IY(this);this.add(r);const i=(0,pg.ft)(n,r);i!==r&&this.add(i)}}}function Dm(t){return e=>e.lift(new Rm(t))}class Rm{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Lm(t,this.callback))}}class Lm extends xt.L{constructor(t,e){super(t),this.add(new vg.w(e))}}var Fm=n(8819),Mm=n(9773);function Um(t,e){return(0,Mm.zg)(t,e,1)}class jm{}class Vm{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Vm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Vm;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Vm?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class qm{encodeKey(t){return Bm(t)}encodeValue(t){return Bm(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Bm(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Gm(t){return`${t}`}class zm{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new qm,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new zm({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Gm(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(Gm(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Hm{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function $m(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Zm(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Km(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Qm{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Vm),this.context||(this.context=new Hm),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new zm,this.urlWithParams=e}serializeBody(){return null===this.body?null:$m(this.body)||Zm(this.body)||Km(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof zm?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Km(this.body)?null:Zm(this.body)?this.body.type||null:$m(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof zm?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let u=t.headers||this.headers,c=t.params||this.params;const l=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),u)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new Qm(n,r,o,{params:c,headers:u,context:l,reportProgress:a,responseType:i,withCredentials:s})}}var Jm=(()=>((Jm=Jm||{})[Jm.Sent=0]="Sent",Jm[Jm.UploadProgress=1]="UploadProgress",Jm[Jm.ResponseHeader=2]="ResponseHeader",Jm[Jm.DownloadProgress=3]="DownloadProgress",Jm[Jm.Response=4]="Response",Jm[Jm.User=5]="User",Jm))();class Wm extends class{constructor(t,e=200,n="OK"){this.headers=t.headers||new Vm,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=Jm.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Wm({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function Ym(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Xm=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof Qm)r=t;else{let i,o;i=n.headers instanceof Vm?n.headers:new Vm(n.headers),n.params&&(o=n.params instanceof zm?n.params:new zm({fromObject:n.params})),r=new Qm(t,e,void 0!==n.body?n.body:null,{headers:i,context:n.context,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=(0,St.of)(r).pipe(Um(t=>this.handler.handle(t)));if(t instanceof Qm||"events"===n.observe)return i;const o=i.pipe(Mt(t=>t instanceof Wm));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe((0,Nt.U)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe((0,Nt.U)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe((0,Nt.U)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe((0,Nt.U)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new zm).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Ym(n,e))}post(t,e,n={}){return this.request("POST",t,Ym(n,e))}put(t,e,n={}){return this.request("PUT",t,Ym(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(jm))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ty=["*"];function ey(t){return Error(`Unable to find icon with the name "${t}"`)}function ny(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function ry(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class iy{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let oy=(()=>{class t{constructor(t,e,n,r){this._httpClient=t,this._sanitizer=e,this._errorHandler=r,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,r){return this._addSvgIconConfig(t,e,new iy(n,null,r))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,i){const o=this._sanitizer.sanitize(r.q3G.HTML,n);if(!o)throw ry(n);return this._addSvgIconConfig(t,e,new iy("",o,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new iy(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(r.q3G.HTML,e);if(!i)throw ry(e);return this._addSvgIconSetConfig(t,new iy("",i,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,t);if(!e)throw ny(t);const n=this._cachedIconsByUrl.get(e);return n?(0,St.of)(sy(n)):this._loadSvgIconFromConfig(new iy(t,null)).pipe((0,km.b)(t=>this._cachedIconsByUrl.set(e,t)),(0,Nt.U)(t=>sy(t)))}getNamedSvgIcon(t,e=""){const n=ay(e,t);let r=this._svgIconConfigs.get(n);if(r)return this._getSvgFromConfig(r);if(r=this._getIconConfigFromResolvers(e,t),r)return this._svgIconConfigs.set(n,r),this._getSvgFromConfig(r);const i=this._iconSetConfigs.get(e);return i?this._getSvgFromIconSetConfigs(t,i):(0,Cm._)(ey(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,St.of)(sy(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Nt.U)(t=>sy(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?(0,St.of)(n):function(...t){if(1===t.length){const e=t[0];if((0,Im.k)(e))return Am(e,null);if((0,xm.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Am(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Am(t=1===t.length&&(0,Im.k)(t[0])?t[0]:t,null).pipe((0,Nt.U)(t=>e(...t)))}return Am(t,null)}(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(Om(e=>{const n=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),(0,St.of)(null)})))).pipe((0,Nt.U)(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw ey(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.svgText&&r.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(r),n=this._extractSvgIconFromSet(e,t,r.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,km.b)(e=>t.svgText=e),(0,Nt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,St.of)(null):this._fetchIcon(t).pipe((0,km.b)(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const r=t.querySelector(`[id="${e}"]`);if(!r)return null;const i=r.cloneNode(!0);if(i.removeAttribute("id"),"svg"===i.nodeName.toLowerCase())return this._setSvgAttributes(i,n);if("symbol"===i.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(i),n);const o=this._svgElementFromString("<svg></svg>");return o.appendChild(i),this._setSvgAttributes(o,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let r=0;r<n.length;r++){const{name:t,value:i}=n[r];"id"!==t&&e.setAttribute(t,i)}for(let r=0;r<t.childNodes.length;r++)t.childNodes[r].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[r].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:i}=t,o=null!==(e=null==i?void 0:i.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(r.q3G.RESOURCE_URL,n);if(!s)throw ny(n);const a=this._inProgressUrlFetches.get(s);if(a)return a;const u=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Dm(()=>this._inProgressUrlFetches.delete(s)),(0,Fm.B)());return this._inProgressUrlFetches.set(s,u),u}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(ay(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let r=0;r<this._resolvers.length;r++){const i=this._resolvers[r](e,t);if(i)return(n=i).url&&n.options?new iy(i.url,null,i.options):new iy(i,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Xm,8),r.LFG(ht),r.LFG(s,8),r.LFG(r.qLn))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(Xm,8),r.LFG(ht),r.LFG(s,8),r.LFG(r.qLn))},token:t,providedIn:"root"}),t})();function sy(t){return t.cloneNode(!0)}function ay(t,e){return t+":"+e}const uy=Tm(class{constructor(t){this._elementRef=t}}),cy=new r.OlP("mat-icon-location",{providedIn:"root",factory:function(){const t=(0,r.f3M)(s),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),ly=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],hy=ly.map(t=>`[${t}]`).join(", "),fy=/^url\(['"]?#(.*?)['"]?\)$/;let dy=(()=>{class t extends uy{constructor(t,e,n,r,i){super(t),this._iconRegistry=e,this._location=r,this._errorHandler=i,this._inline=!1,this._currentIconFetch=vg.w.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){var e;this._inline=null!=(e=t)&&"false"!=`${e}`}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let r=0;r<e.length;r++)e[r].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(hy),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let r=0;r<e.length;r++)ly.forEach(t=>{const i=e[r],o=i.getAttribute(t),s=o?o.match(fy):null;if(s){let e=n.get(i);e||(e=[],n.set(i,e)),e.push({name:t,value:s[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(Eg(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.SBq),r.Y36(oy),r.$8M("aria-hidden"),r.Y36(cy),r.Y36(r.qLn))},t.\u0275cmp=r.Xpm({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(r.uIk("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),r.ekj("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[r.qOj],ngContentSelectors:ty,decls:1,vars:0,template:function(t,e){1&t&&(r.F$t(),r.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),py=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Em],Em]}),t})();class gy extends xt.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class my extends xt.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var yy=n(7444);function vy(t,e,n,r,i=new my(t,n,r)){if(!i.closed)return e instanceof wt.y?e.subscribe(i):(0,yy.s)(e)(i)}var by=n(6693);const wy={};class _y{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Sy(t,this.resultSelector))}}class Sy extends gy{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(wy),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(vy(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===wy?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function Ey(t){return new wt.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,_t.D)(n):(0,Sg.c)()).subscribe(e)})}var Ty=n(2441);function Cy(t){return function(e){return 0===t?(0,Sg.c)():e.lift(new Iy(t))}}class Iy{constructor(t){if(this.total=t,this.total<0)throw new _g}call(t,e){return e.subscribe(new xy(t,this.total))}}class xy extends xt.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}var Ay=n(1307);class ky{constructor(t,e){this.id=t,this.url=e}}class Oy extends ky{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ny extends ky{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Py extends ky{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Dy extends ky{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ry extends ky{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ly extends ky{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fy extends ky{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class My extends ky{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uy extends ky{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jy{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Vy{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qy{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class By{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gy{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zy{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hy{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $y="primary";class Zy{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ky(t){return new Zy(t)}function Qy(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Jy(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Wy(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Yy(t[i],e[i]))return!1;return!0}function Yy(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Xy(t){return Array.prototype.concat.apply([],t)}function tv(t){return t.length>0?t[t.length-1]:null}function ev(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function nv(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,_t.D)(Promise.resolve(t)):(0,St.of)(t)}const rv={exact:function t(e,n,r){if(!fv(e.segments,n.segments))return!1;if(!uv(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:sv},iv={exact:function(t,e){return Wy(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Yy(t[n],e[n]))},ignored:()=>!0};function ov(t,e,n){return rv[n.paths](t.root,e.root,n.matrixParams)&&iv[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function sv(t,e,n){return av(t,e,e.segments,n)}function av(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!fv(i,n)&&!e.hasChildren()&&!!uv(i,n,r)}if(t.segments.length===n.length){if(!fv(t.segments,n))return!1;if(!uv(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!sv(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!fv(t.segments,i)&&!!uv(t.segments,i,r)&&!!t.children.primary&&av(t.children.primary,e,o,r)}}function uv(t,e,n){return e.every((e,r)=>iv[n](t[r].parameters,e.parameters))}class cv{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ky(this.queryParams)),this._queryParamMap}toString(){return gv.serialize(this)}}class lv{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ev(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mv(this)}}class hv{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ky(this.parameters)),this._parameterMap}toString(){return Ev(this)}}function fv(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class dv{}class pv{parse(t){const e=new Av(t);return new cv(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${yv(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${bv(e)}=${bv(t)}`).join("&"):`${bv(e)}=${bv(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const gv=new pv;function mv(t){return t.segments.map(t=>Ev(t)).join("/")}function yv(t,e){if(!t.hasChildren())return mv(t);if(e){const e=t.children.primary?yv(t.children.primary,!1):"",n=[];return ev(t.children,(t,e)=>{e!==$y&&n.push(`${e}:${yv(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ev(t.children,(t,r)=>{r===$y&&(n=n.concat(e(t,r)))}),ev(t.children,(t,r)=>{r!==$y&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===$y?[yv(t.children.primary,!1)]:[`${n}:${yv(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${mv(t)}/${e[0]}`:`${mv(t)}/(${e.join("//")})`}}function vv(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bv(t){return vv(t).replace(/%3B/gi,";")}function wv(t){return vv(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _v(t){return decodeURIComponent(t)}function Sv(t){return _v(t.replace(/\+/g,"%20"))}function Ev(t){return`${wv(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${wv(t)}=${wv(e[t])}`).join("")}`;var e}const Tv=/^[^\/()?;=#]+/;function Cv(t){const e=t.match(Tv);return e?e[0]:""}const Iv=/^[^=?&#]+/,xv=/^[^?&#]+/;class Av{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new lv([],{}):new lv([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new lv(t,e)),n}parseSegment(){const t=Cv(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new hv(_v(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Cv(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Cv(this.remaining);t&&(n=t,this.capture(n))}t[_v(e)]=_v(n)}parseQueryParam(t){const e=function(t){const e=t.match(Iv);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(xv);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Sv(e),i=Sv(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Cv(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=$y);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new lv([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class kv{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Ov(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Ov(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Nv(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Nv(t,this._root).map(t=>t.value)}}function Ov(t,e){if(t===e.value)return e;for(const n of e.children){const e=Ov(t,n);if(e)return e}return null}function Nv(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Nv(t,n);if(r.length)return r.unshift(e),r}return[]}class Pv{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Dv(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Rv extends kv{constructor(t,e){super(t),this.snapshot=e,Vv(this,t)}toString(){return this.snapshot.toString()}}function Lv(t,e){const n=function(t,e){const n=new Uv([],{},{},"",{},$y,e,null,t.root,-1,{});return new jv("",new Pv(n,[]))}(t,e),r=new Xg([new hv("",{})]),i=new Xg({}),o=new Xg({}),s=new Xg({}),a=new Xg(""),u=new Fv(r,i,s,a,o,$y,e,n.root);return u.snapshot=n.root,new Rv(new Pv(u,[]),n)}class Fv{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Nt.U)(t=>Ky(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Nt.U)(t=>Ky(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mv(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Uv{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ky(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ky(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jv extends kv{constructor(t,e){super(e),this.url=t,Vv(this,e)}toString(){return qv(this._root)}}function Vv(t,e){e.value._routerState=t,e.children.forEach(e=>Vv(t,e))}function qv(t){const e=t.children.length>0?` { ${t.children.map(qv).join(", ")} } `:"";return`${t.value}${e}`}function Bv(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Wy(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Wy(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Wy(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Wy(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Gv(t,e){return Wy(t.params,e.params)&&function(t,e){return fv(t,e)&&t.every((t,n)=>Wy(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Gv(t.parent,e.parent))}function zv(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return zv(t,e,r);return zv(t,e)})}(t,e,n);return new Pv(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Hv(e,t),t}}const n=new Fv(new Xg((r=e.value).url),new Xg(r.params),new Xg(r.queryParams),new Xg(r.fragment),new Xg(r.data),r.outlet,r.component,r),i=e.children.map(e=>zv(t,e));return new Pv(n,i)}var r}function Hv(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Hv(t.children[n],e.children[n])}function $v(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Zv(t){return"object"==typeof t&&null!=t&&t.outlets}function Kv(t,e,n,r,i){let o={};return r&&ev(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new cv(n.root===t?e:Qv(n.root,t,e),o,i)}function Qv(t,e,n){const r={};return ev(t.children,(t,i)=>{r[i]=t===e?n:Qv(t,e,n)}),new lv(t.segments,r)}class Jv{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&$v(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Zv);if(r&&r!==tv(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wv{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Yv(t,e,n){if(t||(t=new lv([],{})),0===t.segments.length&&t.hasChildren())return Xv(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Zv(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!rb(a,u,e))return o;r+=2}else{if(!rb(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new lv(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new lv(t.segments.slice(r.pathIndex),t.children),Xv(e,0,i)}return r.match&&0===i.length?new lv(t.segments,{}):r.match&&!t.hasChildren()?tb(t,e,n):r.match?Xv(t,0,i):tb(t,e,n)}function Xv(t,e,n){if(0===n.length)return new lv(t.segments,{});{const r=function(t){return Zv(t[0])?t[0].outlets:{[$y]:t}}(n),i={};return ev(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Yv(t.children[r],e,n))}),ev(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new lv(t.segments,i)}}function tb(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Zv(o)){const t=eb(o.outlets);return new lv(r,t)}if(0===i&&$v(n[0])){r.push(new hv(t.segments[e].path,nb(n[0]))),i++;continue}const s=Zv(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&$v(a)?(r.push(new hv(s,nb(a))),i+=2):(r.push(new hv(s,{})),i++)}return new lv(r,{})}function eb(t){const e={};return ev(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=tb(new lv([],{}),0,t))}),e}function nb(t){const e={};return ev(t,(t,n)=>e[n]=`${t}`),e}function rb(t,e,n){return t==n.path&&Wy(e,n.parameters)}class ib{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Bv(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Dv(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ev(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Dv(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Dv(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new zy(t.value.snapshot))}),t.children.length&&this.forwardEvent(new By(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Bv(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),ob(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function ob(t){Bv(t.value),t.children.forEach(ob)}class sb{constructor(t,e){this.routes=t,this.module=e}}function ab(t){return"function"==typeof t}function ub(t){return t instanceof cv}const cb=Symbol("INITIAL_VALUE");function lb(){return gg(t=>function(...t){let e,n;return(0,Ct.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,Im.k)(t[0])&&(t=t[0]),(0,by.n)(t,n).lift(new _y(e))}(t.map(t=>t.pipe(Eg(1),It(cb)))).pipe(Pt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==cb)return t;if(r===cb&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||ub(r))return r}return t},t)},cb),Mt(t=>t!==cb),(0,Nt.U)(t=>ub(t)?t:!0===t),Eg(1)))}let hb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[uw]},encapsulation:2}),t})();function fb(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];db(r,pb(e,r))}}function db(t,e){t.children&&fb(t.children,e)}function pb(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function gb(t){const e=t.children&&t.children.map(gb),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$y&&(n.component=hb),n}function mb(t){return t.outlet||$y}function yb(t,e){const n=t.filter(t=>mb(t)===e);return n.push(...t.filter(t=>mb(t)!==e)),n}const vb={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function bb(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},vb):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Jy)(n,t,e);if(!i)return Object.assign({},vb);const o={};ev(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function wb(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>_b(t,e,n)&&mb(n)!==$y)}(t,n,r)){const i=new lv(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&mb(o)!==$y){const n=new lv([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[mb(o)]=n}return i}(t,e,r,new lv(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>_b(t,e,n))}(t,n,r)){const o=new lv(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(_b(t,n,a)&&!i[mb(a)]){const n=new lv([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[mb(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new lv(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function _b(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Sb(t,e,n,r){return!!(mb(t)===r||r!==$y&&_b(e,n,t))&&("**"===t.path||bb(e,t,n).matched)}function Eb(t,e,n){return 0===e.length&&!t.children[n]}class Tb{constructor(t){this.segmentGroup=t||null}}class Cb{constructor(t){this.urlTree=t}}function Ib(t){return new wt.y(e=>e.error(new Tb(t)))}function xb(t){return new wt.y(e=>e.error(new Cb(t)))}function Ab(t){return new wt.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class kb{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=wb(this.urlTree.root,[],[],this.config).segmentGroup,e=new lv(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,$y).pipe((0,Nt.U)(t=>this.createUrlTree(Ob(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Om(t=>{if(t instanceof Cb)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Tb)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,$y).pipe((0,Nt.U)(e=>this.createUrlTree(Ob(e),t.queryParams,t.fragment))).pipe(Om(t=>{if(t instanceof Tb)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new lv([],{[$y]:t}):t;return new cv(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,Nt.U)(t=>new lv([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,_t.D)(r).pipe(Um(r=>{const i=n.children[r],o=yb(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,Nt.U)(t=>({segment:t,outlet:r})))}),Pt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Mt((e,n)=>t(e,n,r)):Dg.y,Cy(1),n?Ig(e):kg(()=>new wg))}())}expandSegment(t,e,n,r,i,o){return(0,_t.D)(n).pipe(Um(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Om(t=>{if(t instanceof Tb)return(0,St.of)(null);throw t}))),Rg(t=>!!t),Om((t,n)=>{if(t instanceof wg||"EmptyError"===t.name){if(Eb(e,r,i))return(0,St.of)(new lv([],{}));throw new Tb(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Sb(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):Ib(e):Ib(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?xb(i):this.lineralizeSegments(n,i).pipe((0,Mm.zg)(n=>{const i=new lv(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=bb(e,r,i);if(!s)return Ib(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?xb(l):this.lineralizeSegments(r,l).pipe((0,Mm.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,St.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,Nt.U)(t=>(n._loadedConfig=t,new lv(r,{})))):(0,St.of)(new lv(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=bb(e,n,r);if(!o)return Ib(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,Mm.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=wb(e,s,u,o),l=new lv(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,Nt.U)(t=>new lv(s,t)));if(0===o.length&&0===c.length)return(0,St.of)(new lv(s,{}));const h=mb(n)===i;return this.expandSegment(r,l,o,c,h?$y:i,!0).pipe((0,Nt.U)(t=>new lv(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,St.of)(new sb(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,St.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,Mm.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,Nt.U)(t=>(e._loadedConfig=t,t))):function(t){return new wt.y(e=>e.error(Qy(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,St.of)(new sb([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,St.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&ab(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!ab(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return nv(o)});return(0,St.of)(i).pipe(lb(),(0,km.b)(t=>{if(!ub(t))return;const e=Qy(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,Nt.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,St.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Ab(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new cv(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ev(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ev(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new lv(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Ob(t){const e={};for(const n of Object.keys(t.children)){const r=Ob(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new lv(t.segments.concat(e.segments),e.children)}return t}(new lv(t.segments,e))}class Nb{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Pb{constructor(t,e){this.component=t,this.route=e}}function Db(t,e,n){const r=t._root;return Lb(r,e?e._root:null,n,[r.value])}function Rb(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Lb(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Dv(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fv(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fv(t.url,e.url)||!Wy(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gv(t,e)||!Wy(t.queryParams,e.queryParams);case"paramsChange":default:return!Gv(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Nb(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Lb(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Pb(a.outlet.component,s))}else s&&Fb(e,a,i),i.canActivateChecks.push(new Nb(r)),Lb(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ev(o,(t,e)=>Fb(t,n.getContext(e),i)),i}function Fb(t,e,n){const r=Dv(t),i=t.value;ev(r,(t,r)=>{Fb(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Pb(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Mb{}function Ub(t){return new wt.y(e=>e.error(t))}class jb{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=wb(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,$y);if(null===e)return null;const n=new Uv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$y,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Pv(n,e),i=new jv(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Mv(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=yb(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=qb(n);return r.sort((t,e)=>t.value.outlet===$y?-1:e.value.outlet===$y?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Eb(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Sb(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?tv(n).parameters:{};i=new Uv(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zb(t),mb(t),t.component,t,Bb(e),Gb(e)+n.length,Hb(t))}else{const r=bb(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Uv(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zb(t),mb(t),t.component,t,Bb(e),Gb(e)+o.length,Hb(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=wb(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Pv(i,t)]}if(0===a.length&&0===c.length)return[new Pv(i,[])];const l=mb(t)===r,h=this.processSegment(a,u,c,l?$y:r);return null===h?null:[new Pv(i,h)]}}function Vb(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qb(t){const e=[],n=new Set;for(const r of t){if(!Vb(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=qb(r.children);e.push(new Pv(r.value,t))}return e.filter(t=>!n.has(t))}function Bb(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Gb(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function zb(t){return t.data||{}}function Hb(t){return t.resolve||{}}function $b(t){return gg(e=>{const n=t(e);return n?(0,_t.D)(n).pipe((0,Nt.U)(()=>e)):(0,St.of)(e)})}class Zb extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Kb=new r.OlP("ROUTES");class Qb{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,Nt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new sb(Xy(i.injector.get(Kb,void 0,r.XFs.Self|r.XFs.Optional)).map(gb),i)}),Om(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ty.c(n,()=>new dg.xQ).pipe((0,Ay.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,_t.D)(this.loader.load(t)):nv(t()).pipe((0,Mm.zg)(t=>t instanceof r.YKP?(0,St.of)(t):(0,_t.D)(this.compiler.compileModuleAsync(t))))}}class Jb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Wb,this.attachRef=null}}class Wb{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Jb,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Yb{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Xb(t){throw t}function tw(t,e,n){return e.parse("/")}function ew(t,e){return(0,St.of)(null)}const nw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let iw=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new dg.xQ,this.errorHandler=Xb,this.malformedUriErrorHandler=tw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:ew,afterPreactivation:ew},this.urlHandlingStrategy=new Yb,this.routeReuseStrategy=new Zb,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new cv(new lv([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Qb(s,a,t=>this.triggerEvent(new jy(t)),t=>this.triggerEvent(new Vy(t))),this.routerState=Lv(this.currentUrlTree,this.rootComponentType),this.transitions=new Xg({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Mt(t=>0!==t.id),(0,Nt.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),gg(t=>{let n=!1,r=!1;return(0,St.of)(t).pipe((0,km.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),gg(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,St.of)(t).pipe(gg(t=>{const n=this.transitions.getValue();return e.next(new Oy(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Sg.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,gg(t=>function(t,e,n,r,i){return new kb(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,Nt.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,km.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,Mm.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new jb(t,e,n,r,i,o).recognize();return null===s?Ub(new Mb):(0,St.of)(s)}catch(ug){return Ub(ug)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,Nt.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,km.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Ry(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Oy(n,this.serializeUrl(r),i,o);e.next(a);const u=Lv(r,this.rootComponentType).snapshot;return(0,St.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Sg.E}),$b(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,km.b)(t=>{const e=new Ly(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,Nt.U)(t=>Object.assign(Object.assign({},t),{guards:Db(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,Mm.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,St.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,_t.D)(t).pipe((0,Mm.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,St.of)(!0);const s=o.map(o=>{const s=Rb(o,e,i);let a;if(function(t){return t&&ab(t.canDeactivate)}(s))a=nv(s.canDeactivate(t,e,n,r));else{if(!ab(s))throw new Error("Invalid CanDeactivate guard");a=nv(s(t,e,n,r))}return a.pipe(Rg())});return(0,St.of)(s).pipe(lb())}(t.component,t.route,n,e,r)),Rg(t=>!0!==t,!0))}(s,r,i,t).pipe((0,Mm.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,_t.D)(e).pipe(Um(e=>Tt(function(t,e){return null!==t&&e&&e(new qy(t)),(0,St.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Gy(t)),(0,St.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Ey(()=>{const i=e.guards.map(i=>{const o=Rb(i,e.node,n);let s;if(function(t){return t&&ab(t.canActivateChild)}(o))s=nv(o.canActivateChild(r,t));else{if(!ab(o))throw new Error("Invalid CanActivateChild guard");s=nv(o(r,t))}return s.pipe(Rg())});return(0,St.of)(i).pipe(lb())}));return(0,St.of)(i).pipe(lb())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,St.of)(!0);const i=r.map(r=>Ey(()=>{const i=Rb(r,e,n);let o;if(function(t){return t&&ab(t.canActivate)}(i))o=nv(i.canActivate(e,t));else{if(!ab(i))throw new Error("Invalid CanActivate guard");o=nv(i(e,t))}return o.pipe(Rg())}));return(0,St.of)(i).pipe(lb())}(t,e.route,n))),Rg(t=>!0!==t,!0))}(r,o,t,e):(0,St.of)(n)),(0,Nt.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,km.b)(t=>{if(ub(t.guardsResult)){const e=Qy(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Fy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Mt(t=>!!t.guardsResult||(this.cancelNavigationTransition(t,""),!1)),$b(t=>{if(t.guards.canActivateChecks.length)return(0,St.of)(t).pipe((0,km.b)(t=>{const e=new My(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),gg(t=>{let e=!1;return(0,St.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,Mm.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,St.of)(t);let o=0;return(0,_t.D)(i).pipe(Um(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,St.of)({});const o={};return(0,_t.D)(i).pipe((0,Mm.zg)(i=>function(t,e,n,r){const i=Rb(t,e,r);return nv(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,km.b)(t=>{o[i]=t}))),Cy(1),(0,Mm.zg)(()=>Object.keys(o).length===i.length?(0,St.of)(o):Sg.E))}(t._resolve,t,e,r).pipe((0,Nt.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Mv(t,n).resolve),null)))}(t.route,e,n,r)),(0,km.b)(()=>o++),Cy(1),(0,Mm.zg)(e=>o===i.length?(0,St.of)(t):Sg.E))})),(0,km.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,km.b)(t=>{const e=new Uy(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),$b(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,Nt.U)(t=>{const e=function(t,e,n){const r=zv(t,e._root,n?n._root:void 0);return new Rv(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,km.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),(0,Nt.U)(t=>(new ib(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),(0,km.b)({next(){n=!0},complete(){n=!0}}),Dm(()=>{n||r||this.cancelNavigationTransition(t,`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation=null}),Om(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=ub(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Py(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Dy(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Ps){t.reject(Ps)}}var i;return Sg.E}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){fb(t),this.config=t.map(gb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Kv(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Jv(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ev(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Jv(n,e,r)}(n);if(o.toRoot())return Kv(e.root,new lv([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Wv(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Wv(t,t===e.root,0)}const r=$v(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Wv(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Xv(s.segmentGroup,s.index,o.commands):Yv(s.segmentGroup,s.index,o.commands);return Kv(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=ub(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);let i=null;return"computed"===this.canceledNavigationResolution&&(0===this.currentPageId||e.skipLocationChange||e.replaceUrl)&&(i=this.location.getState()),this.scheduleNavigation(r,"imperative",i,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(ug){e=this.malformedUriErrorHandler(ug,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},nw):!1===e?Object.assign({},rw):e,ub(t))return ov(this.currentUrlTree,t,n);const r=this.parseUrl(t);return ov(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ny(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;let f;return f="computed"===this.canceledNavigationResolution?n&&n.\u0275routerPageId?n.\u0275routerPageId:this.currentPageId+1:0,this.setTransition({id:h,targetPageId:f,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree();const n=new Py(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(dv),r.LFG(Wb),r.LFG(_),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ow=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new dg.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:aw(this.skipLocationChange),replaceUrl:aw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:aw(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(iw),r.Y36(Fv),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})(),sw=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new dg.xQ,this.subscription=t.events.subscribe(t=>{t instanceof Ny&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:aw(this.skipLocationChange),replaceUrl:aw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:aw(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(iw),r.Y36(Fv),r.Y36(m))},t.\u0275dir=r.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ikx("href",e.href,r.LSH),r.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function aw(t){return""===t||!!t}let uw=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||$y,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new cw(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Wb),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class cw{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Fv?this.route:t===Wb?this.childContexts:this.parent.get(t,e)}}class lw{}class hw{preload(t,e){return(0,St.of)(null)}}let fw=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Qb(e,n,e=>t.triggerEvent(new jy(e)),e=>t.triggerEvent(new Vy(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Mt(t=>t instanceof Ny),Um(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,_t.D)(n).pipe((0,Et.J)(),(0,Nt.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,St.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,Mm.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(iw),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(lw))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),dw=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Oy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ny&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Hy&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Hy(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(iw),r.LFG(L),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const pw=new r.OlP("ROUTER_CONFIGURATION"),gw=new r.OlP("ROUTER_FORROOT_GUARD"),mw=[_,{provide:dv,useClass:pv},{provide:iw,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new iw(null,t,e,n,r,i,o,Xy(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[dv,Wb,_,r.zs3,r.v3s,r.Sil,Kb,pw,[class{},new r.FiY],[class{},new r.FiY]]},Wb,{provide:Fv,useFactory:function(t){return t.routerState.root},deps:[iw]},{provide:r.v3s,useClass:r.EAV},fw,hw,class{preload(t,e){return e().pipe(Om(()=>(0,St.of)(null)))}},{provide:pw,useValue:{enableTracing:!1}}];function yw(){return new r.PXZ("Router",iw)}let vw=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[mw,Sw(e),{provide:gw,useFactory:_w,deps:[[iw,new r.FiY,new r.tp0]]},{provide:pw,useValue:n||{}},{provide:m,useFactory:ww,deps:[a,[new r.tBr(v),new r.FiY],pw]},{provide:dw,useFactory:bw,deps:[iw,L,pw]},{provide:lw,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:hw},{provide:r.PXZ,multi:!0,useFactory:yw},[Ew,{provide:r.ip1,multi:!0,useFactory:Tw,deps:[Ew]},{provide:Iw,useFactory:Cw,deps:[Ew]},{provide:r.tb,multi:!0,useExisting:Iw}]]}}static forChild(e){return{ngModule:t,providers:[Sw(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(gw,8),r.LFG(iw,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function bw(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new dw(t,e,n)}function ww(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function _w(t){return"guarded"}function Sw(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Kb,multi:!0,useValue:t}]}let Ew=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new dg.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(iw),r=this.injector.get(pw);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,St.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(pw),n=this.injector.get(fw),i=this.injector.get(dw),o=this.injector.get(iw),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function Tw(t){return t.appInitializer.bind(t)}function Cw(t){return t.bootstrapListener.bind(t)}const Iw=new r.OlP("Router Initializer");let xw=(()=>{class t{constructor(){this.title="posMockInterface"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:10,vars:0,consts:[["role","banner",1,"toolbar"],[1,"spacer"],["routerLink","/",1,"nav-link"],["routerLink","/orders",1,"nav-link"],["role","main",1,"content"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"h1"),r._uU(2,"POS Mockup"),r.qZA(),r._UZ(3,"div",1),r.TgZ(4,"a",2),r._uU(5,"Menu"),r.qZA(),r.TgZ(6,"a",3),r._uU(7,"Orders"),r.qZA(),r.qZA(),r.TgZ(8,"div",4),r._UZ(9,"router-outlet"),r.qZA())},directives:[sw,uw],styles:["app-root{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}page-finalize-order,page-item-picker,page-order-list{width:100%}list-display{align-items:center;display:flex;flex-direction:column;max-width:460px;width:100%}list-display.finalize .item-list{max-height:none;position:relative;top:0}h1,h2,h3,h4,h5,h6{margin:8px 0}p{margin:0}sup{font-size:100%;vertical-align:text-top}.spacer{flex:1}.blue-button{background-color:#16a9ff;border-radius:4px;border:1px solid #469cce;color:#fff;font-size:14px;font-weight:700;height:40px;padding:0 12px;text-shadow:1px 1px 4px #0000008c}.blue-button:hover{background-color:#49bcff;text-shadow:1px 1px 4px #000}.blue-button:active{background-color:#008fe2}.toolbar{align-items:center;background-color:#e63d3d;color:#fff;display:flex;font-weight:600;height:60px;left:0;position:fixed;right:0;top:0;z-index:1}.toolbar h1{font-size:24px;margin:0 16px}@media screen and (max-width:400px){.toolbar h1{font-size:20px}}.toolbar .nav-link{background-color:#ffc1c1;color:#333;display:flex;flex-direction:column;font-size:16px;height:100%;justify-content:center;margin:0 5px;padding:0 25px;text-decoration:none}.toolbar .nav-link:hover{text-decoration:underline}.toolbar .nav-link:last-of-type{margin-right:10px}.content{align-items:center;display:flex;flex-direction:column;margin:82px auto 32px;max-width:960px;padding:0 16px}"],encapsulation:2}),t})(),Aw=(()=>{class t{constructor(){}updateTrayHeight(){const t=document.querySelector(".order-status"),e=t.childNodes[1].childNodes[0];t.classList.contains("expanded")&&setTimeout(()=>{t.style.height=e.clientHeight+73+"px",console.dir(t),console.dir(e)},1)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const kw={users:[{id:0,name:"Default"}],orders:{currentOrder:0,queue:[{id:0,status:"In Progress",items:[]}]},menu:{entrees:[{id:0,name:"Chick-fil-A<sup>&reg;</sup> Chicken Sandwich",alt:"Chick-fil-A Chicken Sandwich",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/Classic_Sandwich.png",price:3.89},{id:1,name:"Chick-fil-A<sup>&reg;</sup> Deluxe Chicken Sandwich",alt:"Chick-fil-A Deluxe Chicken Sandwich",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/cfaDeluxe_mobile.png",price:4.59},{id:2,name:"Spicy Chicken Sandwich",alt:"Spicy Chicken Sandwich",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/Spicy_Sandwich.png",price:4.19},{id:3,name:"Spicy Deluxe Sandwich",alt:"Spicy Deluxe Sandwich",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/Spicy_deluxe_sandwich.png",price:4.89},{id:4,name:"Grilled Chicken Sandwich",alt:"Grilled Chicken Sandwich",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/grilledChickenSandwich_test.png",price:5.39},{id:5,name:"Chick-fil-A<sup>&reg;</sup> Grilled Chicken Club Sandwich",alt:"Chick-fil-A Grilled Chicken Club Sandwich",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/grilledChickenClub_test.png",price:6.89},{id:6,name:"Chick-fil-A<sup>&reg;</sup> Nuggets",alt:"Chick-fil-A Nuggets",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/Nuggets_8ct.png",price:3.99},{id:7,name:"Grilled Nuggets",alt:"Grilled Nuggets",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/Grilled_nuggets.png",price:4.79},{id:8,name:"Chick-fil-A Chick-n-Strips<sup>&reg;</sup>",alt:"Chick-fil-A Chick-n-Strips",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/Strips.png",price:4.49},{id:9,name:"Chick-fil-A<sup>&reg;</sup> Cool Wrap",alt:"Chick-fil-A Cool Wrap",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Salads/Menu%20Item/wrap_mobile.png",price:6.79},{id:10,name:"Gluten Free Bun",alt:"Gluten Free Bun",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Modifiers/Sandwich_mod/gluten_free_bun.png",price:1.7},{id:11,name:"Filets",alt:"Filets",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Entrees/Parent/cfa_filet.png",price:3.64}],sides:[{id:0,name:"Chick-fil-A Waffle Potato Fries<sup>&reg;</sup>",alt:"Chick-fil-A Waffle Potato Fries",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Sides/Menu%20Item/Medium_Lowered_1217shoot_800x800%20copy.png",price:1.99},{id:1,name:"Fruit Cup",alt:"Fruit Cup",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Sides/Parent/Fruit_Cup.png",price:3.29},{id:2,name:"Side Salad",alt:"Side Salad",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Sides/Menu%20Item/Side_Salad.png",price:3.35},{id:3,name:"Mac & Cheese",alt:"Mac & Cheese",imgPath:"https://www.cfacdn.com/img/order/Individual/Menu/Sides/MacnCheese_4oz.png",price:3.29},{id:4,name:"Chicken Noodle Soup",alt:"Chicken Noodle Soup",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Sides/Parent/Chicken_Soup.png",price:3.15},{id:5,name:"Kale Crunch Side",alt:"Kale Crunch Side",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Sides/Parent/01.2020_KaleCrunchSide_sm_mobile.png",price:1.99},{id:6,name:"Greek Yogurt Parfait",alt:"Greek Yogurt Parfait",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Sides/Parent/Jul19_OrganicAussieGreekYogurtParfaitCupGranola_mobile.png",price:3.99},{id:7,name:"Waffle Potato Chips",alt:"Waffle Potato Chips",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/chips.png",price:1.89},{id:8,name:"Buddy Fruits<sup>&reg;</sup> Apple Sauce",alt:"Buddy Fruits Apple Sauce",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Sides/Parent/Feb2020_mobile_appleSauce.png",price:1.99}],drinks:{softDrinks:[{id:0,name:"Coca-Cola<sup>&reg;</sup>",alt:"Coca-Cola",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/Coke.png",price:1.79},{id:1,name:"Diet Coke<sup>&reg;</sup>",alt:"Diet Coke",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/dietCoke_400.png",price:1.79},{id:2,name:"Coke<sup>&reg;</sup> Zero Sugar",alt:"Coke Zero Sugar",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/cokeZeroSugar_400.png",price:1.79},{id:3,name:"Coca-Cola<sup>&reg;</sup> Cherry",alt:"Coca-Cola Cherry",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/cherryCoke_400.png",price:1.79},{id:4,name:"Sprite<sup>&reg;</sup>",alt:"Sprite",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/sprite_400.png",price:1.79},{id:5,name:"Dr. Pepper<sup>&reg;</sup>",alt:"Dr. Pepper",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/drPepper_mobile.png",price:1.79},{id:6,name:"Diet Dr. Pepper<sup>&reg;</sup>",alt:"Diet Dr. Pepper",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/dietDrPepper_400.png",price:1.79},{id:7,name:"Barq's<sup>&reg;</sup> Root Beer",alt:"Barq's Root Beer",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/RootBeer.png",price:1.79},{id:8,name:"Hi-C<sup>&reg;</sup> Fruit Punch",alt:"Hi-C Fruit Punch",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/HiC_Fruit_Punch.png",price:1.79},{id:9,name:"Fanta<sup>&reg;</sup> Orange",alt:"Fanta Orange",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/fantaOrange_400.png",price:1.79},{id:10,name:"POWERADE<sup>&reg;</sup>",alt:"POWERADE",imgPath:"https://www.cfacdn.com/img/order/menu/Mobile/Beverages/Parent/powerade_400.png",price:1.79}]}},taxes:{default:.08}};let Ow=(()=>{class t{constructor(){}get data(){return kw}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Nw=(()=>{class t{constructor(t,e){this.orderStatus=t,this.database=e}updateCart(t,e,n){switch(t){case"add":this.database.data.orders.queue[this.database.data.orders.currentOrder].items.push(e),this.orderStatus.updateTrayHeight();break;case"remove":this.database.data.orders.queue[this.database.data.orders.currentOrder].items.splice(n,1)}}roundToTenth(t){return t.toFixed(2)}get currentOrder(){return this.database.data.orders.currentOrder}get subtotal(){let t=0;return this.database.data.orders.queue[this.currentOrder].items.forEach(e=>{t+=e.price}),t}get taxes(){return this.subtotal*this.database.data.taxes.default}get total(){return this.subtotal+this.subtotal*this.database.data.taxes.default}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Aw),r.LFG(Ow))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Pw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li",3),r.TgZ(1,"mat-icon",4),r.NdJ("click",function(){const e=r.CHM(t),n=e.$implicit,i=e.index;return r.oxw().cart.updateCart("remove",n,i)}),r._uU(2," close "),r.qZA(),r.TgZ(3,"div",5),r._UZ(4,"img",6),r.qZA(),r._UZ(5,"p",7),r._UZ(6,"div",8),r.TgZ(7,"p",9),r._uU(8),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw();r.xp6(4),r.Q6J("alt",t.alt),r.uIk("src",t.imgPath,r.LSH),r.xp6(1),r.Q6J("innerHTML",t.name,r.oJD),r.xp6(3),r.hij(" $",n.cart.roundToTenth(t.price)," ")}}function Dw(t,e){1&t&&(r.TgZ(0,"li",10),r._uU(1," Cart is empty... "),r.qZA())}let Rw=(()=>{class t{constructor(t,e){this.cart=t,this.database=e,this.currentOrder=this.database.data.orders.currentOrder}identify(t){return t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Nw),r.Y36(Ow))},t.\u0275cmp=r.Xpm({type:t,selectors:[["list-display"]],decls:3,vars:2,consts:[[1,"item-list"],["class","item",4,"ngFor","ngForOf"],["class","item empty",4,"ngIf"],[1,"item"],[1,"close",3,"click"],[1,"image-container"],[1,"image",3,"alt"],[1,"name",3,"innerHTML"],[1,"space"],[1,"price"],[1,"item","empty"]],template:function(t,e){1&t&&(r.TgZ(0,"ul",0),r.YNc(1,Pw,9,4,"li",1),r.YNc(2,Dw,2,0,"li",2),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngForOf",e.database.data.orders.queue[e.currentOrder].items),r.xp6(1),r.Q6J("ngIf",0===e.database.data.orders.queue[e.currentOrder].items.length))},directives:[k,N,dy],styles:[".item-list[_ngcontent-%COMP%]{display:block;list-style:none;margin:8px 0 0;max-height:44vh;max-width:460px;overflow-y:auto;padding:5px 5px 5px 0;position:absolute;width:95%}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;height:35px}.item-list[_ngcontent-%COMP%]   .item.empty[_ngcontent-%COMP%]{color:#dbdbdb;flex-direction:column;font-weight:700}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(:first-child){padding-top:5px}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid #9e9e9e;padding-bottom:5px}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{width:50px;text-align:center;margin-right:10px}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:inline;max-height:35px;max-width:50px}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;font-weight:700;margin-right:5px}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{cursor:pointer;position:relative;right:0}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .space[_ngcontent-%COMP%]{flex:1}.item-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{font-weight:700}"]}),t})();function Lw(t,e){if(1&t&&(r.TgZ(0,"span"),r._uU(1),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.hij(" Total: $",t.cart.roundToTenth(t.cart.total),"")}}const Fw=function(){return["/place-order"]};function Mw(t,e){1&t&&(r.TgZ(0,"button",5),r._uU(1," Finalize Order "),r.qZA()),2&t&&r.Q6J("routerLink",r.DdM(1,Fw))}let Uw=(()=>{class t{constructor(t,e){this.cart=t,this.database=e}ngOnInit(){}expandTray(t,e){let n;switch(t.target.nodeName){case"DIV":n=t.target;break;case"H1":n=t.target.parentElement;break;case"SPAN":n=t.target.parentElement.parentElement;break;case"UL":n=t.target.parentElement;break;case"LI":n=t.target.parentElement.parentElement;break;case"MAT-ICON":return}const r=n.classList.contains(e),i=n.childNodes[1].childNodes[0];r?(n.classList.remove(e),n.style.height="55px"):(n.classList.add(e),n.style.height=i.clientHeight+73+"px")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Nw),r.Y36(Ow))},t.\u0275cmp=r.Xpm({type:t,selectors:[["order-status"]],decls:7,vars:5,consts:[[1,"order-status",3,"click"],[1,"status-header"],[4,"ngIf"],["class","blue-button",3,"routerLink",4,"ngIf"],[1,"fixed-space"],[1,"blue-button",3,"routerLink"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.NdJ("click",function(t){return e.expandTray(t,"expanded")}),r.TgZ(1,"h1",1),r._uU(2),r.YNc(3,Lw,2,1,"span",2),r.YNc(4,Mw,2,2,"button",3),r.qZA(),r._UZ(5,"list-display"),r.qZA(),r._UZ(6,"div",4)),2&t&&(r.xp6(2),r.lnq(" ",e.database.data.orders.queue[e.cart.currentOrder].items.length," item",1!==e.database.data.orders.queue[e.cart.currentOrder].items.length?"s":"","",0===e.database.data.orders.queue[e.cart.currentOrder].items.length?" in order":"",". "),r.xp6(1),r.Q6J("ngIf",e.cart.total>0),r.xp6(1),r.Q6J("ngIf",e.database.data.orders.queue[e.cart.currentOrder].items.length>0))},directives:[N,Rw,ow],styles:['.order-status[_ngcontent-%COMP%]{align-items:center;background-color:#fff;border-top:3px solid #9e9e9e;bottom:0;box-shadow:0 0 15px rgba(0,0,0,.616);color:#111;cursor:pointer;display:flex;flex-direction:column;height:55px;justify-content:flex-start;left:0;max-height:92vh;position:fixed;transition:height .25s;width:100%}.order-status[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;min-height:40px;text-align:center;width:100%}.order-status[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.order-status[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]   .blue-button[_ngcontent-%COMP%]{margin-left:15px}.order-status[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]:before{font-size:40px!important;content:"expand_more";display:block;height:40px;margin-right:10px;transform:rotate(180deg);transition:transform .2s}@media screen and (max-width:767px){.order-status[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]:before{font-size:29px!important;margin-right:3px;height:27px}.order-status[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]{font-size:18px}}.order-status.expanded[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]:before{transform:rotate(0)}.fixed-space[_ngcontent-%COMP%]{height:55px}.material-icons[_ngcontent-%COMP%], .order-status[_ngcontent-%COMP%]   .status-header[_ngcontent-%COMP%]:before{direction:ltr;display:inline-block;font-family:Material Icons;font-feature-settings:"liga";font-size:24px;font-style:normal;font-weight:400;letter-spacing:normal;line-height:1;text-transform:none;white-space:nowrap;word-wrap:normal;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased}']}),t})();function jw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li",4),r.NdJ("click",function(){const e=r.CHM(t),n=e.$implicit,i=e.index;return r.oxw().cart.updateCart("add",n,i)}),r.TgZ(1,"button"),r._UZ(2,"img",5),r._UZ(3,"p",6),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.Q6J("alt",t.alt),r.uIk("src",t.imgPath,r.LSH),r.xp6(1),r.Q6J("innerHTML",t.name,r.oJD)}}function Vw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li",4),r.NdJ("click",function(){const e=r.CHM(t),n=e.$implicit,i=e.index;return r.oxw().cart.updateCart("add",n,i)}),r.TgZ(1,"button"),r._UZ(2,"img",5),r._UZ(3,"p",6),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.Q6J("alt",t.alt),r.uIk("src",t.imgPath,r.LSH),r.xp6(1),r.Q6J("innerHTML",t.name,r.oJD)}}function qw(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"li",4),r.NdJ("click",function(){const e=r.CHM(t),n=e.$implicit,i=e.index;return r.oxw().cart.updateCart("add",n,i)}),r.TgZ(1,"button"),r._UZ(2,"img",5),r._UZ(3,"p",6),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(2),r.Q6J("alt",t.alt),r.uIk("src",t.imgPath,r.LSH),r.xp6(1),r.Q6J("innerHTML",t.name,r.oJD)}}const Bw=[{path:"",component:(()=>{class t{constructor(t,e){this.cart=t,this.database=e}ngOnInit(){}animateOpenClose(t,e){let n;switch(t.target.nodeName){case"H1":n=t.target.parentElement;break;case"MAT-ICON":n=t.target.parentElement.parentElement}n.classList.contains(e)?(n.classList.remove(e),n.nextSibling.style.height=n.nextSibling.scrollHeight+"px",setTimeout(()=>{n.nextSibling.style.removeProperty("height")},500)):(n.classList.add(e),n.nextSibling.style.height=n.nextSibling.scrollHeight+"px",setTimeout(()=>{n.nextSibling.style.height="0px"},1))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Nw),r.Y36(Ow))},t.\u0275cmp=r.Xpm({type:t,selectors:[["page-item-picker"]],decls:23,vars:3,consts:[[1,"container"],["aria-label","Collapsible heading",3,"click"],[1,"list"],["class","list-item",3,"click",4,"ngFor","ngForOf"],[1,"list-item",3,"click"],[3,"alt"],[3,"innerHTML"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"button",1),r.NdJ("click",function(t){return e.animateOpenClose(t,"closed")}),r.TgZ(2,"h1"),r._uU(3," Entrees "),r.TgZ(4,"mat-icon"),r._uU(5,"expand_more"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(6,"ul",2),r.YNc(7,jw,4,3,"li",3),r.qZA(),r.TgZ(8,"button",1),r.NdJ("click",function(t){return e.animateOpenClose(t,"closed")}),r.TgZ(9,"h1"),r._uU(10," Sides "),r.TgZ(11,"mat-icon"),r._uU(12,"expand_more"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(13,"ul",2),r.YNc(14,Vw,4,3,"li",3),r.qZA(),r.TgZ(15,"button",1),r.NdJ("click",function(t){return e.animateOpenClose(t,"closed")}),r.TgZ(16,"h1"),r._uU(17," Soft drinks "),r.TgZ(18,"mat-icon"),r._uU(19,"expand_more"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(20,"ul",2),r.YNc(21,qw,4,3,"li",3),r.qZA(),r.qZA(),r._UZ(22,"order-status")),2&t&&(r.xp6(7),r.Q6J("ngForOf",e.database.data.menu.entrees),r.xp6(7),r.Q6J("ngForOf",e.database.data.menu.sides),r.xp6(7),r.Q6J("ngForOf",e.database.data.menu.drinks.softDrinks))},directives:[dy,k,Uw],styles:[".container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:contents}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{background-color:#f3f3f3;border-bottom:5px solid #e2e2e2;cursor:pointer;margin-top:10px;padding:5px 5px 5px 10px;position:relative;text-align:left}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{position:absolute;right:5px;top:2px;font-size:40px;height:40px;width:40px;transition:transform .2s}.container[_ngcontent-%COMP%]   button.closed[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{align-items:center;display:flex;flex-wrap:wrap;justify-content:center;list-style:none;overflow:hidden;padding:0;text-align:center;transition:height .5s}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{align-items:center;border-radius:10px;border:2px solid #d3d3d3;cursor:pointer;display:flex;flex-direction:column;height:200px;justify-content:space-evenly;margin:10px;padding:5px 5px 0;transition:transform 25ms;-webkit-user-select:none;user-select:none;width:200px;box-shadow:1px 1px 0 #b4b4b4,inset 0 0 10px #ececec;-moz-box-shadow:1px 1px 0 #b4b4b4,inset 0 0 10px #ececec;-webkit-box-shadow:1px 1px 0 #b4b4b4,inset 0 0 10px #ececec}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50%;max-width:100%}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:14px;font-weight:700;transform:scale(1)!important}@media screen and (max-width:767px){.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{border:2px solid #505050}.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:active{border:2px solid #5187ff;box-shadow:inset 0 0 0 1px #5187ff,inset 0 0 10px #ececec;-moz-box-shadow:inset 0 0 0 1px #5187ff,inset 0 0 10px #ececec;-webkit-box-shadow:inset 0 0 0 1px #5187ff,inset 0 0 10px #ececec;transform:scale(.99)}@media screen and (max-width:767px){.container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{height:120px;width:120px}}"]}),t})()},{path:"orders",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["page-order-list"]],decls:2,vars:0,template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Orders"),r.qZA())},styles:["h1[_ngcontent-%COMP%]{width:100%;text-align:left}"]}),t})()},{path:"place-order",component:(()=>{class t{constructor(t){this.cart=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Nw))},t.\u0275cmp=r.Xpm({type:t,selectors:[["page-finalize-order"]],decls:22,vars:3,consts:[[1,"container"],[1,"left"],[1,"finalize"],[1,"right"],[1,"blue-button"]],template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Finalize Order"),r.qZA(),r.TgZ(2,"h2"),r._uU(3,"Items in order"),r.qZA(),r.TgZ(4,"div",0),r.TgZ(5,"div",1),r._UZ(6,"list-display",2),r.qZA(),r.TgZ(7,"div",3),r.TgZ(8,"h3"),r._uU(9,"Subtotal:"),r.TgZ(10,"span"),r._uU(11),r.qZA(),r.qZA(),r.TgZ(12,"h3"),r._uU(13,"Taxes:"),r.TgZ(14,"span"),r._uU(15),r.qZA(),r.qZA(),r.TgZ(16,"h2"),r._uU(17,"Total:"),r.TgZ(18,"span"),r._uU(19),r.qZA(),r.qZA(),r.TgZ(20,"button",4),r._uU(21," Place Order "),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(11),r.hij(" $",e.cart.roundToTenth(e.cart.subtotal),""),r.xp6(4),r.hij(" $",e.cart.roundToTenth(e.cart.taxes),""),r.xp6(4),r.hij(" $",e.cart.roundToTenth(e.cart.total),""))},directives:[Rw],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:48%}@media screen and (max-width:767px){.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:100%}}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:48%}@media screen and (max-width:767px){.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:right}@media screen and (max-width:767px){.container[_ngcontent-%COMP%]{align-items:center;flex-direction:column}}.blue-button[_ngcontent-%COMP%]{float:right;margin-top:15px}.item-list[_ngcontent-%COMP%]{max-height:none}"]}),t})()}];let Gw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[xw]}),t.\u0275inj=r.cJS({providers:[],imports:[[mt,vt.hO.initializeApp(yt),Yg,py,vw.forRoot(Bw)]]}),t})();(0,r.G48)(),pt().bootstrapModule(Gw).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=8941)}]);